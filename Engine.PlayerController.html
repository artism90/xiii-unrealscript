<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<HTML>
<HEAD>
<!--Generated by UnDox 1.0.3 Copyright (c) 2000 Epic Games. UnDox created and mainteained by Bruce Shankle - bruce@epicgames.com -->
<TITLE>
Engine.PlayerController
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white" vlink="#0000FF" alink="#0000FF">
<H2>
<FONT SIZE="-1">
Engine</FONT>
<BR>
Class  PlayerController</H2>
<FONT SIZE="-1">source: C:\XIII\Engine\Classes\PlayerController.uc</FONT>
<PRE>
<a href="Core.Object.html">Core.Object</a>
   |
   +--<a href="Engine.Actor.html">Engine.Actor</a>
      |
      +--<a href="Engine.Controller.html">Engine.Controller</a>
         |
         +--<b>Engine.PlayerController</b>
</PRE>
<TABLE><TR><TD><B>Direct Known Subclasses:</B><a href="Engine.Admin.html">Admin</a>, <a href="Engine.Camera.html">Camera</a>, <a href="Engine.MessagingSpectator.html">MessagingSpectator</a>, <a href="XIII.XIIIPlayerController.html">XIIIPlayerController</a></TD></TR></TABLE>
<hr/>class <b>PlayerController</b><br>
extends <a href="Engine.Controller.html">Engine.Controller</a>
<p/>
<xmp>//=============================================================================
// PlayerController
//
// PlayerControllers are used by human players to control pawns.
//
// This is a built-in Unreal class and it shouldn't be modified.
// CHANGENOTE: All Changes since v739 in this class are related to the Weapon code update, except
// for the change in Possess().
//=============================================================================
</xmp><br><TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Variables</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L202">AdjustedAimForFiring </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Aim to use when firing Projectiles (because display don't show anticipation </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L116">AnnouncerVolume </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   heads up display info </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;LandBob,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L152">AppliedBob </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Actor.html">Actor</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L203">BestTarget </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   to memorize the best target and use it in interaction </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L151">Bob </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L91">CameraDist </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class<CheatManager></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L178">CheatClass </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my CheatManager </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.CheatManager.html">CheatManager</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L177">CheatManager </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Object within playercontroller that manages "cheat" commands </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;CurrentTimeStamp,LastUpdateTime,ServerTimeStamp,TimeMargin,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L123">ClientUpdateTime </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;eConfigType</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L78">ConfigType </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   auto center view afer walking a while </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L94">DefaultFOV </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L206">DeltaT </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   to enable using it anywhere (needed for death camera sfxs  at least) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L183">DemoViewPitch </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L184">DemoViewYaw </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L93">DesiredFOV </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;EDoubleClickDir</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L83">DoubleClickDir </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   direction of movement key double click (for special moves) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L170">EnemyTurnSpeed </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;color</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L103">FilterColor </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L105">FilterColorSpeed </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;color</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L104">FilterColorWanted </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L106">FilterInternalInc </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;FlashScale,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L98">FlashFog </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.SavedMove.html">SavedMove</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L121">FreeMoves </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.GameReplicationInfo.html">GameReplicationInfo</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L140">GameReplicationInfo </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L171">GroundPitch </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class<PlayerInput></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L180">InputClass </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;ConstantGlowScale,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L99">InstantFlash </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;ConstantGlowFog,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L100">InstantFog </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L115">LastPlaySound </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   heads up display info </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class<LocalMessage></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L149">LocalMessageClass </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L158">MaxShakeOffset </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   max magnitude to offset camera position </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L157">MaxShakeRoll </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   max magnitude to roll camera </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L124">MaxTimeMargin </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L201">MemAim </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   memorize aim when switching bLocked </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L87">Misc1,Misc2 </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   direction of movement key double click (for special moves) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L135">NoPauseMessage </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L197">OldAdjustAim </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to smooth autoaim, Aim to use when firing non-projectiles </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Actor.html">Actor</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L204">OldBestTarget </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   to memorize the best target and use it in interaction </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Weapon.html">Weapon</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L125">OldClientWeapon </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L174">OldFloor </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   used by PlayerSpider mode - floor for which old rotation was based; </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L89">OrthoZoom </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Orthogonal/map view zoom factor. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L137">OwnCamera </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.SavedMove.html">SavedMove</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L122">PendingMove </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Player.html">Player</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L15">Player </A></B></CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.PlayerInput.html">PlayerInput</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L179">PlayerInput </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Object within playercontroller that manages player input. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.PlayerStats.html">PlayerStats</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L146">PlayerStat </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;color</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L130">ProgressColor[4] </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L129">ProgressMessage[4] </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L131">ProgressTimeOut </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L134">QuickSaveString </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L145">ReceivedSecretChecksum </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L88">RendMap </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   direction of movement key double click (for special moves) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.SavedMove.html">SavedMove</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L120">SavedMoves </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   buffered moves pending position updates </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;ShakeFrame,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L165">ShakeFrameRate </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L166">ShakeFrameTime </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L161">ShakeOffset </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  current magnitude to offset camera from shake </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L160">ShakeOffsetRate </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   rate to change roll </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L163">ShakeOffsetTime </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L159">ShakeRollRate </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   rate to change roll </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L162">ShakeRollTime </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L86">ShowFlags </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   direction of movement key double click (for special moves) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L110">TargetEyeHeight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;rotator</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L109">TargetViewRotation </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L111">TargetWeaponViewOffset </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;rotator</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L172">TurnRot180 </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Pawn.html">Pawn</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L169">TurnTarget </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   how long to roll.  if value is < 1.0, then MaxShakeOffset gets damped by this, else if > 1 then its the number of times to repeat undamped </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L187">UseVignetteFilter </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L187">UseVignetteFilter </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L189">UseVignetteHighlight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L189">UseVignetteHighlight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L81">UserPadConfig </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   auto center view afer walking a while </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L198">ViewAdjustAim </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to smooth Weapon rot on screen </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Actor.html">Actor</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L90">ViewTarget </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Orthogonal/map view zoom factor. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L136">ViewingFrom </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;color</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L191">VignetteColor </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;color</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L191">VignetteColor </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L193">VignetteHighLight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L193">VignetteHighLight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Material.html">Material</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L195">VignetteMaterial </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.Material.html">Material</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L195">VignetteMaterial </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   class of my PlayerInput </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L55">WaitDelay </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Delay time until can restart </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L154">WalkBob </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L126">WeaponUpdate </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L95">ZoomLevel </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   multiplier for behindview camera dist </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;b90Right,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L66">b180Turn </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   To make us turn fast to left or right. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L67">bAltDuck </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   To enable the AltDuck Mode </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L68">bAltJump </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   To be used for Hook Mode using Duck/Jump </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L69">bAltRun </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L38">bAlwaysLevel </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   This controller is not allowed to possess pawns </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L20">bAlwaysMouseLook </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Snap to level eyeheight when not mouselooking </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L51">bAutoPickup </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   AutoPickup objects. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L25">bBehindView </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Outside-the-player view. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L22">bCenterView </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   no snapping when true </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L40">bCheatFlying </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   instantly stop in flying mode </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L48">bDontUseVolumeFog </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   adjustaim locked someone (to handle transitions between crosshair pos </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L30">bFixedCamera </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   used to fix camera in position (to view animations) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L41">bFreeCamera </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   free camera when in behindview mode (for checking out player models and animations) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L26">bFrozen </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   set when game ends or player dies to temporarily prevent player from restarting (until cleared by timer) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L70">bInverseLook </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Inverse FlightSim/Std Pad look axis </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L49">bIsInMenu </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   adjustaim locked someone (to handle transitions between crosshair pos </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L29">bIsTyping </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   set when game ends or player dies to temporarily prevent player from restarting (until cleared by timer) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L31">bJumpStatus </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   used in net games </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L21">bKeyboardLook </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   no snapping when true </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L46">bLocked </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   adjustaim locked someone (to handle transitions between crosshair pos </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L18">bLookUpStairs </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   look up/down stairs (player) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L33">bNeverSwitchOnPickup </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   if true, don't automatically switch to picked up weapon </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L36">bOnlySpectator </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   This controller is not allowed to possess pawns </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L27">bPressedJump </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   set when game ends or player dies to temporarily prevent player from restarting (until cleared by timer) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bLeft,</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L65">bRight </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   check if KEYs are pressed and not pad. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L39">bSetTurnRot </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   This controller is not allowed to possess pawns </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L19">bSnapToLevel </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Snap to level eyeheight when not mouselooking </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L28">bUpdatePosition </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   set when game ends or player dies to temporarily prevent player from restarting (until cleared by timer) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L32">bUpdating </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   used in net games </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L80">bUseRumble </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   auto center view afer walking a while </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L71">bWalkCenterView </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   auto center view afer walking a while </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L42">bZeroRoll </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   free camera when in behindview mode (for checking out player models and animations) </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L35">bZooming </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   if true, don't automatically switch to picked up weapon </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L153">bobtime </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Used to store everything that should be usefull for on-line ladder/rankings </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;input</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L61">byte</A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Delay time until can restart </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L200">fAdjustAimTrans </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   to handle crosshair/Adjust aim transition </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L79">fLookSpeed </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   auto center view afer walking a while </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;input</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L57">float</A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Delay time until can restart </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L52">iAutoAimMode </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   0 = off, 1 = on. </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.HUD.html">HUD</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L113">myHUD </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   heads up display info </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L144">ngSecretSet </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L143">ngWorldSecret </A></B></CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   freed moves, available for buffering </TD></TR>
</TD></TR><TABLE><br>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>States</B></FONT></TD>
</TR>
<TR><TD><a href="#STATE_Dead">Dead</a>, <a href="#STATE_GameEnded">GameEnded</a>, <a href="#STATE_WaitingForPawn">WaitingForPawn</a>, <a href="#STATE_Player">Player</a>, <a href="#STATE_Player">Player</a>, <a href="#STATE_PlayerWaiting">PlayerWaiting</a>, <a href="#STATE_PlayerWaiting">PlayerWaiting</a>, <a href="#STATE_Spectating">Spectating</a>, <a href="#STATE_BaseSpectating">BaseSpectating</a>, <a href="#STATE_PlayerHelicoptering">PlayerHelicoptering</a>, <a href="#STATE_PlayerFlying">PlayerFlying</a>, <a href="#STATE_PlayerSwimming">PlayerSwimming</a>, <a href="#STATE_PlayerSpidering">PlayerSpidering</a>, <a href="#STATE_PlayerClimbing">PlayerClimbing</a>, <a href="#STATE_PlayerWalking">PlayerWalking</a></TD></TR><TABLE>
<A NAME="function_summary"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Function Summary</B></FONT></TD>
</TR>
<br><TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1645">ActivateInventoryItem</A></B>(class InvItem)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Activate specific inventory item
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1796">ActivateItem</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to active selected item
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;rotator</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2008">AdjustAim</A></B>(<a href="Engine.Ammunition.html">Ammunition</a> FiredAmmunition, vector projStart, int aimerror)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* AdjustAim()
Calls this version for player aiming help.
Aimerror not used in this version.
Only adjusts aiming at pawns
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;rotator</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2107">AdjustAimForDisplay</A></B>(<a href="Engine.Ammunition.html">Ammunition</a> FiredAmmunition, vector projStart)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// if not leading, add slight random error ( significant at long distances )
		if ( !bNoZAdjust )
		{
			AimRot = rotator(AimSpot - projStart);
			if ( FOVAngle < DefaultFOV - 8 )
				AimRot.Yaw = AimRot.Yaw + 200 - Rand(400);
			else
				AimRot.Yaw = AimRot.Yaw + 375 - Rand(750);
			return AimRot;
		}
	}
	else if ( !FastTrace(projStart + 0.9 * bestDist * Normal(FireDir), projStart) )
	{
		FireDir = BestTarget.Location - projStart;
		AimSpot = projStart + bestDist * Normal(FireDir);
	}

	return rotator(AimSpot - projStart);
}
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1192">AdjustRadius</A></B>(float MaxMove)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2133">AdjustView</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Player view.
// Compute the rendering viewpoint for the player.
//
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1817">AltFire</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to alternate-fire.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L322">AskForPawn</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;eAttitude</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2117">AttitudeTo</A></B>(<a href="Engine.Pawn.html">Pawn</a> Other)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L248">AttribPadToViewport</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1963">BehindView</A></B>(Bool B)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2156">CalcBehindView</A></B>(out vector, out rotator, float Dist)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2176">CalcFirstPersonView</A></B>(out vector, out rotator)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// First-person view.
	CameraRotation = Rotation;
	CameraLocation = CameraLocation + Pawn.EyePosition() + WalkBob + ShakeOffset;
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2176">CalcFirstPersonView</A></B>(out vector, out rotator)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// First-person view.
	CameraRotation = Rotation;
	CameraLocation = CameraLocation + Pawn.EyePosition() + WalkBob + ShakeOffset;
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1860">ChangeName</A></B>(string S)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L629">ChangeSetHand</A></B>(string S)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1876">ChangeTeam</A></B>(int N)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1979">ChangedWeapon</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Just changed to pendingWeapon
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L681">CheckBob</A></B>(float DeltaTime, float Speed2D, vector Y)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	if ( Speed2D < 10 )
		BobTime += 0.2 * DeltaTime;
	else
		BobTime += DeltaTime * (0.3 + 0.7 * Speed2D/Pawn.GroundSpeed);
	WalkBob = Y * 0.4 * Bob * Speed2D * sin(8 * BobTime);
	AppliedBob = AppliedBob * (1 - FMin(1, 16 * deltatime));
	if ( Speed2D < 10 )
		WalkBob.Z = AppliedBob;
	else
		WalkBob.Z = AppliedBob + 0.3 * Bob * Speed2D * sin(16 * BobTime);
	if ( LandBob > 0.01 )
	{
		AppliedBob += FMin(1, 16 * deltatime) * LandBob;
		LandBob *= (1 - 8*Deltatime);
	}
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L681">CheckBob</A></B>(float DeltaTime, float Speed2D, vector Y)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	if ( Speed2D < 10 )
		BobTime += 0.2 * DeltaTime;
	else
		BobTime += DeltaTime * (0.3 + 0.7 * Speed2D/Pawn.GroundSpeed);
	WalkBob = Y * 0.4 * Bob * Speed2D * sin(8 * BobTime);
	AppliedBob = AppliedBob * (1 - FMin(1, 16 * deltatime));
	if ( Speed2D < 10 )
		WalkBob.Z = AppliedBob;
	else
		WalkBob.Z = AppliedBob + 0.3 * Bob * Speed2D * sin(16 * BobTime);
	if ( LandBob > 0.01 )
	{
		AppliedBob += FMin(1, 16 * deltatime) * LandBob;
		LandBob *= (1 - 8*Deltatime);
	}
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2233">CheckShake</A></B>(out float, out float, out float, out float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/*</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1893">ClearProgressMessages</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1459">ClientAdjustGlow</A></B>(float scale, vector fog)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1060">ClientAdjustPosition</A></B>(float TimeStamp, name newState, EPhysics newPhysics, float NewLocX, float NewLocY, float NewLocZ, float NewVelX, float NewVelY, float NewVelZ, <a href="Engine.Actor.html">Actor</a> NewBase)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ClientAdjustPosition
- pass newloc and newvel in components so they don't get rounded
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1465">ClientFilter</A></B>(Color FC, color FCW, float FCS)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1447">ClientFlash</A></B>(float scale, vector fog)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L317">ClientGotoState</A></B>(name NewState, name NewLabel)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ClientGotoState()
server uses this to force client into NewState
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1472">ClientHighLight</A></B>(color TargetColor, float TargetHighLight, optional Material)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1453">ClientInstantFlash</A></B>(float scale, vector fog)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<br/>simulated</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L496">ClientPlaySound</A></B>(sound ASound, optional bool)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>//Play a sound client side (so only client will hear it
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<br/>simulated</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L507">ClientReliablePlaySound</A></B>(sound ASound, optional bool)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L656">ClientReplicateSkins</A></B>(<a href="Engine.Material.html">Material</a> Skin1, optional Material, optional Material, optional Material)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1948">ClientRestart</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L651">ClientSetBehindView</A></B>(bool B)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L646">ClientSetFixedCamera</A></B>(bool B)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1500">ClientShake</A></B>(vector ShakeRoll, vector OffsetMag, vector ShakeRate, float OffsetTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ClientShake()
Function called on client to shake view.
Only ShakeView() should call ClientShake()
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;event</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L258">ClientTravel</A></B>(string URL, ETravelType TravelType, bool bItems)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1153">ClientUpdatePosition</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L696">ClientVoiceMessage</A></B>(<a href="Engine.PlayerReplicationInfo.html">PlayerReplicationInfo</a> Sender, <a href="Engine.PlayerReplicationInfo.html">PlayerReplicationInfo</a> Recipient, name messagetype, byte messageID)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	Local Vector WBob;

	WBob = BobDamping * WalkBob;
	WBob.Z = (0.45 + 0.55 * BobDamping) * WalkBob.Z;

	return (WBob + 0.9 * ShakeOffset);
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1251">CompressAccel</A></B>(int C)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L254">ConsoleCommand</A></B>(string Command)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L262">CopyToClipboard</A></B>(string Text)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Execute a console command in the context of this player, then forward to Actor.ConsoleCommand.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L560">EndZoom</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1929">EnterStartState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L585">FOV</A></B>(float F)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L268">FindStairRotation</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* FindStairRotation()
returns an integer to use as a pitch to orient player view along current ground (flat, up, or down)
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1805">Fire</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to fire.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L566">FixFOV</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L711">ForceDeathUpdate</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ForceDeathUpdate()
Make sure ClientAdjustPosition immediately informs client of pawn's death
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L595">ForceReload</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L260">GetDefaultURL</A></B>(string Option)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.LevelInfo.html">LevelInfo</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L255">GetEntryLevel</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L352">GetFacingDirection</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* GetFacingDirection()
returns direction faced relative to movement dir
0 = forward
16384 = right
32768 = back
49152 = left
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<a href="Engine.SavedMove.html">SavedMove</a></CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1211">GetFreeMove</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L247">GetPadNumber</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Pad management
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L253">GetPlayerNetworkAddress</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L336">GivePawn</A></B>(<a href="Engine.Pawn.html">Pawn</a> NewPawn)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L428">HandlePickup</A></B>(<a href="Engine.Pickup.html">Pickup</a> pick)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1436">HandleWalking</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	if ( Pawn != None )
		Pawn.SetWalking(((bRun != 0) || (bDuck != 0)) && !Region.Zone.IsA('WarpZoneInfo'));
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1436">HandleWalking</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	if ( Pawn != None )
		Pawn.SetWalking(((bRun != 0) || (bDuck != 0)) && !Region.Zone.IsA('WarpZoneInfo'));
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1565">Jump</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>//*************************************************************************************
// Normal gameplay execs
// Type the name of the exec function at the console to execute it
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1589">LocalTravel</A></B>(string URL)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1084">LongClientAdjustPosition</A></B>(float TimeStamp, name newState, EPhysics newPhysics, float NewLocX, float NewLocY, float NewLocZ, float NewVelX, float NewVelY, float NewVelZ, <a href="Engine.Actor.html">Actor</a> NewBase, float NewFloorX, float NewFloorY, float NewFloorZ)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* LongClientAdjustPosition
long version, when care about pawn's floor normal
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L986">MoveAutonomous</A></B>(float DeltaTime, bool NewbRun, bool NewbDuck, bool NewbPressedJump, eDoubleClickDir DoubleClickMove, vector newAccel, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1851">Name</A></B>(string S)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1696">NextWeapon</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* NextWeapon()
- switch to next inventory group weapon
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2109">NotifyLanded</A></B>(vector HitNormal)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L251">OptimizeInputBindings</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// "Compile" the commands associated with each input key
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L263">PasteFromClipboard</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1638">Pause</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* Pause()
Command to try to pause the game.
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L395">PawnDied</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// unpossessed a pawn (because pawn was killed)
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<br/>simulated</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L493">PlayBeepSound</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1999">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L365">Possess</A></B>(<a href="Engine.Pawn.html">Pawn</a> aPawn)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Possess a pawn
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1768">PrevItem</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to select previous item
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1675">PrevWeapon</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* PrevWeapon()
- switch to previous inventory group weapon
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L980">ProcessMove</A></B>(float DeltaTime, vector newAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1614">QuickLoad</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* QuickLoad()
Load game from slot 9
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1601">QuickSave</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* QuickSave()
Save game to slot 9
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1287">ReplicateMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>//
// Replicate this client's desired movement to the server.
//
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L295">Reset</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* Reset()
reset actor to initial state - used when restarting level without reloading.
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L579">ResetFOV</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L256">ResetKeyboard</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1918">Restart</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1583">RestartLevel</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L605">Say</A></B>(string Msg)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Send a message to all players.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1269">ServerMove</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/*
========================================================================
Here's how player movement prediction, replication and correction works in network games:

Every tick, the PlayerTick() function is called.  It calls the PlayerMove() function (which is implemented
in various states).  PlayerMove() figures out the acceleration and rotation, and then calls ProcessMove()
(for single player or listen servers), or ReplicateMove() (if its a network client).

ReplicateMove() saves the move (in the PendingMove list), calls ProcessMove(), and then replicates the move
to the server by calling the replicated </pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1269">ServerMove</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/*
========================================================================
Here's how player movement prediction, replication and correction works in network games:

Every tick, the PlayerTick() function is called.  It calls the PlayerMove() function (which is implemented
in various states).  PlayerMove() figures out the acceleration and rotation, and then calls ProcessMove()
(for single player or listen servers), or ReplicateMove() (if its a network client).

ReplicateMove() saves the move (in the PendingMove list), calls ProcessMove(), and then replicates the move
to the server by calling the replicated </pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1438">ServerRestartGame</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L616">ServerSetHandedness</A></B>(float hand)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// ------------------------------------------------------------------------
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L573">SetFOV</A></B>(float NewFOV)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1442">SetFOVAngle</A></B>(float newFOV)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L623">SetHand</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1624">SetPause</A></B>(BOOL bPause)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* SetPause()
 Try to pause game; returns success indicator.
 Replicated to server in network games.
 */</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L257">SetViewTarget</A></B>(<a href="Engine.Actor.html">Actor</a> NewViewTarget)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1535">ShakeView</A></B>(float shaketime, float RollMag, vector OffsetMag, float RollRate, vector OffsetRate, float OffsetTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ShakeView()
Call this function to shake the player's view
shaketime = how long to roll view
RollMag = how far to roll view as it shakes
OffsetMag = max view offset
RollRate = how fast to roll view
OffsetRate = how fast to offset view
OffsetTime = how long to offset view (number of shakes)
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1039">ShortClientAdjustPosition</A></B>(float TimeStamp, name newState, EPhysics newPhysics, float NewLocX, float NewLocY, float NewLocZ, <a href="Engine.Actor.html">Actor</a> NewBase)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ShortClientAdjustPosition
bandwidth saving version, when velocity is zeroed
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L719">ShortServerMove</A></B>(float TimeStamp, vector ClientLoc, bool NewbRun, bool NewbDuck, bool NewbJumpStatus, byte ClientRoll, int View)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ShortServerMove()
compressed version of server move for bandwidth saving
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L287">SpawnDefaultHUD</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* SpawnDefaultHUD()
Spawn a HUD (make sure that PlayerController always has valid HUD, even if \
ClientSetHUD() hasn't been called\
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1574">Speech</A></B>(int Type, int Index, int Callsign)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Send a voice message of a certain type to a certain player.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L549">StartZoom</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L555">StopZoom</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1846">Suicide</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1887">SwitchLevel</A></B>(string URL)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1868">SwitchTeam</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1715">SwitchWeapon</A></B>(byte F)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to switch to weapon group number F.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L610">TeamSay</A></B>(string Msg)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1660">ThrowWeapon</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* ThrowWeapon()
Throw out current weapon, and switch to a new weapon
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L541">ToggleZoom</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// ------------------------------------------------------------------------
// Zooming/FOV change functions
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2293">TurnAround</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2291">TurnTowardNearestEnemy</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1551">Typing</A></B>(bool bTyping)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L380">UnPossess</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// unpossessed a pawn (not because pawn was killed)
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1969">UpdateBob</A></B>(float F)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2306">UpdateRotation</A></B>(float DeltaTime, float maxPitch)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L259">UpdateURL</A></B>(string NewOption, string NewValue, bool bSaveDefault)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1829">Use</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// The player wants to use something in the level.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1020">VeryShortClientAdjustPosition</A></B>(float TimeStamp, float NewLocX, float NewLocY, float NewLocZ, <a href="Engine.Actor.html">Actor</a> NewBase)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* VeryShortClientAdjustPosition
bandwidth saving version, when velocity is zeroed, and pawn is walking
*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L466">ViewFlash</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	local vector goalFog;
	local float goalscale, delta;

	delta = FMin(0.1, DeltaTime);
	goalScale = 1 + DesiredFlashScale + ConstantGlowScale;
	goalFog = DesiredFlashFog + ConstantGlowFog;

	if ( Pawn != None )
	{
		goalScale += Pawn.HeadVolume.ViewFlash.X;
		goalFog += Pawn.HeadVolume.ViewFog;
	}

	DesiredFlashScale -= DesiredFlashScale * 2 * delta;
	DesiredFlashFog -= DesiredFlashFog * 2 * delta;
	FlashScale.X += (goalScale - FlashScale.X + InstantFlash) * 10 * delta;
	FlashFog += (goalFog - FlashFog + InstantFog) * 10 * delta;
	InstantFlash = 0;
	InstantFog = vect(0,0,0);

	if ( FlashScale.X > 0.981 )
		FlashScale.X = 1;
	FlashScale = FlashScale.X * vect(1,1,1);

	if ( FlashFog.X < 0.019 )
		FlashFog.X = 0;
	if ( FlashFog.Y < 0.019 )
		FlashFog.Y = 0;
	if ( FlashFog.Z < 0.019 )
		FlashFog.Z = 0;
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L466">ViewFlash</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
	local vector goalFog;
	local float goalscale, delta;

	delta = FMin(0.1, DeltaTime);
	goalScale = 1 + DesiredFlashScale + ConstantGlowScale;
	goalFog = DesiredFlashFog + ConstantGlowFog;

	if ( Pawn != None )
	{
		goalScale += Pawn.HeadVolume.ViewFlash.X;
		goalFog += Pawn.HeadVolume.ViewFog;
	}

	DesiredFlashScale -= DesiredFlashScale * 2 * delta;
	DesiredFlashFog -= DesiredFlashFog * 2 * delta;
	FlashScale.X += (goalScale - FlashScale.X + InstantFlash) * 10 * delta;
	FlashFog += (goalFog - FlashFog + InstantFog) * 10 * delta;
	InstantFlash = 0;
	InstantFog = vect(0,0,0);

	if ( FlashScale.X > 0.981 )
		FlashScale.X = 1;
	FlashScale = FlashScale.X * vect(1,1,1);

	if ( FlashFog.X < 0.019 )
		FlashFog.X = 0;
	if ( FlashFog.Y < 0.019 )
		FlashFog.Y = 0;
	if ( FlashFog.Z < 0.019 )
		FlashFog.Z = 0;
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2289">ViewShake</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// modify shake offset
		ShakeOffset.X += DeltaTime * ShakeOffsetRate.X;
		CheckShake(MaxShakeOffset.X, ShakeOffset.X, ShakeOffsetRate.X, ShakeOffsetTime.X);

		ShakeOffset.Y += DeltaTime * ShakeOffsetRate.Y;
		CheckShake(MaxShakeOffset.Y, ShakeOffset.Y, ShakeOffsetRate.Y, ShakeOffsetTime.Y);

		ShakeOffset.Z += DeltaTime * ShakeOffsetRate.Z;
		CheckShake(MaxShakeOffset.Z, ShakeOffset.Z, ShakeOffsetRate.Z, ShakeOffsetTime.Z);
	}

	ViewRotation = Rotation;

	if ( ShakeRollRate != 0 )
	{
		ViewRotation.Roll = ((ViewRotation.Roll & 65535) + ShakeRollRate * DeltaTime) & 65535;
		if ( ViewRotation.Roll > 32768 )
			ViewRotation.Roll -= 65536;
		FRoll = ViewRotation.Roll;
		CheckShake(MaxShakeRoll, FRoll, ShakeRollRate, ShakeRollTime);
		ViewRotation.Roll = FRoll;
	}
	else if ( bZeroRoll )
		ViewRotation.Roll = 0;
	SetRotation(ViewRotation);
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2289">ViewShake</A></B>(float DeltaTime)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// modify shake offset
		ShakeOffset.X += DeltaTime * ShakeOffsetRate.X;
		CheckShake(MaxShakeOffset.X, ShakeOffset.X, ShakeOffsetRate.X, ShakeOffsetTime.X);

		ShakeOffset.Y += DeltaTime * ShakeOffsetRate.Y;
		CheckShake(MaxShakeOffset.Y, ShakeOffset.Y, ShakeOffsetRate.Y, ShakeOffsetTime.Y);

		ShakeOffset.Z += DeltaTime * ShakeOffsetRate.Z;
		CheckShake(MaxShakeOffset.Z, ShakeOffset.Z, ShakeOffsetRate.Z, ShakeOffsetTime.Z);
	}

	ViewRotation = Rotation;

	if ( ShakeRollRate != 0 )
	{
		ViewRotation.Roll = ((ViewRotation.Roll & 65535) + ShakeRollRate * DeltaTime) & 65535;
		if ( ViewRotation.Roll > 32768 )
			ViewRotation.Roll -= 65536;
		FRoll = ViewRotation.Roll;
		CheckShake(MaxShakeRoll, FRoll, ShakeRollRate, ShakeRollTime);
		ViewRotation.Roll = FRoll;
	}
	else if ( bZeroRoll )
		ViewRotation.Roll = 0;
	SetRotation(ViewRotation);
}*/</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;vector</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L685">WeaponBob</A></B>(float BobDamping)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>/* --> Become a 100% C++ virtual function
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L1545">damageAttitudeTo</A></B>(<a href="Engine.Pawn.html">Pawn</a> Other, float Damage)</CODE></TD></TR>
</table>

<br><br><center>
<a name="STATE_Dead">
<A NAME="State Dead"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State Dead Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3538">ChangeAlwaysMouseLook</A></B>(Bool B)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3531">ChangeStairLook</A></B>(bool B)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>//------------------------------------------------------------------------------
// Control options
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3524">SetNGSecret</A></B>(string newSecret)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;string</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3519">GetNGSecret</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>//------------------------------------------------------------------------------
// ngStats Accessors
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3492">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3467">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3462">Timer2</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3454">Timer</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3420">FindGoodView</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3387">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3360">ServerMove</A></B>(float TimeStamp, vector Accel, vector ClientLoc, bool NewbRun, bool NewbDuck, bool NewbJumpStatus, eDoubleClickDir DoubleClickMove, byte ClientRoll, int View, optional byte, optional int)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3355">AltFire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3349">Fire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3342">ServerRestartPlayer</A></B>()</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_GameEnded">
<A NAME="State GameEnded"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State GameEnded Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3307">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3302">Timer</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3269">FindGoodView</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3249">ServerMove</A></B>(float TimeStamp, vector InAccel, vector ClientLoc, bool NewbRun, bool NewbDuck, bool NewbJumpStatus, eDoubleClickDir DoubleClickMove, byte ClientRoll, int View, optional byte, optional int)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3213">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3208">AltFire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3198">Fire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3193">ServerReStartGame</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3189">ThrowWeapon</A></B>()</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_WaitingForPawn">
<A NAME="State WaitingForPawn"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State WaitingForPawn Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3177">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3170">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3163">Timer</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3144">PlayerTick</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3125">LongClientAdjustPosition</A></B>(float TimeStamp, <a href="PlayerController.Name.html">Name</a> newState, EPhysics newPhysics, float NewLocX, float NewLocY, float NewLocZ, float NewVelX, float NewVelY, float NewVelZ, <a href="Engine.Actor.html">Actor</a> NewBase, float NewFloorX, float NewFloorY, float NewFloorZ)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3121">AltFire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3117">Fire</A></B>(optional float)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_Player">
<A NAME="State Player"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State Player Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3110">UnFire</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
    {
      if (!Player.LocalInteractions[0].IsInState('UWindows'))
        ServerReStartPlayer();
    }
    exec </pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3105">Fire</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>="$player);
    }
    exec </pre></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_Player">
<A NAME="State Player"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State Player Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3100">BeginState</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>="$player);
    }

    </pre></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerWaiting">
<A NAME="State PlayerWaiting"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerWaiting Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3091">EndState</A></B>()</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>
{
    </pre></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerWaiting">
<A NAME="State PlayerWaiting"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerWaiting Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3079">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3070">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3068">AltFire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3062">Fire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3037">ServerReStartPlayer</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3032">ChangeTeam</A></B>(int N)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3030">Suicide</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3029">Jump</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3028">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3027">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_Spectating">
<A NAME="State Spectating"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State Spectating Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3016">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L3006">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2999">AltFire</A></B>(optional float)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// Return to spectator's own camera.
</pre></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2969">Fire</A></B>(optional float)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2961">PrevWeapon</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2956">NextWeapon</A></B>()</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_BaseSpectating">
<A NAME="State BaseSpectating"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State BaseSpectating Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2933">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2927">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerHelicoptering">
<A NAME="State PlayerHelicoptering"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerHelicoptering Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2903">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerFlying">
<A NAME="State PlayerFlying"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerFlying Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2895">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2874">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerSwimming">
<A NAME="State PlayerSwimming"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerSwimming Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2863">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2855">Timer</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2827">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2815">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2778">NotifyPhysicsVolumeChange</A></B>(<a href="Engine.PhysicsVolume.html">PhysicsVolume</a> NewVolume)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2769">NotifyLanded</A></B>(vector HitNormal)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2764">WantsSmoothedView</A></B>()</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerSpidering">
<A NAME="State PlayerSpidering"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerSpidering Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2745">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2726">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2682">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2671">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2664">NotifyPhysicsVolumeChange</A></B>(<a href="Engine.PhysicsVolume.html">PhysicsVolume</a> NewVolume)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2655">NotifyLanded</A></B>(vector HitNormal)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2574">UpdateRotation</A></B>(float DeltaTime, float maxPitch)</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre>// if spider mode, update rotation based on floor
</pre></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerClimbing">
<A NAME="State PlayerClimbing"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerClimbing Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2551">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2545">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2513">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2498">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2489">NotifyPhysicsVolumeChange</A></B>(<a href="Engine.PhysicsVolume.html">PhysicsVolume</a> NewVolume)</CODE></TD></TR>
</table>

<br/><br/><center>
<a name="STATE_PlayerWalking">
<A NAME="State PlayerWalking"/>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>State PlayerWalking Function Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2475">EndState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2462">BeginState</A></B>()</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2381">PlayerMove</A></B>(float DeltaTime)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2362">ProcessMove</A></B>(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)</CODE></TD></TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;bool</CODE></FONT></TD>
<TD><CODE><B><A HREF="#L2355">NotifyPhysicsVolumeChange</A></B>(<a href="Engine.PhysicsVolume.html">PhysicsVolume</a> NewVolume)</CODE></TD></TR>
</table>

<br/><br/><center>
<hr/><center><FONT SIZE="-1">
Source Code</FONT>
</center><hr/>
<table width="90%" bgcolor="#000000"><tr><td><font color="#00FF00"><pre><code>
<a name="L1"><font color="white">00001</font>	//=============================================================================
<a name="L2"><font color="white">00002</font>	// PlayerController
<a name="L3"><font color="white">00003</font>	//
<a name="L4"><font color="white">00004</font>	// PlayerControllers are used by human players to control pawns.
<a name="L5"><font color="white">00005</font>	//
<a name="L6"><font color="white">00006</font>	// This is a built-in Unreal class and it shouldn't be modified.
<a name="L7"><font color="white">00007</font>	// CHANGENOTE: All Changes since v739 in this class are related to the Weapon code update, except
<a name="L8"><font color="white">00008</font>	// for the change in Possess().
<a name="L9"><font color="white">00009</font>	//=============================================================================
<a name="L10"><font color="white">00010</font>	class PlayerController extends Controller
<a name="L11"><font color="white">00011</font>	  config(user)
<a name="L12"><font color="white">00012</font>	  native
<a name="L13"><font color="white">00013</font>	  nativereplication;
<a name="L14"><font color="white">00014</font>	
<a name="L15"><font color="white">00015</font>	// Player info.
<a name="L16"><font color="white">00016</font>	var const player Player;
<a name="L17"><font color="white">00017</font>	
<a name="L18"><font color="white">00018</font>	// player input control
<a name="L19"><font color="white">00019</font>	var globalconfig bool bLookUpStairs;  // look up/down stairs (player)
<a name="L20"><font color="white">00020</font>	var globalconfig bool bSnapToLevel;   // Snap to level eyeheight when not mouselooking
<a name="L21"><font color="white">00021</font>	var globalconfig bool bAlwaysMouseLook;
<a name="L22"><font color="white">00022</font>	var globalconfig bool bKeyboardLook;  // no snapping when true
<a name="L23"><font color="white">00023</font>	var bool bCenterView;
<a name="L24"><font color="white">00024</font>	
<a name="L25"><font color="white">00025</font>	// Player control flags
<a name="L26"><font color="white">00026</font>	var bool bBehindView;                 // Outside-the-player view.
<a name="L27"><font color="white">00027</font>	var bool bFrozen;                     // set when game ends or player dies to temporarily prevent player from restarting (until cleared by timer)
<a name="L28"><font color="white">00028</font>	var bool bPressedJump;
<a name="L29"><font color="white">00029</font>	var bool bUpdatePosition;
<a name="L30"><font color="white">00030</font>	var bool bIsTyping;
<a name="L31"><font color="white">00031</font>	var bool bFixedCamera;                // used to fix camera in position (to view animations)
<a name="L32"><font color="white">00032</font>	var bool bJumpStatus;                 // used in net games
<a name="L33"><font color="white">00033</font>	var bool bUpdating;
<a name="L34"><font color="white">00034</font>	var globalconfig bool bNeverSwitchOnPickup;  // if true, don't automatically switch to picked up weapon
<a name="L35"><font color="white">00035</font>	
<a name="L36"><font color="white">00036</font>	var bool bZooming;
<a name="L37"><font color="white">00037</font>	var bool bOnlySpectator;              // This controller is not allowed to possess pawns
<a name="L38"><font color="white">00038</font>	
<a name="L39"><font color="white">00039</font>	var globalconfig bool bAlwaysLevel;
<a name="L40"><font color="white">00040</font>	var bool bSetTurnRot;
<a name="L41"><font color="white">00041</font>	var bool bCheatFlying;                // instantly stop in flying mode
<a name="L42"><font color="white">00042</font>	var bool bFreeCamera;                 // free camera when in behindview mode (for checking out player models and animations)
<a name="L43"><font color="white">00043</font>	var bool bZeroRoll;
<a name="L44"><font color="white">00044</font>	
<a name="L45"><font color="white">00045</font>	// XIII Added
<a name="L46"><font color="white">00046</font>	//var config bool bAltDuckMode;         // True = Crouch toggle, False = Crouch on/off
<a name="L47"><font color="white">00047</font>	var bool bLocked;                     // adjustaim locked someone (to handle transitions between crosshair pos
<a name="L48"><font color="white">00048</font>	
<a name="L49"><font color="white">00049</font>	var bool bDontUseVolumeFog;
<a name="L50"><font color="white">00050</font>	var bool bIsInMenu;
<a name="L51"><font color="white">00051</font>	
<a name="L52"><font color="white">00052</font>	var globalconfig bool bAutoPickup;    // AutoPickup objects.
<a name="L53"><font color="white">00053</font>	var globalconfig int iAutoAimMode;    // 0 = off, 1 = on.
<a name="L54"><font color="white">00054</font>	
<a name="L55"><font color="white">00055</font>	// XIIIUNUSED var float AimingHelp;
<a name="L56"><font color="white">00056</font>	var float WaitDelay;                  // Delay time until can restart
<a name="L57"><font color="white">00057</font>	
<a name="L58"><font color="white">00058</font>	var input float
<a name="L59"><font color="white">00059</font>	  aBaseX, aBaseY, aBaseZ,  aMouseX, aMouseY,
<a name="L60"><font color="white">00060</font>	  aForward, aTurn, aStrafe, aUp, aLookUp;
<a name="L61"><font color="white">00061</font>	
<a name="L62"><font color="white">00062</font>	var input byte
<a name="L63"><font color="white">00063</font>	  bStrafe, bSnapLevel, bLook, bFreeLook, bTurn180, bTurnToNearest;
<a name="L64"><font color="white">00064</font>	
<a name="L65"><font color="white">00065</font>	// XIII Additional inputs
<a name="L66"><font color="white">00066</font>	var input byte bUp, bDown, bLeft, bRight;   // check if KEYs are pressed and not pad.
<a name="L67"><font color="white">00067</font>	var input byte b90Left, b90Right, b180Turn; // To make us turn fast to left or right.
<a name="L68"><font color="white">00068</font>	var input byte bAltDuck;                    // To enable the AltDuck Mode
<a name="L69"><font color="white">00069</font>	var input byte bAltJump;                    // To be used for Hook Mode using Duck/Jump
<a name="L70"><font color="white">00070</font>	var input byte bAltRun;                     //
<a name="L71"><font color="white">00071</font>	var globalconfig bool bInverseLook;   // Inverse FlightSim/Std Pad look axis
<a name="L72"><font color="white">00072</font>	var globalconfig bool bWalkCenterView;// auto center view afer walking a while
<a name="L73"><font color="white">00073</font>	//var float Ym,Lm,Sm,Tm;  // DBUG used to check max value of inputs
<a name="L74"><font color="white">00074</font>	enum eConfigType
<a name="L75"><font color="white">00075</font>	{
<a name="L76"><font color="white">00076</font>	  CT_StrafeLookSameAxis,
<a name="L77"><font color="white">00077</font>	  CT_StrafeLookNotSameAxis,
<a name="L78"><font color="white">00078</font>	};
<a name="L79"><font color="white">00079</font>	var config eConfigType ConfigType;
<a name="L80"><font color="white">00080</font>	var config float fLookSpeed;
<a name="L81"><font color="white">00081</font>	var config bool bUseRumble;
<a name="L82"><font color="white">00082</font>	var config int UserPadConfig;
<a name="L83"><font color="white">00083</font>	//
<a name="L84"><font color="white">00084</font>	var EDoubleClickDir DoubleClickDir;   // direction of movement key double click (for special moves)
<a name="L85"><font color="white">00085</font>	
<a name="L86"><font color="white">00086</font>	// Camera info.
<a name="L87"><font color="white">00087</font>	var int ShowFlags;
<a name="L88"><font color="white">00088</font>	var int Misc1,Misc2;
<a name="L89"><font color="white">00089</font>	var int RendMap;
<a name="L90"><font color="white">00090</font>	var float OrthoZoom;                  // Orthogonal/map view zoom factor.
<a name="L91"><font color="white">00091</font>	var const actor ViewTarget;
<a name="L92"><font color="white">00092</font>	var float CameraDist;                 // multiplier for behindview camera dist
<a name="L93"><font color="white">00093</font>	
<a name="L94"><font color="white">00094</font>	var float DesiredFOV;
<a name="L95"><font color="white">00095</font>	var globalconfig float DefaultFOV;
<a name="L96"><font color="white">00096</font>	var float ZoomLevel;
<a name="L97"><font color="white">00097</font>	
<a name="L98"><font color="white">00098</font>	// Screen flashes
<a name="L99"><font color="white">00099</font>	var vector FlashScale, FlashFog;
<a name="L100"><font color="white">00100</font>	var float DesiredFlashScale, ConstantGlowScale, InstantFlash;
<a name="L101"><font color="white">00101</font>	var vector DesiredFlashFog, ConstantGlowFog, InstantFog;
<a name="L102"><font color="white">00102</font>	
<a name="L103"><font color="white">00103</font>	// Filter.
<a name="L104"><font color="white">00104</font>	var color FilterColor;
<a name="L105"><font color="white">00105</font>	var color FilterColorWanted;
<a name="L106"><font color="white">00106</font>	var float FilterColorSpeed;
<a name="L107"><font color="white">00107</font>	var int FilterInternalInc;
<a name="L108"><font color="white">00108</font>	
<a name="L109"><font color="white">00109</font>	// Remote Pawn ViewTargets
<a name="L110"><font color="white">00110</font>	var rotator TargetViewRotation;
<a name="L111"><font color="white">00111</font>	var float TargetEyeHeight;
<a name="L112"><font color="white">00112</font>	var vector TargetWeaponViewOffset;
<a name="L113"><font color="white">00113</font>	
<a name="L114"><font color="white">00114</font>	var HUD myHUD;  // heads up display info
<a name="L115"><font color="white">00115</font>	
<a name="L116"><font color="white">00116</font>	var float LastPlaySound;
<a name="L117"><font color="white">00117</font>	var globalconfig int AnnouncerVolume;
<a name="L118"><font color="white">00118</font>	
<a name="L119"><font color="white">00119</font>	// Move buffering for network games.  Clients save their un-acknowledged moves in order to replay them
<a name="L120"><font color="white">00120</font>	// when they get position updates from the server.
<a name="L121"><font color="white">00121</font>	var SavedMove SavedMoves;  // buffered moves pending position updates
<a name="L122"><font color="white">00122</font>	var SavedMove FreeMoves;  // freed moves, available for buffering
<a name="L123"><font color="white">00123</font>	var SavedMove PendingMove;
<a name="L124"><font color="white">00124</font>	var float CurrentTimeStamp,LastUpdateTime,ServerTimeStamp,TimeMargin, ClientUpdateTime;
<a name="L125"><font color="white">00125</font>	var globalconfig float MaxTimeMargin;
<a name="L126"><font color="white">00126</font>	var Weapon OldClientWeapon;
<a name="L127"><font color="white">00127</font>	var int WeaponUpdate;
<a name="L128"><font color="white">00128</font>	
<a name="L129"><font color="white">00129</font>	// Progess Indicator - used by the engine to provide status messages (HUD is responsible for displaying these).
<a name="L130"><font color="white">00130</font>	var string ProgressMessage[4];
<a name="L131"><font color="white">00131</font>	var color ProgressColor[4];
<a name="L132"><font color="white">00132</font>	var float ProgressTimeOut;
<a name="L133"><font color="white">00133</font>	
<a name="L134"><font color="white">00134</font>	// Localized strings
<a name="L135"><font color="white">00135</font>	var localized string QuickSaveString;
<a name="L136"><font color="white">00136</font>	var localized string NoPauseMessage;
<a name="L137"><font color="white">00137</font>	var localized string ViewingFrom;
<a name="L138"><font color="white">00138</font>	var localized string OwnCamera;
<a name="L139"><font color="white">00139</font>	
<a name="L140"><font color="white">00140</font>	// ReplicationInfo
<a name="L141"><font color="white">00141</font>	var GameReplicationInfo GameReplicationInfo;
<a name="L142"><font color="white">00142</font>	
<a name="L143"><font color="white">00143</font>	// ngWorldStats Logging
<a name="L144"><font color="white">00144</font>	var globalconfig private string ngWorldSecret;
<a name="L145"><font color="white">00145</font>	var globalconfig bool ngSecretSet;
<a name="L146"><font color="white">00146</font>	var bool ReceivedSecretChecksum;
<a name="L147"><font color="white">00147</font>	var PlayerStats PlayerStat;   // Used to store everything that should be usefull for on-line ladder/rankings
<a name="L148"><font color="white">00148</font>	                              // Server side only (no replication).
<a name="L149"><font color="white">00149</font>	
<a name="L150"><font color="white">00150</font>	var class&lt;LocalMessage&gt; LocalMessageClass;
<a name="L151"><font color="white">00151</font>	
<a name="L152"><font color="white">00152</font>	var globalconfig float Bob;
<a name="L153"><font color="white">00153</font>	var float LandBob, AppliedBob;
<a name="L154"><font color="white">00154</font>	var float bobtime;
<a name="L155"><font color="white">00155</font>	var vector WalkBob;
<a name="L156"><font color="white">00156</font>	
<a name="L157"><font color="white">00157</font>	// view shaking (affects roll, and offsets camera position)
<a name="L158"><font color="white">00158</font>	var float MaxShakeRoll; // max magnitude to roll camera
<a name="L159"><font color="white">00159</font>	var vector MaxShakeOffset; // max magnitude to offset camera position
<a name="L160"><font color="white">00160</font>	var float ShakeRollRate;  // rate to change roll
<a name="L161"><font color="white">00161</font>	var vector ShakeOffsetRate;
<a name="L162"><font color="white">00162</font>	var vector ShakeOffset; //current magnitude to offset camera from shake
<a name="L163"><font color="white">00163</font>	var float ShakeRollTime; // how long to roll.  if value is &lt; 1.0, then MaxShakeOffset gets damped by this, else if &gt; 1 then its the number of times to repeat undamped
<a name="L164"><font color="white">00164</font>	var vector ShakeOffsetTime;
<a name="L165"><font color="white">00165</font>	/* iKi=&gt; */
<a name="L166"><font color="white">00166</font>	var vector MaxShakeFrame, ShakeFrame, ShakeFrameRate;
<a name="L167"><font color="white">00167</font>	var float ShakeFrameTime;
<a name="L168"><font color="white">00168</font>	/* &lt;=iKi */
<a name="L169"><font color="white">00169</font>	
<a name="L170"><font color="white">00170</font>	var Pawn TurnTarget;
<a name="L171"><font color="white">00171</font>	var config int EnemyTurnSpeed;
<a name="L172"><font color="white">00172</font>	var int GroundPitch;
<a name="L173"><font color="white">00173</font>	var rotator TurnRot180;
<a name="L174"><font color="white">00174</font>	
<a name="L175"><font color="white">00175</font>	var vector OldFloor;    // used by PlayerSpider mode - floor for which old rotation was based;
<a name="L176"><font color="white">00176</font>	
<a name="L177"><font color="white">00177</font>	// Components ( inner classes )
<a name="L178"><font color="white">00178</font>	var CheatManager  CheatManager;  // Object within playercontroller that manages &quot;cheat&quot; commands
<a name="L179"><font color="white">00179</font>	var class&lt;CheatManager&gt; CheatClass;    // class of my CheatManager
<a name="L180"><font color="white">00180</font>	var transient PlayerInput PlayerInput;  // Object within playercontroller that manages player input.
<a name="L181"><font color="white">00181</font>	var class&lt;PlayerInput&gt; InputClass;    // class of my PlayerInput
<a name="L182"><font color="white">00182</font>	
<a name="L183"><font color="white">00183</font>	// Demo recording view rotation
<a name="L184"><font color="white">00184</font>	var int DemoViewPitch;
<a name="L185"><font color="white">00185</font>	var int DemoViewYaw;
<a name="L186"><font color="white">00186</font>	
<a name="L187"><font color="white">00187</font>	// Use alpha filter.
<a name="L188"><font color="white">00188</font>	var byte UseVignetteFilter;
<a name="L189"><font color="white">00189</font>	// Use highlight filter.
<a name="L190"><font color="white">00190</font>	var byte UseVignetteHighlight;
<a name="L191"><font color="white">00191</font>	// Alpha filter color.
<a name="L192"><font color="white">00192</font>	var color VignetteColor;
<a name="L193"><font color="white">00193</font>	// Highlight intensity.
<a name="L194"><font color="white">00194</font>	var float VignetteHighLight;
<a name="L195"><font color="white">00195</font>	// Alpha filter texture.
<a name="L196"><font color="white">00196</font>	var material VignetteMaterial;
<a name="L197"><font color="white">00197</font>	
<a name="L198"><font color="white">00198</font>	var vector OldAdjustAim;          // Used to smooth autoaim, Aim to use when firing non-projectiles
<a name="L199"><font color="white">00199</font>	var vector ViewAdjustAim;         // Used to smooth Weapon rot on screen
<a name="L200"><font color="white">00200</font>	//var float LastOldAdjustAimUpdate; // to update it only once per frame (if called by interaction and weapon at the same frame don't update twice)
<a name="L201"><font color="white">00201</font>	var float fAdjustAimTrans;        // to handle crosshair/Adjust aim transition
<a name="L202"><font color="white">00202</font>	var vector MemAim;                // memorize aim when switching bLocked
<a name="L203"><font color="white">00203</font>	var vector AdjustedAimForFiring;  // Aim to use when firing Projectiles (because display don't show anticipation
<a name="L204"><font color="white">00204</font>	var actor BestTarget;             // to memorize the best target and use it in interaction
<a name="L205"><font color="white">00205</font>	var actor OldBestTarget;          // to memorize the best target and use it in interaction
<a name="L206"><font color="white">00206</font>	
<a name="L207"><font color="white">00207</font>	var float DeltaT;                 // to enable using it anywhere (needed for death camera sfxs  at least)
<a name="L208"><font color="white">00208</font>	
<a name="L209"><font color="white">00209</font>	replication
<a name="L210"><font color="white">00210</font>	{
<a name="L211"><font color="white">00211</font>		// Things the server should send to the client.
<a name="L212"><font color="white">00212</font>		reliable if( bNetDirty &amp;&amp; bNetOwner &amp;&amp; Role==ROLE_Authority )
<a name="L213"><font color="white">00213</font>			ViewTarget, GameReplicationInfo;
<a name="L214"><font color="white">00214</font>		unreliable if ( bNetOwner &amp;&amp; Role==ROLE_Authority &amp;&amp; (ViewTarget != Pawn) &amp;&amp; (Pawn(ViewTarget) != None) )
<a name="L215"><font color="white">00215</font>			TargetViewRotation, TargetEyeHeight, TargetWeaponViewOffset;
<a name="L216"><font color="white">00216</font>		reliable if( bDemoRecording &amp;&amp; Role==ROLE_Authority )
<a name="L217"><font color="white">00217</font>			DemoViewPitch, DemoViewYaw;
<a name="L218"><font color="white">00218</font>	
<a name="L219"><font color="white">00219</font>		// Functions server can call.
<a name="L220"><font color="white">00220</font>		reliable if( Role==ROLE_Authority )
<a name="L221"><font color="white">00221</font>			ClientSetHUD,ClientReliablePlaySound, FOV, StartZoom,
<a name="L222"><font color="white">00222</font>			ToggleZoom, StopZoom, EndZoom, ClientRestart,
<a name="L223"><font color="white">00223</font>			ClientReplicateSkins, ClientAdjustGlow,
<a name="L224"><font color="white">00224</font>			ClientSetBehindView, ClientSetFixedCamera, ClearProgressMessages,
<a name="L225"><font color="white">00225</font>			SetProgressMessage, SetProgressTime,
<a name="L226"><font color="white">00226</font>			GivePawn, ClientGotoState;
<a name="L227"><font color="white">00227</font>		reliable if ( (Role == ROLE_Authority) &amp;&amp; (!bDemoRecording || (bClientDemoRecording &amp;&amp; bClientDemoNetFunc)) )
<a name="L228"><font color="white">00228</font>			ClientMessage, TeamMessage, ReceiveLocalizedMessage;
<a name="L229"><font color="white">00229</font>		unreliable if( Role==ROLE_Authority &amp;&amp; !bDemoRecording )
<a name="L230"><font color="white">00230</font>			ClientPlaySound;
<a name="L231"><font color="white">00231</font>		reliable if( Role==ROLE_Authority &amp;&amp; !bDemoRecording )
<a name="L232"><font color="white">00232</font>			ClientTravel;
<a name="L233"><font color="white">00233</font>		unreliable if( Role==ROLE_Authority )
<a name="L234"><font color="white">00234</font>			SetFOVAngle, ClientShake, ClientFlash, ClientInstantFlash, ClientFilter, ClientHighLight,
<a name="L235"><font color="white">00235</font>			ClientAdjustPosition, ShortClientAdjustPosition, VeryShortClientAdjustPosition, LongClientAdjustPosition;
<a name="L236"><font color="white">00236</font>	
<a name="L237"><font color="white">00237</font>		// Functions client can call.
<a name="L238"><font color="white">00238</font>		unreliable if( Role&lt;ROLE_Authority )
<a name="L239"><font color="white">00239</font>			ShortServerMove, ServerMove, Say, TeamSay, ServerSetHandedness;
<a name="L240"><font color="white">00240</font>		reliable if( Role&lt;ROLE_Authority )
<a name="L241"><font color="white">00241</font>			Speech, Pause, SetPause,
<a name="L242"><font color="white">00242</font>			PrevItem, ActivateItem, ServerReStartGame, AskForPawn,
<a name="L243"><font color="white">00243</font>			ChangeName, ChangeTeam, Suicide,
<a name="L244"><font color="white">00244</font>			ThrowWeapon, BehindView, Typing;
<a name="L245"><font color="white">00245</font>	}
<a name="L246"><font color="white">00246</font>	
<a name="L247"><font color="white">00247</font>	// Pad management
<a name="L248"><font color="white">00248</font>	native(538) static final function int GetPadNumber();
<a name="L249"><font color="white">00249</font>	native(537) static final function AttribPadToViewport();
<a name="L250"><font color="white">00250</font>	
<a name="L251"><font color="white">00251</font>	// &quot;Compile&quot; the commands associated with each input key
<a name="L252"><font color="white">00252</font>	native(535) static final function OptimizeInputBindings();
<a name="L253"><font color="white">00253</font>	
<a name="L254"><font color="white">00254</font>	native(519) static final function string GetPlayerNetworkAddress();
<a name="L255"><font color="white">00255</font>	native static function string ConsoleCommand( string Command );
<a name="L256"><font color="white">00256</font>	native(515) static final function LevelInfo GetEntryLevel();
<a name="L257"><font color="white">00257</font>	native(544) static final function ResetKeyboard();
<a name="L258"><font color="white">00258</font>	native(513) static final function SetViewTarget(Actor NewViewTarget);
<a name="L259"><font color="white">00259</font>	native static function event ClientTravel( string URL, ETravelType TravelType, bool bItems );
<a name="L260"><font color="white">00260</font>	native(546) static final function UpdateURL(string NewOption, string NewValue, bool bSaveDefault);
<a name="L261"><font color="white">00261</font>	native(510) static final function string GetDefaultURL(string Option);
<a name="L262"><font color="white">00262</font>	// Execute a console command in the context of this player, then forward to Actor.ConsoleCommand.
<a name="L263"><font color="white">00263</font>	native(507) static final function CopyToClipboard( string Text );
<a name="L264"><font color="white">00264</font>	native(506) static final function string PasteFromClipboard();
<a name="L265"><font color="white">00265</font>	
<a name="L266"><font color="white">00266</font>	/* FindStairRotation()
<a name="L267"><font color="white">00267</font>	returns an integer to use as a pitch to orient player view along current ground (flat, up, or down)
<a name="L268"><font color="white">00268</font>	*/
<a name="L269"><font color="white">00269</font>	native(524) static final function int FindStairRotation(float DeltaTime);
<a name="L270"><font color="white">00270</font>	
<a name="L271"><font color="white">00271</font>	event PostBeginPlay()
<a name="L272"><font color="white">00272</font>	{
<a name="L273"><font color="white">00273</font>		Super.PostBeginPlay();
<a name="L274"><font color="white">00274</font>		SpawnDefaultHUD();
<a name="L275"><font color="white">00275</font>		if (Level.LevelEnterText != &quot;&quot; )
<a name="L276"><font color="white">00276</font>			ClientMessage(Level.LevelEnterText);
<a name="L277"><font color="white">00277</font>	
<a name="L278"><font color="white">00278</font>		DesiredFOV = DefaultFOV;
<a name="L279"><font color="white">00279</font>		SetViewTarget(self);  // MUST have a view target!
<a name="L280"><font color="white">00280</font>		if ( Level.NetMode == NM_Standalone )
<a name="L281"><font color="white">00281</font>			CheatManager = new CheatClass;
<a name="L282"><font color="white">00282</font>	}
<a name="L283"><font color="white">00283</font>	
<a name="L284"><font color="white">00284</font>	/* SpawnDefaultHUD()
<a name="L285"><font color="white">00285</font>	Spawn a HUD (make sure that PlayerController always has valid HUD, even if \
<a name="L286"><font color="white">00286</font>	ClientSetHUD() hasn't been called\
<a name="L287"><font color="white">00287</font>	*/
<a name="L288"><font color="white">00288</font>	function SpawnDefaultHUD()
<a name="L289"><font color="white">00289</font>	{
<a name="L290"><font color="white">00290</font>		myHUD = spawn(class'HUD',self);
<a name="L291"><font color="white">00291</font>	}
<a name="L292"><font color="white">00292</font>	
<a name="L293"><font color="white">00293</font>	/* Reset()
<a name="L294"><font color="white">00294</font>	reset actor to initial state - used when restarting level without reloading.
<a name="L295"><font color="white">00295</font>	*/
<a name="L296"><font color="white">00296</font>	function Reset()
<a name="L297"><font color="white">00297</font>	{
<a name="L298"><font color="white">00298</font>		PawnDied();
<a name="L299"><font color="white">00299</font>		Super.Reset();
<a name="L300"><font color="white">00300</font>		SetViewTarget(self);
<a name="L301"><font color="white">00301</font>		bBehindView = false;
<a name="L302"><font color="white">00302</font>		WaitDelay = Level.TimeSeconds + 2;
<a name="L303"><font color="white">00303</font>		GotoState('PlayerWaiting');
<a name="L304"><font color="white">00304</font>	}
<a name="L305"><font color="white">00305</font>	
<a name="L306"><font color="white">00306</font>	/* InitInputSystem()
<a name="L307"><font color="white">00307</font>	Spawn the appropriate class of PlayerInput
<a name="L308"><font color="white">00308</font>	Only called for playercontrollers that belong to local players
<a name="L309"><font color="white">00309</font>	*/
<a name="L310"><font color="white">00310</font>	event InitInputSystem()
<a name="L311"><font color="white">00311</font>	{
<a name="L312"><font color="white">00312</font>		PlayerInput = new InputClass;
<a name="L313"><font color="white">00313</font>	}
<a name="L314"><font color="white">00314</font>	
<a name="L315"><font color="white">00315</font>	/* ClientGotoState()
<a name="L316"><font color="white">00316</font>	server uses this to force client into NewState
<a name="L317"><font color="white">00317</font>	*/
<a name="L318"><font color="white">00318</font>	function ClientGotoState(name NewState, name NewLabel)
<a name="L319"><font color="white">00319</font>	{
<a name="L320"><font color="white">00320</font>		GotoState(NewState,NewLabel);
<a name="L321"><font color="white">00321</font>	}
<a name="L322"><font color="white">00322</font>	
<a name="L323"><font color="white">00323</font>	function AskForPawn()
<a name="L324"><font color="white">00324</font>	{
<a name="L325"><font color="white">00325</font>	  Log(self@&quot;AskForPawn&quot;@Pawn@&quot;InState&quot;@GetStateName());
<a name="L326"><font color="white">00326</font>		if ( Pawn != None )
<a name="L327"><font color="white">00327</font>			GivePawn(Pawn);
<a name="L328"><font color="white">00328</font>		else if ( IsInState('GameEnded') )
<a name="L329"><font color="white">00329</font>			ClientGotoState('GameEnded', 'Begin');
<a name="L330"><font color="white">00330</font>		else if ( IsInState('Dead') )
<a name="L331"><font color="white">00331</font>		{
<a name="L332"><font color="white">00332</font>			bFrozen = false;
<a name="L333"><font color="white">00333</font>			ServerRestartPlayer();
<a name="L334"><font color="white">00334</font>		}
<a name="L335"><font color="white">00335</font>	}
<a name="L336"><font color="white">00336</font>	
<a name="L337"><font color="white">00337</font>	function GivePawn(Pawn NewPawn)
<a name="L338"><font color="white">00338</font>	{
<a name="L339"><font color="white">00339</font>		if ( NewPawn == None )
<a name="L340"><font color="white">00340</font>			return;
<a name="L341"><font color="white">00341</font>		Pawn = NewPawn;
<a name="L342"><font color="white">00342</font>		NewPawn.Controller = self;
<a name="L343"><font color="white">00343</font>		ClientRestart();
<a name="L344"><font color="white">00344</font>	}
<a name="L345"><font color="white">00345</font>	
<a name="L346"><font color="white">00346</font>	/* GetFacingDirection()
<a name="L347"><font color="white">00347</font>	returns direction faced relative to movement dir
<a name="L348"><font color="white">00348</font>	0 = forward
<a name="L349"><font color="white">00349</font>	16384 = right
<a name="L350"><font color="white">00350</font>	32768 = back
<a name="L351"><font color="white">00351</font>	49152 = left
<a name="L352"><font color="white">00352</font>	*/
<a name="L353"><font color="white">00353</font>	function int GetFacingDirection()
<a name="L354"><font color="white">00354</font>	{
<a name="L355"><font color="white">00355</font>		local vector X,Y,Z, Dir;
<a name="L356"><font color="white">00356</font>	
<a name="L357"><font color="white">00357</font>		GetAxes(Pawn.Rotation, X,Y,Z);
<a name="L358"><font color="white">00358</font>		Dir = Normal(Pawn.Acceleration);
<a name="L359"><font color="white">00359</font>		if ( Y Dot Dir &gt; 0 )
<a name="L360"><font color="white">00360</font>			return ( 49152 + 16384 * (X Dot Dir) );
<a name="L361"><font color="white">00361</font>		else
<a name="L362"><font color="white">00362</font>			return ( 16384 - 16384 * (X Dot Dir) );
<a name="L363"><font color="white">00363</font>	}
<a name="L364"><font color="white">00364</font>	
<a name="L365"><font color="white">00365</font>	// Possess a pawn
<a name="L366"><font color="white">00366</font>	function Possess(Pawn aPawn)
<a name="L367"><font color="white">00367</font>	{
<a name="L368"><font color="white">00368</font>		if ( bOnlySpectator )
<a name="L369"><font color="white">00369</font>			return;
<a name="L370"><font color="white">00370</font>	
<a name="L371"><font color="white">00371</font>		SetRotation(aPawn.Rotation);
<a name="L372"><font color="white">00372</font>		aPawn.PossessedBy(self);
<a name="L373"><font color="white">00373</font>		Pawn = aPawn;
<a name="L374"><font color="white">00374</font>		Pawn.bStasis = false;
<a name="L375"><font color="white">00375</font>		PlayerReplicationInfo.bIsFemale = Pawn.bIsFemale;
<a name="L376"><font color="white">00376</font>		ServerSetHandedness(Handedness);
<a name="L377"><font color="white">00377</font>		Restart();
<a name="L378"><font color="white">00378</font>	}
<a name="L379"><font color="white">00379</font>	
<a name="L380"><font color="white">00380</font>	// unpossessed a pawn (not because pawn was killed)
<a name="L381"><font color="white">00381</font>	function UnPossess()
<a name="L382"><font color="white">00382</font>	{
<a name="L383"><font color="white">00383</font>		if ( Pawn != None )
<a name="L384"><font color="white">00384</font>		{
<a name="L385"><font color="white">00385</font>			SetLocation(Pawn.Location);
<a name="L386"><font color="white">00386</font>			Pawn.RemoteRole = ROLE_SimulatedProxy;
<a name="L387"><font color="white">00387</font>			Pawn.UnPossessed();
<a name="L388"><font color="white">00388</font>			if ( Viewtarget == Pawn )
<a name="L389"><font color="white">00389</font>				SetViewTarget(self);
<a name="L390"><font color="white">00390</font>		}
<a name="L391"><font color="white">00391</font>		Pawn = None;
<a name="L392"><font color="white">00392</font>		GotoState('Spectating');
<a name="L393"><font color="white">00393</font>	}
<a name="L394"><font color="white">00394</font>	
<a name="L395"><font color="white">00395</font>	// unpossessed a pawn (because pawn was killed)
<a name="L396"><font color="white">00396</font>	function PawnDied()
<a name="L397"><font color="white">00397</font>	{
<a name="L398"><font color="white">00398</font>		StopZoom();
<a name="L399"><font color="white">00399</font>		if ( Pawn != None )
<a name="L400"><font color="white">00400</font>			Pawn.RemoteRole = ROLE_SimulatedProxy;
<a name="L401"><font color="white">00401</font>		if ( ViewTarget == Pawn )
<a name="L402"><font color="white">00402</font>			bBehindView = true;
<a name="L403"><font color="white">00403</font>	
<a name="L404"><font color="white">00404</font>		Super.PawnDied();
<a name="L405"><font color="white">00405</font>	}
<a name="L406"><font color="white">00406</font>	
<a name="L407"><font color="white">00407</font>	// called when kicked 
<a name="L408"><font color="white">00408</font>	simulated event IAmKicked();
<a name="L409"><font color="white">00409</font>	
<a name="L410"><font color="white">00410</font>	
<a name="L411"><font color="white">00411</font>	function ClientSetHUD(class&lt;HUD&gt; newHUDType, class&lt;Scoreboard&gt; newScoringType)
<a name="L412"><font color="white">00412</font>	{
<a name="L413"><font color="white">00413</font>		local HUD NewHUD;
<a name="L414"><font color="white">00414</font>	
<a name="L415"><font color="white">00415</font>		if ( (myHUD == None) || ((newHUDType != None) &amp;&amp; (newHUDType != myHUD.Class)) )
<a name="L416"><font color="white">00416</font>		{
<a name="L417"><font color="white">00417</font>			NewHUD = spawn(newHUDType, self);
<a name="L418"><font color="white">00418</font>			if ( NewHUD != None )
<a name="L419"><font color="white">00419</font>			{
<a name="L420"><font color="white">00420</font>				if ( myHUD != None )
<a name="L421"><font color="white">00421</font>					myHUD.Destroy();
<a name="L422"><font color="white">00422</font>				myHUD = NewHUD;
<a name="L423"><font color="white">00423</font>			}
<a name="L424"><font color="white">00424</font>		}
<a name="L425"><font color="white">00425</font>		if ( (myHUD != None) &amp;&amp; (newScoringType != None) )
<a name="L426"><font color="white">00426</font>			MyHUD.SpawnScoreBoard(newScoringType);
<a name="L427"><font color="white">00427</font>	}
<a name="L428"><font color="white">00428</font>	
<a name="L429"><font color="white">00429</font>	function HandlePickup(Pickup pick)
<a name="L430"><font color="white">00430</font>	{
<a name="L431"><font color="white">00431</font>		ReceiveLocalizedMessage( pick.MessageClass, 0, None, None, pick.Class );
<a name="L432"><font color="white">00432</font>	}
<a name="L433"><font color="white">00433</font>	
<a name="L434"><font color="white">00434</font>	/*function ViewFlash(float DeltaTime)
<a name="L435"><font color="white">00435</font>	{
<a name="L436"><font color="white">00436</font>		local vector goalFog;
<a name="L437"><font color="white">00437</font>		local float goalscale, delta;
<a name="L438"><font color="white">00438</font>	
<a name="L439"><font color="white">00439</font>		delta = FMin(0.1, DeltaTime);
<a name="L440"><font color="white">00440</font>		goalScale = 1 + DesiredFlashScale + ConstantGlowScale;
<a name="L441"><font color="white">00441</font>		goalFog = DesiredFlashFog + ConstantGlowFog;
<a name="L442"><font color="white">00442</font>	
<a name="L443"><font color="white">00443</font>		if ( Pawn != None )
<a name="L444"><font color="white">00444</font>		{
<a name="L445"><font color="white">00445</font>			goalScale += Pawn.HeadVolume.ViewFlash.X;
<a name="L446"><font color="white">00446</font>			goalFog += Pawn.HeadVolume.ViewFog;
<a name="L447"><font color="white">00447</font>		}
<a name="L448"><font color="white">00448</font>	
<a name="L449"><font color="white">00449</font>		DesiredFlashScale -= DesiredFlashScale * 2 * delta;
<a name="L450"><font color="white">00450</font>		DesiredFlashFog -= DesiredFlashFog * 2 * delta;
<a name="L451"><font color="white">00451</font>		FlashScale.X += (goalScale - FlashScale.X + InstantFlash) * 10 * delta;
<a name="L452"><font color="white">00452</font>		FlashFog += (goalFog - FlashFog + InstantFog) * 10 * delta;
<a name="L453"><font color="white">00453</font>		InstantFlash = 0;
<a name="L454"><font color="white">00454</font>		InstantFog = vect(0,0,0);
<a name="L455"><font color="white">00455</font>	
<a name="L456"><font color="white">00456</font>		if ( FlashScale.X &gt; 0.981 )
<a name="L457"><font color="white">00457</font>			FlashScale.X = 1;
<a name="L458"><font color="white">00458</font>		FlashScale = FlashScale.X * vect(1,1,1);
<a name="L459"><font color="white">00459</font>	
<a name="L460"><font color="white">00460</font>		if ( FlashFog.X &lt; 0.019 )
<a name="L461"><font color="white">00461</font>			FlashFog.X = 0;
<a name="L462"><font color="white">00462</font>		if ( FlashFog.Y &lt; 0.019 )
<a name="L463"><font color="white">00463</font>			FlashFog.Y = 0;
<a name="L464"><font color="white">00464</font>		if ( FlashFog.Z &lt; 0.019 )
<a name="L465"><font color="white">00465</font>			FlashFog.Z = 0;
<a name="L466"><font color="white">00466</font>	}*/
<a name="L467"><font color="white">00467</font>	native(505) static final function ViewFlash(float DeltaTime);
<a name="L468"><font color="white">00468</font>	
<a name="L469"><font color="white">00469</font>	event ReceiveLocalizedMessage( class&lt;LocalMessage&gt; Message, optional int Switch, optional PlayerReplicationInfo RelatedPRI_1, optional PlayerReplicationInfo RelatedPRI_2, optional Object OptionalObject )
<a name="L470"><font color="white">00470</font>	{
<a name="L471"><font color="white">00471</font>		Message.Static.ClientReceive( Self, Switch, RelatedPRI_1, RelatedPRI_2, OptionalObject );
<a name="L472"><font color="white">00472</font>	}
<a name="L473"><font color="white">00473</font>	
<a name="L474"><font color="white">00474</font>	event ClientMessage( coerce string S, optional Name Type )
<a name="L475"><font color="white">00475</font>	{
<a name="L476"><font color="white">00476</font>		if (Type == '')
<a name="L477"><font color="white">00477</font>			Type = 'Event';
<a name="L478"><font color="white">00478</font>		TeamMessage(PlayerReplicationInfo, S, Type);
<a name="L479"><font color="white">00479</font>	}
<a name="L480"><font color="white">00480</font>	
<a name="L481"><font color="white">00481</font>	event TeamMessage( PlayerReplicationInfo PRI, coerce string S, name Type  )
<a name="L482"><font color="white">00482</font>	{
<a name="L483"><font color="white">00483</font>		local string ConsoleString;
<a name="L484"><font color="white">00484</font>	
<a name="L485"><font color="white">00485</font>		//log(&quot;Teammessage with PRI &quot;$PRI$&quot; hud &quot;$myHud$&quot; Player &quot;$Player$&quot; console &quot;$Player.console$&quot; string &quot;$S);
<a name="L486"><font color="white">00486</font>		ConsoleString = S;
<a name="L487"><font color="white">00487</font>		if ( (Type == 'Say') || (Type == 'TeamSay') )
<a name="L488"><font color="white">00488</font>			ConsoleString = PRI.PlayerName$&quot;: &quot;$ConsoleString;
<a name="L489"><font color="white">00489</font>	
<a name="L490"><font color="white">00490</font>		Player.Console.Message( ConsoleString, 6.0 );
<a name="L491"><font color="white">00491</font>		myHUD.Message( PRI, S, Type );
<a name="L492"><font color="white">00492</font>	}
<a name="L493"><font color="white">00493</font>	
<a name="L494"><font color="white">00494</font>	simulated function PlayBeepSound();
<a name="L495"><font color="white">00495</font>	
<a name="L496"><font color="white">00496</font>	//Play a sound client side (so only client will hear it
<a name="L497"><font color="white">00497</font>	simulated function ClientPlaySound(sound ASound, optional bool bVolumeControl )
<a name="L498"><font color="white">00498</font>	{
<a name="L499"><font color="white">00499</font>		local int i;
<a name="L500"><font color="white">00500</font>	
<a name="L501"><font color="white">00501</font>		if ( !bVolumeControl )
<a name="L502"><font color="white">00502</font>			ViewTarget.PlaySound(ASound);
<a name="L503"><font color="white">00503</font>		else
<a name="L504"><font color="white">00504</font>			for ( i=0; i&lt;AnnouncerVolume; i++ )
<a name="L505"><font color="white">00505</font>				ViewTarget.PlaySound(ASound);
<a name="L506"><font color="white">00506</font>	}
<a name="L507"><font color="white">00507</font>	
<a name="L508"><font color="white">00508</font>	simulated function ClientReliablePlaySound(sound ASound, optional bool bVolumeControl )
<a name="L509"><font color="white">00509</font>	{
<a name="L510"><font color="white">00510</font>		ClientPlaySound(ASound, bVolumeControl);
<a name="L511"><font color="white">00511</font>	}
<a name="L512"><font color="white">00512</font>	
<a name="L513"><font color="white">00513</font>	simulated event Destroyed()
<a name="L514"><font color="white">00514</font>	{
<a name="L515"><font color="white">00515</font>		local SavedMove Next;
<a name="L516"><font color="white">00516</font>	
<a name="L517"><font color="white">00517</font>		if ( Pawn != None )
<a name="L518"><font color="white">00518</font>		{
<a name="L519"><font color="white">00519</font>			Pawn.Health = 0;
<a name="L520"><font color="white">00520</font>			Pawn.Died( self, class'Suicided', Pawn.Location );
<a name="L521"><font color="white">00521</font>		}
<a name="L522"><font color="white">00522</font>		Super.Destroyed();
<a name="L523"><font color="white">00523</font>		myHud.Destroy();
<a name="L524"><font color="white">00524</font>	
<a name="L525"><font color="white">00525</font>		while ( FreeMoves != None )
<a name="L526"><font color="white">00526</font>		{
<a name="L527"><font color="white">00527</font>			Next = FreeMoves.NextMove;
<a name="L528"><font color="white">00528</font>			FreeMoves.Destroy();
<a name="L529"><font color="white">00529</font>			FreeMoves = Next;
<a name="L530"><font color="white">00530</font>		}
<a name="L531"><font color="white">00531</font>		while ( SavedMoves != None )
<a name="L532"><font color="white">00532</font>		{
<a name="L533"><font color="white">00533</font>			Next = SavedMoves.NextMove;
<a name="L534"><font color="white">00534</font>			SavedMoves.Destroy();
<a name="L535"><font color="white">00535</font>			SavedMoves = Next;
<a name="L536"><font color="white">00536</font>		}
<a name="L537"><font color="white">00537</font>	}
<a name="L538"><font color="white">00538</font>	
<a name="L539"><font color="white">00539</font>	// ------------------------------------------------------------------------
<a name="L540"><font color="white">00540</font>	// Zooming/FOV change functions
<a name="L541"><font color="white">00541</font>	
<a name="L542"><font color="white">00542</font>	function ToggleZoom()
<a name="L543"><font color="white">00543</font>	{
<a name="L544"><font color="white">00544</font>		if ( DefaultFOV != DesiredFOV )
<a name="L545"><font color="white">00545</font>			EndZoom();
<a name="L546"><font color="white">00546</font>		else
<a name="L547"><font color="white">00547</font>			StartZoom();
<a name="L548"><font color="white">00548</font>	}
<a name="L549"><font color="white">00549</font>	
<a name="L550"><font color="white">00550</font>	function StartZoom()
<a name="L551"><font color="white">00551</font>	{
<a name="L552"><font color="white">00552</font>		ZoomLevel = 0.0;
<a name="L553"><font color="white">00553</font>		bZooming = true;
<a name="L554"><font color="white">00554</font>	}
<a name="L555"><font color="white">00555</font>	
<a name="L556"><font color="white">00556</font>	function StopZoom()
<a name="L557"><font color="white">00557</font>	{
<a name="L558"><font color="white">00558</font>		bZooming = false;
<a name="L559"><font color="white">00559</font>	}
<a name="L560"><font color="white">00560</font>	
<a name="L561"><font color="white">00561</font>	function EndZoom()
<a name="L562"><font color="white">00562</font>	{
<a name="L563"><font color="white">00563</font>		bZooming = false;
<a name="L564"><font color="white">00564</font>		DesiredFOV = DefaultFOV;
<a name="L565"><font color="white">00565</font>	}
<a name="L566"><font color="white">00566</font>	
<a name="L567"><font color="white">00567</font>	function FixFOV()
<a name="L568"><font color="white">00568</font>	{
<a name="L569"><font color="white">00569</font>		FOVAngle = Default.DefaultFOV;
<a name="L570"><font color="white">00570</font>		DesiredFOV = Default.DefaultFOV;
<a name="L571"><font color="white">00571</font>		DefaultFOV = Default.DefaultFOV;
<a name="L572"><font color="white">00572</font>	}
<a name="L573"><font color="white">00573</font>	
<a name="L574"><font color="white">00574</font>	function SetFOV(float NewFOV)
<a name="L575"><font color="white">00575</font>	{
<a name="L576"><font color="white">00576</font>		DesiredFOV = NewFOV;
<a name="L577"><font color="white">00577</font>		FOVAngle = NewFOV;
<a name="L578"><font color="white">00578</font>	}
<a name="L579"><font color="white">00579</font>	
<a name="L580"><font color="white">00580</font>	function ResetFOV()
<a name="L581"><font color="white">00581</font>	{
<a name="L582"><font color="white">00582</font>		DesiredFOV = DefaultFOV;
<a name="L583"><font color="white">00583</font>		FOVAngle = DefaultFOV;
<a name="L584"><font color="white">00584</font>	}
<a name="L585"><font color="white">00585</font>	
<a name="L586"><font color="white">00586</font>	exec function FOV(float F)
<a name="L587"><font color="white">00587</font>	{
<a name="L588"><font color="white">00588</font>		if( (F &gt;= 80.0) || (Level.Netmode==NM_Standalone) )
<a name="L589"><font color="white">00589</font>		{
<a name="L590"><font color="white">00590</font>			DefaultFOV = FClamp(F, 1, 170);
<a name="L591"><font color="white">00591</font>			DesiredFOV = DefaultFOV;
<a name="L592"><font color="white">00592</font>			SaveConfig();
<a name="L593"><font color="white">00593</font>		}
<a name="L594"><font color="white">00594</font>	}
<a name="L595"><font color="white">00595</font>	
<a name="L596"><font color="white">00596</font>	exec function ForceReload()
<a name="L597"><font color="white">00597</font>	{
<a name="L598"><font color="white">00598</font>		if ( (Pawn != None) &amp;&amp; (Pawn.Weapon != None) )
<a name="L599"><font color="white">00599</font>			Pawn.Weapon.ForceReload();
<a name="L600"><font color="white">00600</font>	}
<a name="L601"><font color="white">00601</font>	
<a name="L602"><font color="white">00602</font>	// ------------------------------------------------------------------------
<a name="L603"><font color="white">00603</font>	// Messaging functions
<a name="L604"><font color="white">00604</font>	
<a name="L605"><font color="white">00605</font>	// Send a message to all players.
<a name="L606"><font color="white">00606</font>	exec function Say( string Msg )
<a name="L607"><font color="white">00607</font>	{
<a name="L608"><font color="white">00608</font>		Level.Game.Broadcast(self, Msg, 'Say');
<a name="L609"><font color="white">00609</font>	}
<a name="L610"><font color="white">00610</font>	
<a name="L611"><font color="white">00611</font>	exec function TeamSay( string Msg )
<a name="L612"><font color="white">00612</font>	{
<a name="L613"><font color="white">00613</font>		Level.Game.BroadcastTeam(self, Msg, 'Say');
<a name="L614"><font color="white">00614</font>	}
<a name="L615"><font color="white">00615</font>	// ------------------------------------------------------------------------
<a name="L616"><font color="white">00616</font>	
<a name="L617"><font color="white">00617</font>	function ServerSetHandedness( float hand)
<a name="L618"><font color="white">00618</font>	{
<a name="L619"><font color="white">00619</font>		Handedness = hand;
<a name="L620"><font color="white">00620</font>		if ( Pawn.Weapon != None )
<a name="L621"><font color="white">00621</font>			Pawn.Weapon.SetHand(Handedness);
<a name="L622"><font color="white">00622</font>	}
<a name="L623"><font color="white">00623</font>	
<a name="L624"><font color="white">00624</font>	function SetHand()
<a name="L625"><font color="white">00625</font>	{
<a name="L626"><font color="white">00626</font>		Pawn.Weapon.SetHand(Handedness);
<a name="L627"><font color="white">00627</font>		ServerSetHandedness(Handedness);
<a name="L628"><font color="white">00628</font>	}
<a name="L629"><font color="white">00629</font>	
<a name="L630"><font color="white">00630</font>	function ChangeSetHand( string S )
<a name="L631"><font color="white">00631</font>	{
<a name="L632"><font color="white">00632</font>		if ( S ~= &quot;Left&quot; )
<a name="L633"><font color="white">00633</font>			Handedness = -1;
<a name="L634"><font color="white">00634</font>		else if ( S~= &quot;Right&quot; )
<a name="L635"><font color="white">00635</font>			Handedness = 1;
<a name="L636"><font color="white">00636</font>		else if ( S ~= &quot;Center&quot; )
<a name="L637"><font color="white">00637</font>			Handedness = 0;
<a name="L638"><font color="white">00638</font>		else if ( S ~= &quot;Hidden&quot; )
<a name="L639"><font color="white">00639</font>			Handedness = 2;
<a name="L640"><font color="white">00640</font>		SetHand();
<a name="L641"><font color="white">00641</font>	}
<a name="L642"><font color="white">00642</font>	
<a name="L643"><font color="white">00643</font>	event PreClientTravel()
<a name="L644"><font color="white">00644</font>	{
<a name="L645"><font color="white">00645</font>	}
<a name="L646"><font color="white">00646</font>	
<a name="L647"><font color="white">00647</font>	function ClientSetFixedCamera(bool B)
<a name="L648"><font color="white">00648</font>	{
<a name="L649"><font color="white">00649</font>		bFixedCamera = B;
<a name="L650"><font color="white">00650</font>	}
<a name="L651"><font color="white">00651</font>	
<a name="L652"><font color="white">00652</font>	function ClientSetBehindView(bool B)
<a name="L653"><font color="white">00653</font>	{
<a name="L654"><font color="white">00654</font>		bBehindView = B;
<a name="L655"><font color="white">00655</font>	}
<a name="L656"><font color="white">00656</font>	
<a name="L657"><font color="white">00657</font>	function ClientReplicateSkins(Material Skin1, optional Material Skin2, optional Material Skin3, optional Material Skin4)
<a name="L658"><font color="white">00658</font>	{
<a name="L659"><font color="white">00659</font>		// do nothing (just loading other player skins onto client)
<a name="L660"><font color="white">00660</font>		log(&quot;Getting &quot;$Skin1$&quot;, &quot;$Skin2$&quot;, &quot;$Skin3$&quot;, &quot;$Skin4);
<a name="L661"><font color="white">00661</font>		return;
<a name="L662"><font color="white">00662</font>	}
<a name="L663"><font color="white">00663</font>	
<a name="L664"><font color="white">00664</font>	/*function CheckBob(float DeltaTime, float Speed2D, vector Y)
<a name="L665"><font color="white">00665</font>	{
<a name="L666"><font color="white">00666</font>		if ( Speed2D &lt; 10 )
<a name="L667"><font color="white">00667</font>			BobTime += 0.2 * DeltaTime;
<a name="L668"><font color="white">00668</font>		else
<a name="L669"><font color="white">00669</font>			BobTime += DeltaTime * (0.3 + 0.7 * Speed2D/Pawn.GroundSpeed);
<a name="L670"><font color="white">00670</font>		WalkBob = Y * 0.4 * Bob * Speed2D * sin(8 * BobTime);
<a name="L671"><font color="white">00671</font>		AppliedBob = AppliedBob * (1 - FMin(1, 16 * deltatime));
<a name="L672"><font color="white">00672</font>		if ( Speed2D &lt; 10 )
<a name="L673"><font color="white">00673</font>			WalkBob.Z = AppliedBob;
<a name="L674"><font color="white">00674</font>		else
<a name="L675"><font color="white">00675</font>			WalkBob.Z = AppliedBob + 0.3 * Bob * Speed2D * sin(16 * BobTime);
<a name="L676"><font color="white">00676</font>		if ( LandBob &gt; 0.01 )
<a name="L677"><font color="white">00677</font>		{
<a name="L678"><font color="white">00678</font>			AppliedBob += FMin(1, 16 * deltatime) * LandBob;
<a name="L679"><font color="white">00679</font>			LandBob *= (1 - 8*Deltatime);
<a name="L680"><font color="white">00680</font>		}
<a name="L681"><font color="white">00681</font>	}*/
<a name="L682"><font color="white">00682</font>	native(504) static final function CheckBob(float DeltaTime, float Speed2D, vector Y);
<a name="L683"><font color="white">00683</font>	
<a name="L684"><font color="white">00684</font>	
<a name="L685"><font color="white">00685</font>	/* --&gt; Become a 100% C++ virtual function
<a name="L686"><font color="white">00686</font>	function vector WeaponBob(float BobDamping)
<a name="L687"><font color="white">00687</font>	{
<a name="L688"><font color="white">00688</font>		Local Vector WBob;
<a name="L689"><font color="white">00689</font>	
<a name="L690"><font color="white">00690</font>		WBob = BobDamping * WalkBob;
<a name="L691"><font color="white">00691</font>		WBob.Z = (0.45 + 0.55 * BobDamping) * WalkBob.Z;
<a name="L692"><font color="white">00692</font>	
<a name="L693"><font color="white">00693</font>		return (WBob + 0.9 * ShakeOffset);
<a name="L694"><font color="white">00694</font>	}*/
<a name="L695"><font color="white">00695</font>	
<a name="L696"><font color="white">00696</font>	
<a name="L697"><font color="white">00697</font>	function ClientVoiceMessage(PlayerReplicationInfo Sender, PlayerReplicationInfo Recipient, name messagetype, byte messageID)
<a name="L698"><font color="white">00698</font>	{
<a name="L699"><font color="white">00699</font>		local VoicePack V;
<a name="L700"><font color="white">00700</font>	
<a name="L701"><font color="white">00701</font>		if ( (Sender == None) || (Sender.voicetype == None) || (Player.Console == None) )
<a name="L702"><font color="white">00702</font>			return;
<a name="L703"><font color="white">00703</font>	
<a name="L704"><font color="white">00704</font>		V = Spawn(Sender.voicetype, self);
<a name="L705"><font color="white">00705</font>		if ( V != None )
<a name="L706"><font color="white">00706</font>			V.ClientInitialize(Sender, Recipient, messagetype, messageID);
<a name="L707"><font color="white">00707</font>	}
<a name="L708"><font color="white">00708</font>	
<a name="L709"><font color="white">00709</font>	/* ForceDeathUpdate()
<a name="L710"><font color="white">00710</font>	Make sure ClientAdjustPosition immediately informs client of pawn's death
<a name="L711"><font color="white">00711</font>	*/
<a name="L712"><font color="white">00712</font>	function ForceDeathUpdate()
<a name="L713"><font color="white">00713</font>	{
<a name="L714"><font color="white">00714</font>		LastUpdateTime = Level.TimeSeconds - 10;
<a name="L715"><font color="white">00715</font>	}
<a name="L716"><font color="white">00716</font>	
<a name="L717"><font color="white">00717</font>	/* ShortServerMove()
<a name="L718"><font color="white">00718</font>	compressed version of server move for bandwidth saving
<a name="L719"><font color="white">00719</font>	*/
<a name="L720"><font color="white">00720</font>	function ShortServerMove
<a name="L721"><font color="white">00721</font>	(
<a name="L722"><font color="white">00722</font>		float TimeStamp,
<a name="L723"><font color="white">00723</font>		vector ClientLoc,
<a name="L724"><font color="white">00724</font>		bool NewbRun,
<a name="L725"><font color="white">00725</font>		bool NewbDuck,
<a name="L726"><font color="white">00726</font>		bool NewbJumpStatus,
<a name="L727"><font color="white">00727</font>		byte ClientRoll,
<a name="L728"><font color="white">00728</font>		int View
<a name="L729"><font color="white">00729</font>	)
<a name="L730"><font color="white">00730</font>	{
<a name="L731"><font color="white">00731</font>		ServerMove(TimeStamp,vect(0,0,0),ClientLoc,NewbRun,NewbDuck,NewbJumpStatus,DCLICK_None,ClientRoll,View);
<a name="L732"><font color="white">00732</font>	}
<a name="L733"><font color="white">00733</font>	
<a name="L734"><font color="white">00734</font>	/* ServerMove()
<a name="L735"><font color="white">00735</font>	- replicated function sent by client to server - contains client movement and firing info
<a name="L736"><font color="white">00736</font>	Passes acceleration in components so it doesn't get rounded.
<a name="L737"><font color="white">00737</font>	*/
<a name="L738"><font color="white">00738</font>	function ServerMove
<a name="L739"><font color="white">00739</font>	(
<a name="L740"><font color="white">00740</font>		float TimeStamp,
<a name="L741"><font color="white">00741</font>		vector InAccel,
<a name="L742"><font color="white">00742</font>		vector ClientLoc,
<a name="L743"><font color="white">00743</font>		bool NewbRun,
<a name="L744"><font color="white">00744</font>		bool NewbDuck,
<a name="L745"><font color="white">00745</font>		bool NewbJumpStatus,
<a name="L746"><font color="white">00746</font>		eDoubleClickDir DoubleClickMove,
<a name="L747"><font color="white">00747</font>		byte ClientRoll,
<a name="L748"><font color="white">00748</font>		int View,
<a name="L749"><font color="white">00749</font>		optional byte OldTimeDelta,
<a name="L750"><font color="white">00750</font>		optional int OldAccel
<a name="L751"><font color="white">00751</font>	)
<a name="L752"><font color="white">00752</font>	{
<a name="L753"><font color="white">00753</font>		local float DeltaTime, clientErr, OldTimeStamp;
<a name="L754"><font color="white">00754</font>		local rotator DeltaRot, Rot, ViewRot;
<a name="L755"><font color="white">00755</font>		local vector Accel, LocDiff, ClientVel, ClientFloor;
<a name="L756"><font color="white">00756</font>		local int maxPitch, ViewPitch, ViewYaw;
<a name="L757"><font color="white">00757</font>		local bool NewbPressedJump, OldbRun, OldbDuck;
<a name="L758"><font color="white">00758</font>		local eDoubleClickDir OldDoubleClickMove;
<a name="L759"><font color="white">00759</font>		local actor ClientBase;
<a name="L760"><font color="white">00760</font>		local ePhysics ClientPhysics;
<a name="L761"><font color="white">00761</font>	
<a name="L762"><font color="white">00762</font>		// If this move is outdated, discard it.
<a name="L763"><font color="white">00763</font>		if ( CurrentTimeStamp &gt;= TimeStamp )
<a name="L764"><font color="white">00764</font>			return;
<a name="L765"><font color="white">00765</font>	
<a name="L766"><font color="white">00766</font>		// if OldTimeDelta corresponds to a lost packet, process it first
<a name="L767"><font color="white">00767</font>		if (  OldTimeDelta != 0 )
<a name="L768"><font color="white">00768</font>		{
<a name="L769"><font color="white">00769</font>			OldTimeStamp = TimeStamp - float(OldTimeDelta)/500 - 0.001;
<a name="L770"><font color="white">00770</font>			if ( CurrentTimeStamp &lt; OldTimeStamp - 0.001 )
<a name="L771"><font color="white">00771</font>			{
<a name="L772"><font color="white">00772</font>				// split out components of lost move (approx)
<a name="L773"><font color="white">00773</font>				Accel.X = OldAccel &gt;&gt;&gt; 23;
<a name="L774"><font color="white">00774</font>				if ( Accel.X &gt; 127 )
<a name="L775"><font color="white">00775</font>					Accel.X = -1 * (Accel.X - 128);
<a name="L776"><font color="white">00776</font>				Accel.Y = (OldAccel &gt;&gt;&gt; 15) &amp; 255;
<a name="L777"><font color="white">00777</font>				if ( Accel.Y &gt; 127 )
<a name="L778"><font color="white">00778</font>					Accel.Y = -1 * (Accel.Y - 128);
<a name="L779"><font color="white">00779</font>				Accel.Z = (OldAccel &gt;&gt;&gt; 7) &amp; 255;
<a name="L780"><font color="white">00780</font>				if ( Accel.Z &gt; 127 )
<a name="L781"><font color="white">00781</font>					Accel.Z = -1 * (Accel.Z - 128);
<a name="L782"><font color="white">00782</font>				Accel *= 20;
<a name="L783"><font color="white">00783</font>	
<a name="L784"><font color="white">00784</font>				OldbRun = ( (OldAccel &amp; 64) != 0 );
<a name="L785"><font color="white">00785</font>				OldbDuck = ( (OldAccel &amp; 32) != 0 );
<a name="L786"><font color="white">00786</font>				NewbPressedJump = ( (OldAccel &amp; 16) != 0 );
<a name="L787"><font color="white">00787</font>				if ( NewbPressedJump )
<a name="L788"><font color="white">00788</font>					bJumpStatus = NewbJumpStatus;
<a name="L789"><font color="white">00789</font>	
<a name="L790"><font color="white">00790</font>				switch (OldAccel &amp; 7)
<a name="L791"><font color="white">00791</font>				{
<a name="L792"><font color="white">00792</font>					case 0:
<a name="L793"><font color="white">00793</font>						OldDoubleClickMove = DCLICK_None;
<a name="L794"><font color="white">00794</font>						break;
<a name="L795"><font color="white">00795</font>					case 1:
<a name="L796"><font color="white">00796</font>						OldDoubleClickMove = DCLICK_Left;
<a name="L797"><font color="white">00797</font>						break;
<a name="L798"><font color="white">00798</font>					case 2:
<a name="L799"><font color="white">00799</font>						OldDoubleClickMove = DCLICK_Right;
<a name="L800"><font color="white">00800</font>						break;
<a name="L801"><font color="white">00801</font>					case 3:
<a name="L802"><font color="white">00802</font>						OldDoubleClickMove = DCLICK_Forward;
<a name="L803"><font color="white">00803</font>						break;
<a name="L804"><font color="white">00804</font>					case 4:
<a name="L805"><font color="white">00805</font>						OldDoubleClickMove = DCLICK_Back;
<a name="L806"><font color="white">00806</font>						break;
<a name="L807"><font color="white">00807</font>				}
<a name="L808"><font color="white">00808</font>				//log(&quot;Recovered move from &quot;$OldTimeStamp$&quot; acceleration &quot;$Accel$&quot; from &quot;$OldAccel);
<a name="L809"><font color="white">00809</font>				MoveAutonomous(OldTimeStamp - CurrentTimeStamp, OldbRun, OldbDuck, NewbPressedJump, OldDoubleClickMove, Accel, rot(0,0,0));
<a name="L810"><font color="white">00810</font>				CurrentTimeStamp = OldTimeStamp;
<a name="L811"><font color="white">00811</font>			}
<a name="L812"><font color="white">00812</font>		}
<a name="L813"><font color="white">00813</font>	
<a name="L814"><font color="white">00814</font>		// View components
<a name="L815"><font color="white">00815</font>		ViewPitch = View/32768;
<a name="L816"><font color="white">00816</font>		ViewYaw = 2 * (View - 32768 * ViewPitch);
<a name="L817"><font color="white">00817</font>		ViewPitch *= 2;
<a name="L818"><font color="white">00818</font>		// Make acceleration.
<a name="L819"><font color="white">00819</font>		Accel = InAccel/10;
<a name="L820"><font color="white">00820</font>	
<a name="L821"><font color="white">00821</font>		NewbPressedJump = (bJumpStatus != NewbJumpStatus);
<a name="L822"><font color="white">00822</font>		bJumpStatus = NewbJumpStatus;
<a name="L823"><font color="white">00823</font>	
<a name="L824"><font color="white">00824</font>		// Save move parameters.
<a name="L825"><font color="white">00825</font>		DeltaTime = TimeStamp - CurrentTimeStamp;
<a name="L826"><font color="white">00826</font>		if ( ServerTimeStamp &gt; 0 )
<a name="L827"><font color="white">00827</font>		{
<a name="L828"><font color="white">00828</font>			// allow 1% error
<a name="L829"><font color="white">00829</font>			TimeMargin += DeltaTime - 1.01 * (Level.TimeSeconds - ServerTimeStamp);
<a name="L830"><font color="white">00830</font>			if ( TimeMargin &gt; MaxTimeMargin )
<a name="L831"><font color="white">00831</font>			{
<a name="L832"><font color="white">00832</font>				// player is too far ahead
<a name="L833"><font color="white">00833</font>				TimeMargin -= DeltaTime;
<a name="L834"><font color="white">00834</font>				if ( TimeMargin &lt; 0.5 )
<a name="L835"><font color="white">00835</font>					MaxTimeMargin = Default.MaxTimeMargin;
<a name="L836"><font color="white">00836</font>				else
<a name="L837"><font color="white">00837</font>					MaxTimeMargin = 0.5;
<a name="L838"><font color="white">00838</font>				DeltaTime = 0;
<a name="L839"><font color="white">00839</font>			}
<a name="L840"><font color="white">00840</font>		}
<a name="L841"><font color="white">00841</font>	
<a name="L842"><font color="white">00842</font>		CurrentTimeStamp = TimeStamp;
<a name="L843"><font color="white">00843</font>		ServerTimeStamp = Level.TimeSeconds;
<a name="L844"><font color="white">00844</font>		ViewRot.Pitch = ViewPitch;
<a name="L845"><font color="white">00845</font>		ViewRot.Yaw = ViewYaw;
<a name="L846"><font color="white">00846</font>		ViewRot.Roll = 0;
<a name="L847"><font color="white">00847</font>		SetRotation(ViewRot);
<a name="L848"><font color="white">00848</font>	
<a name="L849"><font color="white">00849</font>		if ( Pawn != None )
<a name="L850"><font color="white">00850</font>		{
<a name="L851"><font color="white">00851</font>			Rot.Roll = 256 * ClientRoll;
<a name="L852"><font color="white">00852</font>			Rot.Yaw = ViewYaw;
<a name="L853"><font color="white">00853</font>			if ( (Pawn.Physics == PHYS_Swimming) || (Pawn.Physics == PHYS_Flying) )
<a name="L854"><font color="white">00854</font>				maxPitch = 2;
<a name="L855"><font color="white">00855</font>			else
<a name="L856"><font color="white">00856</font>				maxPitch = 1;
<a name="L857"><font color="white">00857</font>			If ( (ViewPitch &gt; maxPitch * RotationRate.Pitch) &amp;&amp; (ViewPitch &lt; 65536 - maxPitch * RotationRate.Pitch) )
<a name="L858"><font color="white">00858</font>			{
<a name="L859"><font color="white">00859</font>				If (ViewPitch &lt; 32768)
<a name="L860"><font color="white">00860</font>					Rot.Pitch = maxPitch * RotationRate.Pitch;
<a name="L861"><font color="white">00861</font>				else
<a name="L862"><font color="white">00862</font>					Rot.Pitch = 65536 - maxPitch * RotationRate.Pitch;
<a name="L863"><font color="white">00863</font>			}
<a name="L864"><font color="white">00864</font>			else
<a name="L865"><font color="white">00865</font>				Rot.Pitch = ViewPitch;
<a name="L866"><font color="white">00866</font>			DeltaRot = (Rotation - Rot);
<a name="L867"><font color="white">00867</font>			Pawn.SetRotation(Rot);
<a name="L868"><font color="white">00868</font>	    if ( Pawn.ControllerPitch != Rotation.Pitch / 256 ) // test to avoid bNetDirtied by useless change
<a name="L869"><font color="white">00869</font>	  		Pawn.ControllerPitch = ViewPitch / 256;
<a name="L870"><font color="white">00870</font>	//		Log(&quot;Setting Pawn.controllerPitch=&quot;$Pawn.ControllerPitch);
<a name="L871"><font color="white">00871</font>		}
<a name="L872"><font color="white">00872</font>	
<a name="L873"><font color="white">00873</font>		// Perform actual movement.
<a name="L874"><font color="white">00874</font>		if ( (Level.Pauser == None) &amp;&amp; (DeltaTime &gt; 0) )
<a name="L875"><font color="white">00875</font>			MoveAutonomous(DeltaTime, NewbRun, NewbDuck, NewbPressedJump, DoubleClickMove, Accel, DeltaRot);
<a name="L876"><font color="white">00876</font>	
<a name="L877"><font color="white">00877</font>		// Accumulate movement error.
<a name="L878"><font color="white">00878</font>		if ( Level.TimeSeconds - LastUpdateTime &gt; 0.3 )
<a name="L879"><font color="white">00879</font>			ClientErr = 10000;
<a name="L880"><font color="white">00880</font>		else if ( Level.TimeSeconds - LastUpdateTime &gt; 180.0/Player.CurrentNetSpeed )
<a name="L881"><font color="white">00881</font>		{
<a name="L882"><font color="white">00882</font>			if ( Pawn == None )
<a name="L883"><font color="white">00883</font>				LocDiff = Location - ClientLoc;
<a name="L884"><font color="white">00884</font>			else
<a name="L885"><font color="white">00885</font>				LocDiff = Pawn.Location - ClientLoc;
<a name="L886"><font color="white">00886</font>			ClientErr = LocDiff Dot LocDiff;
<a name="L887"><font color="white">00887</font>		}
<a name="L888"><font color="white">00888</font>	
<a name="L889"><font color="white">00889</font>		// If client has accumulated a noticeable positional error, correct him.
<a name="L890"><font color="white">00890</font>		if ( ClientErr &gt; 3 )
<a name="L891"><font color="white">00891</font>		{
<a name="L892"><font color="white">00892</font>			if ( Pawn == None )
<a name="L893"><font color="white">00893</font>			{
<a name="L894"><font color="white">00894</font>				ClientPhysics = Physics;
<a name="L895"><font color="white">00895</font>				ClientLoc = Location;
<a name="L896"><font color="white">00896</font>				ClientVel = Velocity;
<a name="L897"><font color="white">00897</font>			}
<a name="L898"><font color="white">00898</font>			else
<a name="L899"><font color="white">00899</font>			{
<a name="L900"><font color="white">00900</font>				ClientPhysics = Pawn.Physics;
<a name="L901"><font color="white">00901</font>				ClientVel = Pawn.Velocity;
<a name="L902"><font color="white">00902</font>				ClientBase = Pawn.Base;
<a name="L903"><font color="white">00903</font>				if ( Mover(Pawn.Base) != None )
<a name="L904"><font color="white">00904</font>					ClientLoc = Pawn.Location - Pawn.Base.Location;
<a name="L905"><font color="white">00905</font>				else
<a name="L906"><font color="white">00906</font>					ClientLoc = Pawn.Location;
<a name="L907"><font color="white">00907</font>				ClientFloor = Pawn.Floor;
<a name="L908"><font color="white">00908</font>			}
<a name="L909"><font color="white">00909</font>			//log(&quot;Client Error at &quot;$TimeStamp$&quot; is &quot;$ClientErr$&quot; with acceleration &quot;$Accel$&quot; LocDiff &quot;$LocDiff$&quot; Physics &quot;$Pawn.Physics);
<a name="L910"><font color="white">00910</font>			LastUpdateTime = Level.TimeSeconds;
<a name="L911"><font color="white">00911</font>	
<a name="L912"><font color="white">00912</font>			if ( (Pawn == None) || (Pawn.Physics != PHYS_Spider) )
<a name="L913"><font color="white">00913</font>			{
<a name="L914"><font color="white">00914</font>				if ( ClientVel == vect(0,0,0) )
<a name="L915"><font color="white">00915</font>				{
<a name="L916"><font color="white">00916</font>					if ( IsInState('PlayerWalking') &amp;&amp; (Pawn != None) &amp;&amp; (Pawn.Physics == PHYS_Walking) )
<a name="L917"><font color="white">00917</font>					{
<a name="L918"><font color="white">00918</font>						VeryShortClientAdjustPosition
<a name="L919"><font color="white">00919</font>						(
<a name="L920"><font color="white">00920</font>							TimeStamp,
<a name="L921"><font color="white">00921</font>							ClientLoc.X,
<a name="L922"><font color="white">00922</font>							ClientLoc.Y,
<a name="L923"><font color="white">00923</font>							ClientLoc.Z,
<a name="L924"><font color="white">00924</font>							ClientBase
<a name="L925"><font color="white">00925</font>						);
<a name="L926"><font color="white">00926</font>					}
<a name="L927"><font color="white">00927</font>					else
<a name="L928"><font color="white">00928</font>						ShortClientAdjustPosition
<a name="L929"><font color="white">00929</font>						(
<a name="L930"><font color="white">00930</font>							TimeStamp,
<a name="L931"><font color="white">00931</font>							GetStateName(),
<a name="L932"><font color="white">00932</font>							ClientPhysics,
<a name="L933"><font color="white">00933</font>							ClientLoc.X,
<a name="L934"><font color="white">00934</font>							ClientLoc.Y,
<a name="L935"><font color="white">00935</font>							ClientLoc.Z,
<a name="L936"><font color="white">00936</font>							ClientBase
<a name="L937"><font color="white">00937</font>						);
<a name="L938"><font color="white">00938</font>				}
<a name="L939"><font color="white">00939</font>				else
<a name="L940"><font color="white">00940</font>					ClientAdjustPosition
<a name="L941"><font color="white">00941</font>					(
<a name="L942"><font color="white">00942</font>						TimeStamp,
<a name="L943"><font color="white">00943</font>						GetStateName(),
<a name="L944"><font color="white">00944</font>						ClientPhysics,
<a name="L945"><font color="white">00945</font>						ClientLoc.X,
<a name="L946"><font color="white">00946</font>						ClientLoc.Y,
<a name="L947"><font color="white">00947</font>						ClientLoc.Z,
<a name="L948"><font color="white">00948</font>						ClientVel.X,
<a name="L949"><font color="white">00949</font>						ClientVel.Y,
<a name="L950"><font color="white">00950</font>						ClientVel.Z,
<a name="L951"><font color="white">00951</font>						ClientBase
<a name="L952"><font color="white">00952</font>					);
<a name="L953"><font color="white">00953</font>			}
<a name="L954"><font color="white">00954</font>			else
<a name="L955"><font color="white">00955</font>				LongClientAdjustPosition
<a name="L956"><font color="white">00956</font>				(
<a name="L957"><font color="white">00957</font>					TimeStamp,
<a name="L958"><font color="white">00958</font>					GetStateName(),
<a name="L959"><font color="white">00959</font>					ClientPhysics,
<a name="L960"><font color="white">00960</font>					ClientLoc.X,
<a name="L961"><font color="white">00961</font>					ClientLoc.Y,
<a name="L962"><font color="white">00962</font>					ClientLoc.Z,
<a name="L963"><font color="white">00963</font>					ClientVel.X,
<a name="L964"><font color="white">00964</font>					ClientVel.Y,
<a name="L965"><font color="white">00965</font>					ClientVel.Z,
<a name="L966"><font color="white">00966</font>					ClientBase,
<a name="L967"><font color="white">00967</font>					ClientFloor.X,
<a name="L968"><font color="white">00968</font>					ClientFloor.Y,
<a name="L969"><font color="white">00969</font>					ClientFloor.Z
<a name="L970"><font color="white">00970</font>				);
<a name="L971"><font color="white">00971</font>		}
<a name="L972"><font color="white">00972</font>		//log(&quot;Server moved stamp &quot;$TimeStamp$&quot; location &quot;$Pawn.Location$&quot; Acceleration &quot;$Pawn.Acceleration$&quot; Velocity &quot;$Pawn.Velocity);
<a name="L973"><font color="white">00973</font>	
<a name="L974"><font color="white">00974</font>	    /*  To track down some multiplayer problems...
<a name="L975"><font color="white">00975</font>	    //debuglog(&quot;In ServerMove()&quot;);
<a name="L976"><font color="white">00976</font>	    //DumpContent(TimeStamp, 2);
<a name="L977"><font color="white">00977</font>	    DumpChosenContent(TimeStamp);
<a name="L978"><font color="white">00978</font>	    */
<a name="L979"><font color="white">00979</font>	}
<a name="L980"><font color="white">00980</font>	
<a name="L981"><font color="white">00981</font>	function ProcessMove ( float DeltaTime, vector newAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L982"><font color="white">00982</font>	{
<a name="L983"><font color="white">00983</font>		if ( Pawn != None )
<a name="L984"><font color="white">00984</font>			Pawn.Acceleration = newAccel;
<a name="L985"><font color="white">00985</font>	}
<a name="L986"><font color="white">00986</font>	
<a name="L987"><font color="white">00987</font>	final function MoveAutonomous
<a name="L988"><font color="white">00988</font>	(
<a name="L989"><font color="white">00989</font>		float DeltaTime,
<a name="L990"><font color="white">00990</font>		bool NewbRun,
<a name="L991"><font color="white">00991</font>		bool NewbDuck,
<a name="L992"><font color="white">00992</font>		bool NewbPressedJump,
<a name="L993"><font color="white">00993</font>		eDoubleClickDir DoubleClickMove,
<a name="L994"><font color="white">00994</font>		vector newAccel,
<a name="L995"><font color="white">00995</font>		rotator DeltaRot
<a name="L996"><font color="white">00996</font>	)
<a name="L997"><font color="white">00997</font>	{
<a name="L998"><font color="white">00998</font>		if ( NewbRun )
<a name="L999"><font color="white">00999</font>			bRun = 1;
<a name="L1000"><font color="white">01000</font>		else
<a name="L1001"><font color="white">01001</font>			bRun = 0;
<a name="L1002"><font color="white">01002</font>	
<a name="L1003"><font color="white">01003</font>		if ( NewbDuck )
<a name="L1004"><font color="white">01004</font>			bDuck = 1;
<a name="L1005"><font color="white">01005</font>		else
<a name="L1006"><font color="white">01006</font>			bDuck = 0;
<a name="L1007"><font color="white">01007</font>		bPressedJump = NewbPressedJump;
<a name="L1008"><font color="white">01008</font>	
<a name="L1009"><font color="white">01009</font>		HandleWalking();
<a name="L1010"><font color="white">01010</font>		ProcessMove(DeltaTime, newAccel, DoubleClickMove, DeltaRot);
<a name="L1011"><font color="white">01011</font>		if ( Pawn != None )
<a name="L1012"><font color="white">01012</font>			Pawn.AutonomousPhysics(DeltaTime);
<a name="L1013"><font color="white">01013</font>		else
<a name="L1014"><font color="white">01014</font>			AutonomousPhysics(DeltaTime);
<a name="L1015"><font color="white">01015</font>		//log(&quot;Role &quot;$Role$&quot; moveauto time &quot;$100 * DeltaTime$&quot; (&quot;$Level.TimeDilation$&quot;)&quot;);
<a name="L1016"><font color="white">01016</font>	}
<a name="L1017"><font color="white">01017</font>	
<a name="L1018"><font color="white">01018</font>	/* VeryShortClientAdjustPosition
<a name="L1019"><font color="white">01019</font>	bandwidth saving version, when velocity is zeroed, and pawn is walking
<a name="L1020"><font color="white">01020</font>	*/
<a name="L1021"><font color="white">01021</font>	function VeryShortClientAdjustPosition
<a name="L1022"><font color="white">01022</font>	(
<a name="L1023"><font color="white">01023</font>		float TimeStamp,
<a name="L1024"><font color="white">01024</font>		float NewLocX,
<a name="L1025"><font color="white">01025</font>		float NewLocY,
<a name="L1026"><font color="white">01026</font>		float NewLocZ,
<a name="L1027"><font color="white">01027</font>		Actor NewBase
<a name="L1028"><font color="white">01028</font>	)
<a name="L1029"><font color="white">01029</font>	{
<a name="L1030"><font color="white">01030</font>		local vector Floor;
<a name="L1031"><font color="white">01031</font>	
<a name="L1032"><font color="white">01032</font>		if ( Pawn != None )
<a name="L1033"><font color="white">01033</font>			Floor = Pawn.Floor;
<a name="L1034"><font color="white">01034</font>		LongClientAdjustPosition(TimeStamp,'PlayerWalking',PHYS_Walking,NewLocX,NewLocY,NewLocZ,0,0,0,NewBase,Floor.X,Floor.Y,Floor.Z);
<a name="L1035"><font color="white">01035</font>	}
<a name="L1036"><font color="white">01036</font>	
<a name="L1037"><font color="white">01037</font>	/* ShortClientAdjustPosition
<a name="L1038"><font color="white">01038</font>	bandwidth saving version, when velocity is zeroed
<a name="L1039"><font color="white">01039</font>	*/
<a name="L1040"><font color="white">01040</font>	function ShortClientAdjustPosition
<a name="L1041"><font color="white">01041</font>	(
<a name="L1042"><font color="white">01042</font>		float TimeStamp,
<a name="L1043"><font color="white">01043</font>		name newState,
<a name="L1044"><font color="white">01044</font>		EPhysics newPhysics,
<a name="L1045"><font color="white">01045</font>		float NewLocX,
<a name="L1046"><font color="white">01046</font>		float NewLocY,
<a name="L1047"><font color="white">01047</font>		float NewLocZ,
<a name="L1048"><font color="white">01048</font>		Actor NewBase
<a name="L1049"><font color="white">01049</font>	)
<a name="L1050"><font color="white">01050</font>	{
<a name="L1051"><font color="white">01051</font>		local vector Floor;
<a name="L1052"><font color="white">01052</font>	
<a name="L1053"><font color="white">01053</font>		if ( Pawn != None )
<a name="L1054"><font color="white">01054</font>			Floor = Pawn.Floor;
<a name="L1055"><font color="white">01055</font>		LongClientAdjustPosition(TimeStamp,newState,newPhysics,NewLocX,NewLocY,NewLocZ,0,0,0,NewBase,Floor.X,Floor.Y,Floor.Z);
<a name="L1056"><font color="white">01056</font>	}
<a name="L1057"><font color="white">01057</font>	
<a name="L1058"><font color="white">01058</font>	/* ClientAdjustPosition
<a name="L1059"><font color="white">01059</font>	- pass newloc and newvel in components so they don't get rounded
<a name="L1060"><font color="white">01060</font>	*/
<a name="L1061"><font color="white">01061</font>	function ClientAdjustPosition
<a name="L1062"><font color="white">01062</font>	(
<a name="L1063"><font color="white">01063</font>		float TimeStamp,
<a name="L1064"><font color="white">01064</font>		name newState,
<a name="L1065"><font color="white">01065</font>		EPhysics newPhysics,
<a name="L1066"><font color="white">01066</font>		float NewLocX,
<a name="L1067"><font color="white">01067</font>		float NewLocY,
<a name="L1068"><font color="white">01068</font>		float NewLocZ,
<a name="L1069"><font color="white">01069</font>		float NewVelX,
<a name="L1070"><font color="white">01070</font>		float NewVelY,
<a name="L1071"><font color="white">01071</font>		float NewVelZ,
<a name="L1072"><font color="white">01072</font>		Actor NewBase
<a name="L1073"><font color="white">01073</font>	)
<a name="L1074"><font color="white">01074</font>	{
<a name="L1075"><font color="white">01075</font>		local vector Floor;
<a name="L1076"><font color="white">01076</font>	
<a name="L1077"><font color="white">01077</font>		if ( Pawn != None )
<a name="L1078"><font color="white">01078</font>			Floor = Pawn.Floor;
<a name="L1079"><font color="white">01079</font>		LongClientAdjustPosition(TimeStamp,newState,newPhysics,NewLocX,NewLocY,NewLocZ,NewVelX,NewVelY,NewVelZ,NewBase,Floor.X,Floor.Y,Floor.Z);
<a name="L1080"><font color="white">01080</font>	}
<a name="L1081"><font color="white">01081</font>	
<a name="L1082"><font color="white">01082</font>	/* LongClientAdjustPosition
<a name="L1083"><font color="white">01083</font>	long version, when care about pawn's floor normal
<a name="L1084"><font color="white">01084</font>	*/
<a name="L1085"><font color="white">01085</font>	function LongClientAdjustPosition
<a name="L1086"><font color="white">01086</font>	(
<a name="L1087"><font color="white">01087</font>		float TimeStamp,
<a name="L1088"><font color="white">01088</font>		name newState,
<a name="L1089"><font color="white">01089</font>		EPhysics newPhysics,
<a name="L1090"><font color="white">01090</font>		float NewLocX,
<a name="L1091"><font color="white">01091</font>		float NewLocY,
<a name="L1092"><font color="white">01092</font>		float NewLocZ,
<a name="L1093"><font color="white">01093</font>		float NewVelX,
<a name="L1094"><font color="white">01094</font>		float NewVelY,
<a name="L1095"><font color="white">01095</font>		float NewVelZ,
<a name="L1096"><font color="white">01096</font>		Actor NewBase,
<a name="L1097"><font color="white">01097</font>		float NewFloorX,
<a name="L1098"><font color="white">01098</font>		float NewFloorY,
<a name="L1099"><font color="white">01099</font>		float NewFloorZ
<a name="L1100"><font color="white">01100</font>	)
<a name="L1101"><font color="white">01101</font>	{
<a name="L1102"><font color="white">01102</font>		local vector NewLocation, NewFloor;
<a name="L1103"><font color="white">01103</font>		local Actor MoveActor;
<a name="L1104"><font color="white">01104</font>	
<a name="L1105"><font color="white">01105</font>		if ( Pawn != None )
<a name="L1106"><font color="white">01106</font>		{
<a name="L1107"><font color="white">01107</font>			if ( Pawn.bTearOff )
<a name="L1108"><font color="white">01108</font>			{
<a name="L1109"><font color="white">01109</font>				Pawn = None;
<a name="L1110"><font color="white">01110</font>				GotoState('Dead');
<a name="L1111"><font color="white">01111</font>				return;
<a name="L1112"><font color="white">01112</font>			}
<a name="L1113"><font color="white">01113</font>			MoveActor = Pawn;
<a name="L1114"><font color="white">01114</font>		}
<a name="L1115"><font color="white">01115</font>		else
<a name="L1116"><font color="white">01116</font>			MoveActor = self;
<a name="L1117"><font color="white">01117</font>	
<a name="L1118"><font color="white">01118</font>		if ( CurrentTimeStamp &gt; TimeStamp )
<a name="L1119"><font color="white">01119</font>			return;
<a name="L1120"><font color="white">01120</font>		CurrentTimeStamp = TimeStamp;
<a name="L1121"><font color="white">01121</font>	
<a name="L1122"><font color="white">01122</font>		NewLocation.X = NewLocX;
<a name="L1123"><font color="white">01123</font>		NewLocation.Y = NewLocY;
<a name="L1124"><font color="white">01124</font>		NewLocation.Z = NewLocZ;
<a name="L1125"><font color="white">01125</font>		MoveActor.Velocity.X = NewVelX;
<a name="L1126"><font color="white">01126</font>		MoveActor.Velocity.Y = NewVelY;
<a name="L1127"><font color="white">01127</font>		MoveActor.Velocity.Z = NewVelZ;
<a name="L1128"><font color="white">01128</font>	
<a name="L1129"><font color="white">01129</font>		NewFloor.X = NewFloorX;
<a name="L1130"><font color="white">01130</font>		NewFloor.Y = NewFloorY;
<a name="L1131"><font color="white">01131</font>		NewFloor.Z = NewFloorZ;
<a name="L1132"><font color="white">01132</font>		MoveActor.SetBase(NewBase, NewFloor);
<a name="L1133"><font color="white">01133</font>		if ( Mover(NewBase) != None )
<a name="L1134"><font color="white">01134</font>			NewLocation += NewBase.Location;
<a name="L1135"><font color="white">01135</font>	
<a name="L1136"><font color="white">01136</font>		//log(&quot;Client &quot;$Role$&quot; adjust &quot;$self$&quot; stamp &quot;$TimeStamp$&quot; location &quot;$MoveActor.Location);
<a name="L1137"><font color="white">01137</font>		MoveActor.bCanTeleport = false;
<a name="L1138"><font color="white">01138</font>		MoveActor.SetLocation(NewLocation);
<a name="L1139"><font color="white">01139</font>		MoveActor.bCanTeleport = true;
<a name="L1140"><font color="white">01140</font>		MoveActor.SetPhysics(newPhysics);
<a name="L1141"><font color="white">01141</font>	
<a name="L1142"><font color="white">01142</font>		if( GetStateName() != newstate )
<a name="L1143"><font color="white">01143</font>			GotoState(newstate);
<a name="L1144"><font color="white">01144</font>	
<a name="L1145"><font color="white">01145</font>		bUpdatePosition = true;
<a name="L1146"><font color="white">01146</font>	
<a name="L1147"><font color="white">01147</font>	    /*  To track down some multiplayer problems...
<a name="L1148"><font color="white">01148</font>	    //debuglog(&quot;In LongClientAdjustPosition():&quot;);
<a name="L1149"><font color="white">01149</font>	    //DumpContent(TimeStamp, 2);
<a name="L1150"><font color="white">01150</font>	    DumpChosenContent(TimeStamp);
<a name="L1151"><font color="white">01151</font>	    */
<a name="L1152"><font color="white">01152</font>	}
<a name="L1153"><font color="white">01153</font>	
<a name="L1154"><font color="white">01154</font>	function ClientUpdatePosition()
<a name="L1155"><font color="white">01155</font>	{
<a name="L1156"><font color="white">01156</font>		local SavedMove CurrentMove;
<a name="L1157"><font color="white">01157</font>		local int realbRun, realbDuck;
<a name="L1158"><font color="white">01158</font>		local bool bRealJump;
<a name="L1159"><font color="white">01159</font>		local float TotalTime;
<a name="L1160"><font color="white">01160</font>	
<a name="L1161"><font color="white">01161</font>		bUpdatePosition = false;
<a name="L1162"><font color="white">01162</font>		realbRun= bRun;
<a name="L1163"><font color="white">01163</font>		realbDuck = bDuck;
<a name="L1164"><font color="white">01164</font>		bRealJump = bPressedJump;
<a name="L1165"><font color="white">01165</font>		CurrentMove = SavedMoves;
<a name="L1166"><font color="white">01166</font>		bUpdating = true;
<a name="L1167"><font color="white">01167</font>		while ( CurrentMove != None )
<a name="L1168"><font color="white">01168</font>		{
<a name="L1169"><font color="white">01169</font>			if ( CurrentMove.TimeStamp &lt;= CurrentTimeStamp )
<a name="L1170"><font color="white">01170</font>			{
<a name="L1171"><font color="white">01171</font>				SavedMoves = CurrentMove.NextMove;
<a name="L1172"><font color="white">01172</font>				CurrentMove.NextMove = FreeMoves;
<a name="L1173"><font color="white">01173</font>				FreeMoves = CurrentMove;
<a name="L1174"><font color="white">01174</font>				FreeMoves.Clear();
<a name="L1175"><font color="white">01175</font>				CurrentMove = SavedMoves;
<a name="L1176"><font color="white">01176</font>			}
<a name="L1177"><font color="white">01177</font>			else
<a name="L1178"><font color="white">01178</font>			{
<a name="L1179"><font color="white">01179</font>				if ( (TotalTime &gt; 0) &amp;&amp; (Pawn != None) )
<a name="L1180"><font color="white">01180</font>					AdjustRadius(CurrentMove.Delta * Pawn.GroundSpeed);
<a name="L1181"><font color="white">01181</font>				TotalTime += CurrentMove.Delta;
<a name="L1182"><font color="white">01182</font>				MoveAutonomous(CurrentMove.Delta, CurrentMove.bRun, CurrentMove.bDuck, CurrentMove.bPressedJump, CurrentMove.DoubleClickMove, CurrentMove.Acceleration, rot(0,0,0));
<a name="L1183"><font color="white">01183</font>				CurrentMove = CurrentMove.NextMove;
<a name="L1184"><font color="white">01184</font>			}
<a name="L1185"><font color="white">01185</font>		}
<a name="L1186"><font color="white">01186</font>		//log(&quot;Client updated position to &quot;$Pawn.Location);
<a name="L1187"><font color="white">01187</font>		bUpdating = false;
<a name="L1188"><font color="white">01188</font>		bDuck = realbDuck;
<a name="L1189"><font color="white">01189</font>		bRun = realbRun;
<a name="L1190"><font color="white">01190</font>		bPressedJump = bRealJump;
<a name="L1191"><font color="white">01191</font>	}
<a name="L1192"><font color="white">01192</font>	
<a name="L1193"><font color="white">01193</font>	function AdjustRadius(float MaxMove)
<a name="L1194"><font color="white">01194</font>	{
<a name="L1195"><font color="white">01195</font>		local Pawn P;
<a name="L1196"><font color="white">01196</font>		local vector Dir;
<a name="L1197"><font color="white">01197</font>	
<a name="L1198"><font color="white">01198</font>		// if other pawn moving away from player, push it away if its close
<a name="L1199"><font color="white">01199</font>		// since the client-side position is behind the server side position
<a name="L1200"><font color="white">01200</font>		ForEach DynamicActors(class'Pawn', P)
<a name="L1201"><font color="white">01201</font>			if ( (P != Pawn) &amp;&amp; (P.Velocity != vect(0,0,0)) &amp;&amp; P.bBlockPlayers )
<a name="L1202"><font color="white">01202</font>			{
<a name="L1203"><font color="white">01203</font>				Dir = Normal(P.Location - Pawn.Location);
<a name="L1204"><font color="white">01204</font>				if ( (Pawn.Velocity Dot Dir &gt; 0) &amp;&amp; (P.Velocity Dot Dir &gt; 0) )
<a name="L1205"><font color="white">01205</font>				{
<a name="L1206"><font color="white">01206</font>					if ( VSize(P.Location - Pawn.Location) &lt; P.CollisionRadius + Pawn.CollisionRadius + MaxMove )
<a name="L1207"><font color="white">01207</font>						P.MoveSmooth(P.Velocity * 0.5 * PlayerReplicationInfo.Ping);
<a name="L1208"><font color="white">01208</font>				}
<a name="L1209"><font color="white">01209</font>			}
<a name="L1210"><font color="white">01210</font>	}
<a name="L1211"><font color="white">01211</font>	
<a name="L1212"><font color="white">01212</font>	final function SavedMove GetFreeMove()
<a name="L1213"><font color="white">01213</font>	{
<a name="L1214"><font color="white">01214</font>		local SavedMove s, first;
<a name="L1215"><font color="white">01215</font>		local int i;
<a name="L1216"><font color="white">01216</font>	
<a name="L1217"><font color="white">01217</font>		if ( FreeMoves == None )
<a name="L1218"><font color="white">01218</font>		{
<a name="L1219"><font color="white">01219</font>			// don't allow more than 30 saved moves
<a name="L1220"><font color="white">01220</font>			For ( s=SavedMoves; s!=None; s=s.NextMove )
<a name="L1221"><font color="white">01221</font>			{
<a name="L1222"><font color="white">01222</font>				i++;
<a name="L1223"><font color="white">01223</font>				if ( i &gt; 30 )
<a name="L1224"><font color="white">01224</font>				{
<a name="L1225"><font color="white">01225</font>					first = SavedMoves;
<a name="L1226"><font color="white">01226</font>					SavedMoves = SavedMoves.NextMove;
<a name="L1227"><font color="white">01227</font>					first.Clear();
<a name="L1228"><font color="white">01228</font>					first.NextMove = None;
<a name="L1229"><font color="white">01229</font>					// clear out all the moves
<a name="L1230"><font color="white">01230</font>					While ( SavedMoves != None )
<a name="L1231"><font color="white">01231</font>					{
<a name="L1232"><font color="white">01232</font>						s = SavedMoves;
<a name="L1233"><font color="white">01233</font>						SavedMoves = SavedMoves.NextMove;
<a name="L1234"><font color="white">01234</font>						s.Clear();
<a name="L1235"><font color="white">01235</font>						s.NextMove = FreeMoves;
<a name="L1236"><font color="white">01236</font>						FreeMoves = s;
<a name="L1237"><font color="white">01237</font>					}
<a name="L1238"><font color="white">01238</font>					return first;
<a name="L1239"><font color="white">01239</font>				}
<a name="L1240"><font color="white">01240</font>			}
<a name="L1241"><font color="white">01241</font>			return Spawn(class'SavedMove');
<a name="L1242"><font color="white">01242</font>		}
<a name="L1243"><font color="white">01243</font>		else
<a name="L1244"><font color="white">01244</font>		{
<a name="L1245"><font color="white">01245</font>			s = FreeMoves;
<a name="L1246"><font color="white">01246</font>			FreeMoves = FreeMoves.NextMove;
<a name="L1247"><font color="white">01247</font>			s.NextMove = None;
<a name="L1248"><font color="white">01248</font>			return s;
<a name="L1249"><font color="white">01249</font>		}
<a name="L1250"><font color="white">01250</font>	}
<a name="L1251"><font color="white">01251</font>	
<a name="L1252"><font color="white">01252</font>	function int CompressAccel(int C)
<a name="L1253"><font color="white">01253</font>	{
<a name="L1254"><font color="white">01254</font>		if ( C &gt;= 0 )
<a name="L1255"><font color="white">01255</font>			C = Min(C, 127);
<a name="L1256"><font color="white">01256</font>		else
<a name="L1257"><font color="white">01257</font>			C = Min(abs(C), 127) + 128;
<a name="L1258"><font color="white">01258</font>		return C;
<a name="L1259"><font color="white">01259</font>	}
<a name="L1260"><font color="white">01260</font>	
<a name="L1261"><font color="white">01261</font>	/*
<a name="L1262"><font color="white">01262</font>	========================================================================
<a name="L1263"><font color="white">01263</font>	Here's how player movement prediction, replication and correction works in network games:
<a name="L1264"><font color="white">01264</font>	
<a name="L1265"><font color="white">01265</font>	Every tick, the PlayerTick() function is called.  It calls the PlayerMove() function (which is implemented
<a name="L1266"><font color="white">01266</font>	in various states).  PlayerMove() figures out the acceleration and rotation, and then calls ProcessMove()
<a name="L1267"><font color="white">01267</font>	(for single player or listen servers), or ReplicateMove() (if its a network client).
<a name="L1268"><font color="white">01268</font>	
<a name="L1269"><font color="white">01269</font>	ReplicateMove() saves the move (in the PendingMove list), calls ProcessMove(), and then replicates the move
<a name="L1270"><font color="white">01270</font>	to the server by calling the replicated function ServerMove() - passing the movement parameters, the client's
<a name="L1271"><font color="white">01271</font>	resultant position, and a timestamp.
<a name="L1272"><font color="white">01272</font>	
<a name="L1273"><font color="white">01273</font>	ServerMove() is executed on the server.  It decodes the movement parameters and causes the appropriate movement
<a name="L1274"><font color="white">01274</font>	to occur.  It then looks at the resulting position and if enough time has passed since the last response, or the
<a name="L1275"><font color="white">01275</font>	position error is significant enough, the server calls ClientAdjustPosition(), a replicated function.
<a name="L1276"><font color="white">01276</font>	
<a name="L1277"><font color="white">01277</font>	ClientAdjustPosition() is executed on the client.  The client sets its position to the servers version of position,
<a name="L1278"><font color="white">01278</font>	and sets the bUpdatePosition flag to true.
<a name="L1279"><font color="white">01279</font>	
<a name="L1280"><font color="white">01280</font>	When PlayerTick() is called on the client again, if bUpdatePosition is true, the client will call
<a name="L1281"><font color="white">01281</font>	ClientUpdatePosition() before calling PlayerMove().  ClientUpdatePosition() replays all the moves in the pending
<a name="L1282"><font color="white">01282</font>	move list which occured after the timestamp of the move the server was adjusting.
<a name="L1283"><font color="white">01283</font>	*/
<a name="L1284"><font color="white">01284</font>	
<a name="L1285"><font color="white">01285</font>	//
<a name="L1286"><font color="white">01286</font>	// Replicate this client's desired movement to the server.
<a name="L1287"><font color="white">01287</font>	//
<a name="L1288"><font color="white">01288</font>	function ReplicateMove
<a name="L1289"><font color="white">01289</font>	(
<a name="L1290"><font color="white">01290</font>		float DeltaTime,
<a name="L1291"><font color="white">01291</font>		vector NewAccel,
<a name="L1292"><font color="white">01292</font>		eDoubleClickDir DoubleClickMove,
<a name="L1293"><font color="white">01293</font>		rotator DeltaRot
<a name="L1294"><font color="white">01294</font>	)
<a name="L1295"><font color="white">01295</font>	{
<a name="L1296"><font color="white">01296</font>		local SavedMove NewMove, OldMove, LastMove;
<a name="L1297"><font color="white">01297</font>		local byte ClientRoll;
<a name="L1298"><font color="white">01298</font>		local float OldTimeDelta, NetMoveDelta;
<a name="L1299"><font color="white">01299</font>		local int i, OldAccel;
<a name="L1300"><font color="white">01300</font>		local vector BuildAccel, AccelNorm, MoveLoc;
<a name="L1301"><font color="white">01301</font>	
<a name="L1302"><font color="white">01302</font>		// Get a SavedMove actor to store the movement in.
<a name="L1303"><font color="white">01303</font>		if ( PendingMove != None )
<a name="L1304"><font color="white">01304</font>			PendingMove.SetMoveFor(self, DeltaTime, NewAccel, DoubleClickMove);
<a name="L1305"><font color="white">01305</font>	
<a name="L1306"><font color="white">01306</font>		if ( SavedMoves != None )
<a name="L1307"><font color="white">01307</font>		{
<a name="L1308"><font color="white">01308</font>			NewMove = SavedMoves;
<a name="L1309"><font color="white">01309</font>			AccelNorm = Normal(NewAccel);
<a name="L1310"><font color="white">01310</font>			while ( NewMove.NextMove != None )
<a name="L1311"><font color="white">01311</font>			{
<a name="L1312"><font color="white">01312</font>				// find most recent interesting move to send redundantly
<a name="L1313"><font color="white">01313</font>				if ( NewMove.bPressedJump || ((NewMove.DoubleClickMove != DCLICK_NONE) &amp;&amp; (NewMove.DoubleClickMove &lt; 5))
<a name="L1314"><font color="white">01314</font>					|| ((NewMove.Acceleration != NewAccel) &amp;&amp; ((normal(NewMove.Acceleration) Dot AccelNorm) &lt; 0.95)) )
<a name="L1315"><font color="white">01315</font>					OldMove = NewMove;
<a name="L1316"><font color="white">01316</font>				NewMove = NewMove.NextMove;
<a name="L1317"><font color="white">01317</font>			}
<a name="L1318"><font color="white">01318</font>			if ( NewMove.bPressedJump || ((NewMove.DoubleClickMove != DCLICK_NONE) &amp;&amp; (NewMove.DoubleClickMove &lt; 5))
<a name="L1319"><font color="white">01319</font>				|| ((NewMove.Acceleration != NewAccel) &amp;&amp; ((normal(NewMove.Acceleration) Dot AccelNorm) &lt; 0.95)) )
<a name="L1320"><font color="white">01320</font>				OldMove = NewMove;
<a name="L1321"><font color="white">01321</font>		}
<a name="L1322"><font color="white">01322</font>	
<a name="L1323"><font color="white">01323</font>		LastMove = NewMove;
<a name="L1324"><font color="white">01324</font>		NewMove = GetFreeMove();
<a name="L1325"><font color="white">01325</font>		if ( NewMove == None )
<a name="L1326"><font color="white">01326</font>			return;
<a name="L1327"><font color="white">01327</font>		NewMove.SetMoveFor(self, DeltaTime, NewAccel, DoubleClickMove);
<a name="L1328"><font color="white">01328</font>	
<a name="L1329"><font color="white">01329</font>		// adjust radius of nearby players with uncertain location
<a name="L1330"><font color="white">01330</font>		if ( Pawn != None )
<a name="L1331"><font color="white">01331</font>			AdjustRadius(NewMove.Delta * Pawn.GroundSpeed);
<a name="L1332"><font color="white">01332</font>	
<a name="L1333"><font color="white">01333</font>		// Simulate the movement locally.
<a name="L1334"><font color="white">01334</font>		ProcessMove(NewMove.Delta, NewMove.Acceleration, NewMove.DoubleClickMove, DeltaRot);
<a name="L1335"><font color="white">01335</font>		if ( Pawn != None )
<a name="L1336"><font color="white">01336</font>			Pawn.AutonomousPhysics(NewMove.Delta);
<a name="L1337"><font color="white">01337</font>		else
<a name="L1338"><font color="white">01338</font>			AutonomousPhysics(DeltaTime);
<a name="L1339"><font color="white">01339</font>	
<a name="L1340"><font color="white">01340</font>		//log(&quot;Role &quot;$Role$&quot; repmove at &quot;$Level.TimeSeconds$&quot; Move time &quot;$100 * DeltaTime$&quot; (&quot;$Level.TimeDilation$&quot;)&quot;);
<a name="L1341"><font color="white">01341</font>	
<a name="L1342"><font color="white">01342</font>		// Decide whether to hold off on move
<a name="L1343"><font color="white">01343</font>		// send if double click move, jump, or fire unless really too soon, or if newmove.delta big enough
<a name="L1344"><font color="white">01344</font>		// on client side, save extra buffered time in LastUpdateTime
<a name="L1345"><font color="white">01345</font>		if ( PendingMove == None )
<a name="L1346"><font color="white">01346</font>			PendingMove = NewMove;
<a name="L1347"><font color="white">01347</font>		else
<a name="L1348"><font color="white">01348</font>		{
<a name="L1349"><font color="white">01349</font>			NewMove.NextMove = FreeMoves;
<a name="L1350"><font color="white">01350</font>			FreeMoves = NewMove;
<a name="L1351"><font color="white">01351</font>			FreeMoves.Clear();
<a name="L1352"><font color="white">01352</font>			NewMove = PendingMove;
<a name="L1353"><font color="white">01353</font>		}
<a name="L1354"><font color="white">01354</font>		NetMoveDelta = FMax(64.0/Player.CurrentNetSpeed, 0.011);
<a name="L1355"><font color="white">01355</font>	
<a name="L1356"><font color="white">01356</font>		if ( !PendingMove.bPressedJump &amp;&amp; (PendingMove.Delta &lt; NetMoveDelta - ClientUpdateTime) )
<a name="L1357"><font color="white">01357</font>		{
<a name="L1358"><font color="white">01358</font>			// save as pending move
<a name="L1359"><font color="white">01359</font>			return;
<a name="L1360"><font color="white">01360</font>		}
<a name="L1361"><font color="white">01361</font>		else if ( (ClientUpdateTime &lt; 0) &amp;&amp; (PendingMove.Delta &lt; NetMoveDelta - ClientUpdateTime) )
<a name="L1362"><font color="white">01362</font>			return;
<a name="L1363"><font color="white">01363</font>		else
<a name="L1364"><font color="white">01364</font>		{
<a name="L1365"><font color="white">01365</font>			ClientUpdateTime = PendingMove.Delta - NetMoveDelta;
<a name="L1366"><font color="white">01366</font>			if ( SavedMoves == None )
<a name="L1367"><font color="white">01367</font>				SavedMoves = PendingMove;
<a name="L1368"><font color="white">01368</font>			else
<a name="L1369"><font color="white">01369</font>				LastMove.NextMove = PendingMove;
<a name="L1370"><font color="white">01370</font>			PendingMove = None;
<a name="L1371"><font color="white">01371</font>		}
<a name="L1372"><font color="white">01372</font>	
<a name="L1373"><font color="white">01373</font>		// check if need to redundantly send previous move
<a name="L1374"><font color="white">01374</font>		if ( OldMove != None )
<a name="L1375"><font color="white">01375</font>		{
<a name="L1376"><font color="white">01376</font>			// log(&quot;Redundant send timestamp &quot;$OldMove.TimeStamp$&quot; accel &quot;$OldMove.Acceleration$&quot; at &quot;$Level.Timeseconds$&quot; New accel &quot;$NewAccel);
<a name="L1377"><font color="white">01377</font>			// old move important to replicate redundantly
<a name="L1378"><font color="white">01378</font>			OldTimeDelta = FMin(255, (Level.TimeSeconds - OldMove.TimeStamp) * 500);
<a name="L1379"><font color="white">01379</font>			BuildAccel = 0.05 * OldMove.Acceleration + vect(0.5, 0.5, 0.5);
<a name="L1380"><font color="white">01380</font>			OldAccel = (CompressAccel(BuildAccel.X) &lt;&lt; 23)
<a name="L1381"><font color="white">01381</font>						+ (CompressAccel(BuildAccel.Y) &lt;&lt; 15)
<a name="L1382"><font color="white">01382</font>						+ (CompressAccel(BuildAccel.Z) &lt;&lt; 7);
<a name="L1383"><font color="white">01383</font>			if ( OldMove.bRun )
<a name="L1384"><font color="white">01384</font>				OldAccel += 64;
<a name="L1385"><font color="white">01385</font>			if ( OldMove.bDuck )
<a name="L1386"><font color="white">01386</font>				OldAccel += 32;
<a name="L1387"><font color="white">01387</font>			if ( OldMove.bPressedJump )
<a name="L1388"><font color="white">01388</font>				OldAccel += 16;
<a name="L1389"><font color="white">01389</font>			OldAccel += OldMove.DoubleClickMove;
<a name="L1390"><font color="white">01390</font>		}
<a name="L1391"><font color="white">01391</font>		//else
<a name="L1392"><font color="white">01392</font>		//	log(&quot;No redundant timestamp at &quot;$Level.TimeSeconds$&quot; with accel &quot;$NewAccel);
<a name="L1393"><font color="white">01393</font>		//log(&quot;Replicate move at &quot;$NewMove.TimeStamp$&quot; location &quot;$Pawn.Location);
<a name="L1394"><font color="white">01394</font>		// Send to the server
<a name="L1395"><font color="white">01395</font>		ClientRoll = (Rotation.Roll &gt;&gt; 8) &amp; 255;
<a name="L1396"><font color="white">01396</font>		if ( NewMove.bPressedJump )
<a name="L1397"><font color="white">01397</font>			bJumpStatus = !bJumpStatus;
<a name="L1398"><font color="white">01398</font>	
<a name="L1399"><font color="white">01399</font>		if ( Pawn == None )
<a name="L1400"><font color="white">01400</font>			MoveLoc = Location;
<a name="L1401"><font color="white">01401</font>		else
<a name="L1402"><font color="white">01402</font>			MoveLoc = Pawn.Location;
<a name="L1403"><font color="white">01403</font>	
<a name="L1404"><font color="white">01404</font>		if ( (NewMove.Acceleration == vect(0,0,0)) &amp;&amp; (NewMove.DoubleClickMove == DCLICK_None) )
<a name="L1405"><font color="white">01405</font>			ShortServerMove
<a name="L1406"><font color="white">01406</font>			(
<a name="L1407"><font color="white">01407</font>				NewMove.TimeStamp,
<a name="L1408"><font color="white">01408</font>				MoveLoc,
<a name="L1409"><font color="white">01409</font>				NewMove.bRun,
<a name="L1410"><font color="white">01410</font>				NewMove.bDuck,
<a name="L1411"><font color="white">01411</font>				bJumpStatus,
<a name="L1412"><font color="white">01412</font>				ClientRoll,
<a name="L1413"><font color="white">01413</font>				(32767 &amp; (Rotation.Pitch/2)) * 32768 + (32767 &amp; (Rotation.Yaw/2))
<a name="L1414"><font color="white">01414</font>			);
<a name="L1415"><font color="white">01415</font>		else
<a name="L1416"><font color="white">01416</font>			ServerMove
<a name="L1417"><font color="white">01417</font>			(
<a name="L1418"><font color="white">01418</font>				NewMove.TimeStamp,
<a name="L1419"><font color="white">01419</font>				NewMove.Acceleration * 10,
<a name="L1420"><font color="white">01420</font>				MoveLoc,
<a name="L1421"><font color="white">01421</font>				NewMove.bRun,
<a name="L1422"><font color="white">01422</font>				NewMove.bDuck,
<a name="L1423"><font color="white">01423</font>				bJumpStatus,
<a name="L1424"><font color="white">01424</font>				NewMove.DoubleClickMove,
<a name="L1425"><font color="white">01425</font>				ClientRoll,
<a name="L1426"><font color="white">01426</font>				(32767 &amp; (Rotation.Pitch/2)) * 32768 + (32767 &amp; (Rotation.Yaw/2)),
<a name="L1427"><font color="white">01427</font>				OldTimeDelta,
<a name="L1428"><font color="white">01428</font>				OldAccel
<a name="L1429"><font color="white">01429</font>			);
<a name="L1430"><font color="white">01430</font>	}
<a name="L1431"><font color="white">01431</font>	
<a name="L1432"><font color="white">01432</font>	/*function HandleWalking()
<a name="L1433"><font color="white">01433</font>	{
<a name="L1434"><font color="white">01434</font>		if ( Pawn != None )
<a name="L1435"><font color="white">01435</font>			Pawn.SetWalking(((bRun != 0) || (bDuck != 0)) &amp;&amp; !Region.Zone.IsA('WarpZoneInfo'));
<a name="L1436"><font color="white">01436</font>	}*/
<a name="L1437"><font color="white">01437</font>	native(499) static final function HandleWalking();
<a name="L1438"><font color="white">01438</font>	
<a name="L1439"><font color="white">01439</font>	function ServerRestartGame()
<a name="L1440"><font color="white">01440</font>	{
<a name="L1441"><font color="white">01441</font>	}
<a name="L1442"><font color="white">01442</font>	
<a name="L1443"><font color="white">01443</font>	function SetFOVAngle(float newFOV)
<a name="L1444"><font color="white">01444</font>	{
<a name="L1445"><font color="white">01445</font>		FOVAngle = newFOV;
<a name="L1446"><font color="white">01446</font>	}
<a name="L1447"><font color="white">01447</font>	
<a name="L1448"><font color="white">01448</font>	function ClientFlash( float scale, vector fog )
<a name="L1449"><font color="white">01449</font>	{
<a name="L1450"><font color="white">01450</font>		DesiredFlashScale = scale;
<a name="L1451"><font color="white">01451</font>		DesiredFlashFog = 0.001 * fog;
<a name="L1452"><font color="white">01452</font>	}
<a name="L1453"><font color="white">01453</font>	
<a name="L1454"><font color="white">01454</font>	function ClientInstantFlash( float scale, vector fog )
<a name="L1455"><font color="white">01455</font>	{
<a name="L1456"><font color="white">01456</font>		InstantFlash = scale;
<a name="L1457"><font color="white">01457</font>		InstantFog = 0.001 * fog;
<a name="L1458"><font color="white">01458</font>	}
<a name="L1459"><font color="white">01459</font>	
<a name="L1460"><font color="white">01460</font>	function ClientAdjustGlow( float scale, vector fog )
<a name="L1461"><font color="white">01461</font>	{
<a name="L1462"><font color="white">01462</font>		ConstantGlowScale = scale;
<a name="L1463"><font color="white">01463</font>		ConstantGlowFog = 0.001 * fog;
<a name="L1464"><font color="white">01464</font>	}
<a name="L1465"><font color="white">01465</font>	
<a name="L1466"><font color="white">01466</font>	function ClientFilter( Color FC, color FCW, float FCS )
<a name="L1467"><font color="white">01467</font>	{
<a name="L1468"><font color="white">01468</font>		FilterColor = FC;
<a name="L1469"><font color="white">01469</font>		FilterColorWanted = FCW;
<a name="L1470"><font color="white">01470</font>		FilterColorSpeed = FCS;
<a name="L1471"><font color="white">01471</font>	}
<a name="L1472"><font color="white">01472</font>	
<a name="L1473"><font color="white">01473</font>	function ClientHighLight( color TargetColor, float TargetHighLight, optional Material Mat )
<a name="L1474"><font color="white">01474</font>	{
<a name="L1475"><font color="white">01475</font>	/*
<a name="L1476"><font color="white">01476</font>	var byte UseVignetteFilter;
<a name="L1477"><font color="white">01477</font>	var byte UseVignetteHighlight;
<a name="L1478"><font color="white">01478</font>	var color VignetteColor;
<a name="L1479"><font color="white">01479</font>	var float VignetteHighLight;
<a name="L1480"><font color="white">01480</font>	var material VignetteMaterial;
<a name="L1481"><font color="white">01481</font>	*/
<a name="L1482"><font color="white">01482</font>	    if (TargetHighLight != 0)
<a name="L1483"><font color="white">01483</font>	    {
<a name="L1484"><font color="white">01484</font>	      UseVignetteFilter = 1;
<a name="L1485"><font color="white">01485</font>	      UseVignetteHighlight = 1;
<a name="L1486"><font color="white">01486</font>	      VignetteColor = TargetColor;
<a name="L1487"><font color="white">01487</font>	      VignetteHighLight = TargetHighLight;
<a name="L1488"><font color="white">01488</font>	      VignetteMaterial = Mat;
<a name="L1489"><font color="white">01489</font>	    }
<a name="L1490"><font color="white">01490</font>	    else
<a name="L1491"><font color="white">01491</font>	    {
<a name="L1492"><font color="white">01492</font>	      UseVignetteFilter = 0;
<a name="L1493"><font color="white">01493</font>	      UseVignetteHighlight = 0;
<a name="L1494"><font color="white">01494</font>	    }
<a name="L1495"><font color="white">01495</font>	}
<a name="L1496"><font color="white">01496</font>	
<a name="L1497"><font color="white">01497</font>	/* ClientShake()
<a name="L1498"><font color="white">01498</font>	Function called on client to shake view.
<a name="L1499"><font color="white">01499</font>	Only ShakeView() should call ClientShake()
<a name="L1500"><font color="white">01500</font>	*/
<a name="L1501"><font color="white">01501</font>	private function ClientShake(vector ShakeRoll, vector OffsetMag, vector ShakeRate, float OffsetTime)
<a name="L1502"><font color="white">01502</font>	{
<a name="L1503"><font color="white">01503</font>		if ( (MaxShakeRoll &lt; ShakeRoll.X) || (ShakeRollTime &lt; 0.01 * ShakeRoll.Y) )
<a name="L1504"><font color="white">01504</font>		{
<a name="L1505"><font color="white">01505</font>			MaxShakeRoll = ShakeRoll.X;
<a name="L1506"><font color="white">01506</font>			ShakeRollTime = 0.01 * ShakeRoll.Y;
<a name="L1507"><font color="white">01507</font>			ShakeRollRate = 0.01 * ShakeRoll.Z;
<a name="L1508"><font color="white">01508</font>		}
<a name="L1509"><font color="white">01509</font>		if ( VSize(OffsetMag) &gt; VSize(MaxShakeOffset) )
<a name="L1510"><font color="white">01510</font>		{
<a name="L1511"><font color="white">01511</font>			ShakeOffsetTime = OffsetTime * vect(1,1,1);
<a name="L1512"><font color="white">01512</font>			MaxShakeOffset = OffsetMag;
<a name="L1513"><font color="white">01513</font>			ShakeOffsetRate = ShakeRate;
<a name="L1514"><font color="white">01514</font>		}
<a name="L1515"><font color="white">01515</font>	//	if (MaxShakeFrame &lt; ShakeFrameMag)
<a name="L1516"><font color="white">01516</font>	//	{
<a name="L1517"><font color="white">01517</font>	/*		MaxShakeFrame.X = 0.08;
<a name="L1518"><font color="white">01518</font>			MaxShakeFrame.Y = 0.06;
<a name="L1519"><font color="white">01519</font>			ShakeFrameTime = 10;
<a name="L1520"><font color="white">01520</font>			ShakeFrameRate.X = 0.4;
<a name="L1521"><font color="white">01521</font>			ShakeFrameRate.Y = 0.25;*/
<a name="L1522"><font color="white">01522</font>	//	}
<a name="L1523"><font color="white">01523</font>	
<a name="L1524"><font color="white">01524</font>	}
<a name="L1525"><font color="white">01525</font>	
<a name="L1526"><font color="white">01526</font>	
<a name="L1527"><font color="white">01527</font>	/* ShakeView()
<a name="L1528"><font color="white">01528</font>	Call this function to shake the player's view
<a name="L1529"><font color="white">01529</font>	shaketime = how long to roll view
<a name="L1530"><font color="white">01530</font>	RollMag = how far to roll view as it shakes
<a name="L1531"><font color="white">01531</font>	OffsetMag = max view offset
<a name="L1532"><font color="white">01532</font>	RollRate = how fast to roll view
<a name="L1533"><font color="white">01533</font>	OffsetRate = how fast to offset view
<a name="L1534"><font color="white">01534</font>	OffsetTime = how long to offset view (number of shakes)
<a name="L1535"><font color="white">01535</font>	*/
<a name="L1536"><font color="white">01536</font>	function ShakeView( float shaketime, float RollMag, vector OffsetMag, float RollRate, vector OffsetRate, float OffsetTime)
<a name="L1537"><font color="white">01537</font>	{
<a name="L1538"><font color="white">01538</font>		local vector ShakeRoll;
<a name="L1539"><font color="white">01539</font>	
<a name="L1540"><font color="white">01540</font>		ShakeRoll.X = RollMag;
<a name="L1541"><font color="white">01541</font>		ShakeRoll.Y = 100 * shaketime;
<a name="L1542"><font color="white">01542</font>		ShakeRoll.Z = 100 * rollrate;
<a name="L1543"><font color="white">01543</font>		ClientShake(ShakeRoll, OffsetMag, OffsetRate, OffsetTime);
<a name="L1544"><font color="white">01544</font>	}
<a name="L1545"><font color="white">01545</font>	
<a name="L1546"><font color="white">01546</font>	function damageAttitudeTo(pawn Other, float Damage)
<a name="L1547"><font color="white">01547</font>	{
<a name="L1548"><font color="white">01548</font>		if ( (Other != None) &amp;&amp; (Other != Pawn) &amp;&amp; (Damage &gt; 0) )
<a name="L1549"><font color="white">01549</font>			Enemy = Other;
<a name="L1550"><font color="white">01550</font>	}
<a name="L1551"><font color="white">01551</font>	
<a name="L1552"><font color="white">01552</font>	function Typing( bool bTyping )
<a name="L1553"><font color="white">01553</font>	{
<a name="L1554"><font color="white">01554</font>		bIsTyping = bTyping;
<a name="L1555"><font color="white">01555</font>		if ( bTyping &amp;&amp; (Pawn != None) &amp;&amp; !Pawn.bTearOff )
<a name="L1556"><font color="white">01556</font>			Pawn.ChangeAnimation();
<a name="L1557"><font color="white">01557</font>	
<a name="L1558"><font color="white">01558</font>		if (Level.Game.StatLog != None)
<a name="L1559"><font color="white">01559</font>			Level.Game.StatLog.LogTypingEvent(bTyping, Self);
<a name="L1560"><font color="white">01560</font>	}
<a name="L1561"><font color="white">01561</font>	
<a name="L1562"><font color="white">01562</font>	//*************************************************************************************
<a name="L1563"><font color="white">01563</font>	// Normal gameplay execs
<a name="L1564"><font color="white">01564</font>	// Type the name of the exec function at the console to execute it
<a name="L1565"><font color="white">01565</font>	
<a name="L1566"><font color="white">01566</font>	exec function Jump( optional float F )
<a name="L1567"><font color="white">01567</font>	{
<a name="L1568"><font color="white">01568</font>		if ( Level.Pauser == PlayerReplicationInfo )
<a name="L1569"><font color="white">01569</font>			SetPause(False);
<a name="L1570"><font color="white">01570</font>		else
<a name="L1571"><font color="white">01571</font>			bPressedJump = true;
<a name="L1572"><font color="white">01572</font>	}
<a name="L1573"><font color="white">01573</font>	
<a name="L1574"><font color="white">01574</font>	// Send a voice message of a certain type to a certain player.
<a name="L1575"><font color="white">01575</font>	exec function Speech( int Type, int Index, int Callsign )
<a name="L1576"><font color="white">01576</font>	{
<a name="L1577"><font color="white">01577</font>		local VoicePack V;
<a name="L1578"><font color="white">01578</font>	
<a name="L1579"><font color="white">01579</font>		V = Spawn( PlayerReplicationInfo.VoiceType, Self );
<a name="L1580"><font color="white">01580</font>		if (V != None)
<a name="L1581"><font color="white">01581</font>			V.PlayerSpeech( Type, Index, Callsign );
<a name="L1582"><font color="white">01582</font>	}
<a name="L1583"><font color="white">01583</font>	
<a name="L1584"><font color="white">01584</font>	exec function RestartLevel()
<a name="L1585"><font color="white">01585</font>	{
<a name="L1586"><font color="white">01586</font>		if( Level.Netmode==NM_Standalone )
<a name="L1587"><font color="white">01587</font>			ClientTravel( &quot;?restart&quot;, TRAVEL_Relative, false );
<a name="L1588"><font color="white">01588</font>	}
<a name="L1589"><font color="white">01589</font>	
<a name="L1590"><font color="white">01590</font>	exec function LocalTravel( string URL )
<a name="L1591"><font color="white">01591</font>	{
<a name="L1592"><font color="white">01592</font>		if( Level.Netmode==NM_Standalone )
<a name="L1593"><font color="white">01593</font>			ClientTravel( URL, TRAVEL_Relative, true );
<a name="L1594"><font color="white">01594</font>	}
<a name="L1595"><font color="white">01595</font>	
<a name="L1596"><font color="white">01596</font>	// ------------------------------------------------------------------------
<a name="L1597"><font color="white">01597</font>	// Loading and saving
<a name="L1598"><font color="white">01598</font>	
<a name="L1599"><font color="white">01599</font>	/* QuickSave()
<a name="L1600"><font color="white">01600</font>	Save game to slot 9
<a name="L1601"><font color="white">01601</font>	*/
<a name="L1602"><font color="white">01602</font>	exec function QuickSave()
<a name="L1603"><font color="white">01603</font>	{
<a name="L1604"><font color="white">01604</font>		if ( (Pawn.Health &gt; 0)
<a name="L1605"><font color="white">01605</font>			&amp;&amp; (Level.NetMode == NM_Standalone) )
<a name="L1606"><font color="white">01606</font>		{
<a name="L1607"><font color="white">01607</font>			ClientMessage(QuickSaveString);
<a name="L1608"><font color="white">01608</font>			ConsoleCommand(&quot;SaveGame 9&quot;);
<a name="L1609"><font color="white">01609</font>		}
<a name="L1610"><font color="white">01610</font>	}
<a name="L1611"><font color="white">01611</font>	
<a name="L1612"><font color="white">01612</font>	/* QuickLoad()
<a name="L1613"><font color="white">01613</font>	Load game from slot 9
<a name="L1614"><font color="white">01614</font>	*/
<a name="L1615"><font color="white">01615</font>	exec function QuickLoad()
<a name="L1616"><font color="white">01616</font>	{
<a name="L1617"><font color="white">01617</font>		if ( Level.NetMode == NM_Standalone )
<a name="L1618"><font color="white">01618</font>			ClientTravel( &quot;?load=9&quot;, TRAVEL_Absolute, false);
<a name="L1619"><font color="white">01619</font>	}
<a name="L1620"><font color="white">01620</font>	
<a name="L1621"><font color="white">01621</font>	/* SetPause()
<a name="L1622"><font color="white">01622</font>	 Try to pause game; returns success indicator.
<a name="L1623"><font color="white">01623</font>	 Replicated to server in network games.
<a name="L1624"><font color="white">01624</font>	 */
<a name="L1625"><font color="white">01625</font>	function bool SetPause( BOOL bPause )
<a name="L1626"><font color="white">01626</font>	{
<a name="L1627"><font color="white">01627</font>		local bool ret;
<a name="L1628"><font color="white">01628</font>	
<a name="L1629"><font color="white">01629</font>		if( bPause )
<a name="L1630"><font color="white">01630</font>			ret = Level.Game.SetPause(True, self);
<a name="L1631"><font color="white">01631</font>		else
<a name="L1632"><font color="white">01632</font>			ret = Level.Game.SetPause(False, self);
<a name="L1633"><font color="white">01633</font>		return ret;
<a name="L1634"><font color="white">01634</font>	}
<a name="L1635"><font color="white">01635</font>	
<a name="L1636"><font color="white">01636</font>	/* Pause()
<a name="L1637"><font color="white">01637</font>	Command to try to pause the game.
<a name="L1638"><font color="white">01638</font>	*/
<a name="L1639"><font color="white">01639</font>	exec function Pause()
<a name="L1640"><font color="white">01640</font>	{
<a name="L1641"><font color="white">01641</font>		if( !SetPause(Level.Pauser==None) )
<a name="L1642"><font color="white">01642</font>			ClientMessage(NoPauseMessage);
<a name="L1643"><font color="white">01643</font>	}
<a name="L1644"><font color="white">01644</font>	
<a name="L1645"><font color="white">01645</font>	// Activate specific inventory item
<a name="L1646"><font color="white">01646</font>	exec function ActivateInventoryItem( class InvItem )
<a name="L1647"><font color="white">01647</font>	{
<a name="L1648"><font color="white">01648</font>		local Powerups Inv;
<a name="L1649"><font color="white">01649</font>	
<a name="L1650"><font color="white">01650</font>		Inv = Powerups(Pawn.FindInventoryType(InvItem));
<a name="L1651"><font color="white">01651</font>		if ( Inv != None )
<a name="L1652"><font color="white">01652</font>			Inv.Activate();
<a name="L1653"><font color="white">01653</font>	}
<a name="L1654"><font color="white">01654</font>	
<a name="L1655"><font color="white">01655</font>	// ------------------------------------------------------------------------
<a name="L1656"><font color="white">01656</font>	// Weapon changing functions
<a name="L1657"><font color="white">01657</font>	
<a name="L1658"><font color="white">01658</font>	/* ThrowWeapon()
<a name="L1659"><font color="white">01659</font>	Throw out current weapon, and switch to a new weapon
<a name="L1660"><font color="white">01660</font>	*/
<a name="L1661"><font color="white">01661</font>	exec function ThrowWeapon()
<a name="L1662"><font color="white">01662</font>	{
<a name="L1663"><font color="white">01663</font>		if( Level.NetMode == NM_Client )
<a name="L1664"><font color="white">01664</font>			return;
<a name="L1665"><font color="white">01665</font>		if( Pawn.Weapon==None || !Pawn.Weapon.bCanThrow )
<a name="L1666"><font color="white">01666</font>			return;
<a name="L1667"><font color="white">01667</font>		Pawn.Weapon.bTossedOut = true;
<a name="L1668"><font color="white">01668</font>		Pawn.TossWeapon(Vector(Rotation) * 500 + vect(0,0,220));
<a name="L1669"><font color="white">01669</font>		if ( Pawn.Weapon == None )
<a name="L1670"><font color="white">01670</font>			SwitchToBestWeapon();
<a name="L1671"><font color="white">01671</font>	}
<a name="L1672"><font color="white">01672</font>	
<a name="L1673"><font color="white">01673</font>	/* PrevWeapon()
<a name="L1674"><font color="white">01674</font>	- switch to previous inventory group weapon
<a name="L1675"><font color="white">01675</font>	*/
<a name="L1676"><font color="white">01676</font>	exec function PrevWeapon()
<a name="L1677"><font color="white">01677</font>	{
<a name="L1678"><font color="white">01678</font>		if( Level.Pauser!=None )
<a name="L1679"><font color="white">01679</font>			return;
<a name="L1680"><font color="white">01680</font>		if ( Pawn.Weapon == None )
<a name="L1681"><font color="white">01681</font>		{
<a name="L1682"><font color="white">01682</font>			SwitchToBestWeapon();
<a name="L1683"><font color="white">01683</font>			return;
<a name="L1684"><font color="white">01684</font>		}
<a name="L1685"><font color="white">01685</font>		if ( Pawn.PendingWeapon != None )
<a name="L1686"><font color="white">01686</font>			Pawn.PendingWeapon = Pawn.Inventory.PrevWeapon(None, Pawn.PendingWeapon);
<a name="L1687"><font color="white">01687</font>		else
<a name="L1688"><font color="white">01688</font>			Pawn.PendingWeapon = Pawn.Inventory.PrevWeapon(None, Pawn.Weapon);
<a name="L1689"><font color="white">01689</font>	
<a name="L1690"><font color="white">01690</font>		if ( Pawn.PendingWeapon != None )
<a name="L1691"><font color="white">01691</font>			Pawn.Weapon.PutDown();
<a name="L1692"><font color="white">01692</font>	}
<a name="L1693"><font color="white">01693</font>	
<a name="L1694"><font color="white">01694</font>	/* NextWeapon()
<a name="L1695"><font color="white">01695</font>	- switch to next inventory group weapon
<a name="L1696"><font color="white">01696</font>	*/
<a name="L1697"><font color="white">01697</font>	exec function NextWeapon()
<a name="L1698"><font color="white">01698</font>	{
<a name="L1699"><font color="white">01699</font>		if( Level.Pauser!=None )
<a name="L1700"><font color="white">01700</font>			return;
<a name="L1701"><font color="white">01701</font>		if ( Pawn.Weapon == None )
<a name="L1702"><font color="white">01702</font>		{
<a name="L1703"><font color="white">01703</font>			SwitchToBestWeapon();
<a name="L1704"><font color="white">01704</font>			return;
<a name="L1705"><font color="white">01705</font>		}
<a name="L1706"><font color="white">01706</font>		if ( Pawn.PendingWeapon != None )
<a name="L1707"><font color="white">01707</font>			Pawn.PendingWeapon = Pawn.Inventory.NextWeapon(None, Pawn.PendingWeapon);
<a name="L1708"><font color="white">01708</font>		else
<a name="L1709"><font color="white">01709</font>			Pawn.PendingWeapon = Pawn.Inventory.NextWeapon(None, Pawn.Weapon);
<a name="L1710"><font color="white">01710</font>	
<a name="L1711"><font color="white">01711</font>		if ( Pawn.PendingWeapon != None )
<a name="L1712"><font color="white">01712</font>			Pawn.Weapon.PutDown();
<a name="L1713"><font color="white">01713</font>	}
<a name="L1714"><font color="white">01714</font>	
<a name="L1715"><font color="white">01715</font>	// The player wants to switch to weapon group number F.
<a name="L1716"><font color="white">01716</font>	exec function SwitchWeapon (byte F )
<a name="L1717"><font color="white">01717</font>	{
<a name="L1718"><font color="white">01718</font>		local weapon newWeapon;
<a name="L1719"><font color="white">01719</font>	
<a name="L1720"><font color="white">01720</font>		if ( (Level.Pauser!=None) || (Pawn == None) || (Pawn.Inventory == None) )
<a name="L1721"><font color="white">01721</font>			return;
<a name="L1722"><font color="white">01722</font>		if ( (Pawn.Weapon != None) &amp;&amp; (Pawn.Weapon.Inventory != None) )
<a name="L1723"><font color="white">01723</font>			newWeapon = Pawn.Weapon.Inventory.WeaponChange(F);
<a name="L1724"><font color="white">01724</font>		else
<a name="L1725"><font color="white">01725</font>			newWeapon = None;
<a name="L1726"><font color="white">01726</font>		if ( newWeapon == None )
<a name="L1727"><font color="white">01727</font>			newWeapon = Pawn.Inventory.WeaponChange(F);
<a name="L1728"><font color="white">01728</font>	
<a name="L1729"><font color="white">01729</font>		if ( newWeapon == None )
<a name="L1730"><font color="white">01730</font>			return;
<a name="L1731"><font color="white">01731</font>	
<a name="L1732"><font color="white">01732</font>		if ( Pawn.Weapon == None )
<a name="L1733"><font color="white">01733</font>		{
<a name="L1734"><font color="white">01734</font>			Pawn.PendingWeapon = newWeapon;
<a name="L1735"><font color="white">01735</font>			Pawn.ChangedWeapon();
<a name="L1736"><font color="white">01736</font>		}
<a name="L1737"><font color="white">01737</font>		else if ( Pawn.Weapon != newWeapon )
<a name="L1738"><font color="white">01738</font>		{
<a name="L1739"><font color="white">01739</font>			Pawn.PendingWeapon = newWeapon;
<a name="L1740"><font color="white">01740</font>			if ( !Pawn.Weapon.PutDown() )
<a name="L1741"><font color="white">01741</font>				Pawn.PendingWeapon = None;
<a name="L1742"><font color="white">01742</font>		}
<a name="L1743"><font color="white">01743</font>	}
<a name="L1744"><font color="white">01744</font>	
<a name="L1745"><font color="white">01745</font>	exec function GetWeapon(class&lt;Weapon&gt; NewWeaponClass )
<a name="L1746"><font color="white">01746</font>	{
<a name="L1747"><font color="white">01747</font>		local Inventory Inv;
<a name="L1748"><font color="white">01748</font>	
<a name="L1749"><font color="white">01749</font>		if ( (Pawn.Inventory == None) || (NewWeaponClass == None)
<a name="L1750"><font color="white">01750</font>			|| ((Pawn.Weapon != None) &amp;&amp; (Pawn.Weapon.Class == NewWeaponClass)) )
<a name="L1751"><font color="white">01751</font>			return;
<a name="L1752"><font color="white">01752</font>	
<a name="L1753"><font color="white">01753</font>		for ( Inv=Pawn.Inventory; Inv!=None; Inv=Inv.Inventory )
<a name="L1754"><font color="white">01754</font>			if ( Inv.Class == NewWeaponClass )
<a name="L1755"><font color="white">01755</font>			{
<a name="L1756"><font color="white">01756</font>				Pawn.PendingWeapon = Weapon(Inv);
<a name="L1757"><font color="white">01757</font>				if ( !Pawn.PendingWeapon.HasAmmo() )
<a name="L1758"><font color="white">01758</font>				{
<a name="L1759"><font color="white">01759</font>					ClientMessage( Pawn.PendingWeapon.ItemName$Pawn.PendingWeapon.MessageNoAmmo );
<a name="L1760"><font color="white">01760</font>					Pawn.PendingWeapon = None;
<a name="L1761"><font color="white">01761</font>					return;
<a name="L1762"><font color="white">01762</font>				}
<a name="L1763"><font color="white">01763</font>				Pawn.Weapon.PutDown();
<a name="L1764"><font color="white">01764</font>				return;
<a name="L1765"><font color="white">01765</font>			}
<a name="L1766"><font color="white">01766</font>	}
<a name="L1767"><font color="white">01767</font>	
<a name="L1768"><font color="white">01768</font>	// The player wants to select previous item
<a name="L1769"><font color="white">01769</font>	exec function PrevItem()
<a name="L1770"><font color="white">01770</font>	{
<a name="L1771"><font color="white">01771</font>		local Inventory Inv;
<a name="L1772"><font color="white">01772</font>		local Powerups LastItem;
<a name="L1773"><font color="white">01773</font>	
<a name="L1774"><font color="white">01774</font>		if ( Level.Pauser!=None )
<a name="L1775"><font color="white">01775</font>			return;
<a name="L1776"><font color="white">01776</font>		if (Pawn.SelectedItem==None)
<a name="L1777"><font color="white">01777</font>		{
<a name="L1778"><font color="white">01778</font>			Pawn.SelectedItem = Inventory.SelectNext();
<a name="L1779"><font color="white">01779</font>			Return;
<a name="L1780"><font color="white">01780</font>		}
<a name="L1781"><font color="white">01781</font>		if (Pawn.SelectedItem.Inventory!=None)
<a name="L1782"><font color="white">01782</font>			for( Inv=Pawn.SelectedItem.Inventory; Inv!=None; Inv=Inv.Inventory )
<a name="L1783"><font color="white">01783</font>			{
<a name="L1784"><font color="white">01784</font>				if (Inv==None) Break;
<a name="L1785"><font color="white">01785</font>				if ( Inv.IsA('Powerups') &amp;&amp; Powerups(Inv).bActivatable) LastItem=Powerups(Inv);
<a name="L1786"><font color="white">01786</font>			}
<a name="L1787"><font color="white">01787</font>		for( Inv=Pawn.Inventory; Inv!=Pawn.SelectedItem; Inv=Inv.Inventory )
<a name="L1788"><font color="white">01788</font>		{
<a name="L1789"><font color="white">01789</font>			if (Inv==None) Break;
<a name="L1790"><font color="white">01790</font>			if ( Inv.IsA('Powerups') &amp;&amp; Powerups(Inv).bActivatable) LastItem=Powerups(Inv);
<a name="L1791"><font color="white">01791</font>		}
<a name="L1792"><font color="white">01792</font>		if (LastItem!=None)
<a name="L1793"><font color="white">01793</font>			Pawn.SelectedItem = LastItem;
<a name="L1794"><font color="white">01794</font>	}
<a name="L1795"><font color="white">01795</font>	
<a name="L1796"><font color="white">01796</font>	// The player wants to active selected item
<a name="L1797"><font color="white">01797</font>	exec function ActivateItem()
<a name="L1798"><font color="white">01798</font>	{
<a name="L1799"><font color="white">01799</font>		if( Level.Pauser!=None )
<a name="L1800"><font color="white">01800</font>			return;
<a name="L1801"><font color="white">01801</font>		if ( (Pawn != None) &amp;&amp; (Pawn.SelectedItem!=None) )
<a name="L1802"><font color="white">01802</font>			Pawn.SelectedItem.Activate();
<a name="L1803"><font color="white">01803</font>	}
<a name="L1804"><font color="white">01804</font>	
<a name="L1805"><font color="white">01805</font>	// The player wants to fire.
<a name="L1806"><font color="white">01806</font>	exec function Fire( optional float F )
<a name="L1807"><font color="white">01807</font>	{
<a name="L1808"><font color="white">01808</font>		if ( Level.Pauser == PlayerReplicationInfo )
<a name="L1809"><font color="white">01809</font>		{
<a name="L1810"><font color="white">01810</font>			SetPause(false);
<a name="L1811"><font color="white">01811</font>			return;
<a name="L1812"><font color="white">01812</font>		}
<a name="L1813"><font color="white">01813</font>		if( Pawn.Weapon!=None )
<a name="L1814"><font color="white">01814</font>			Pawn.Weapon.Fire(F);
<a name="L1815"><font color="white">01815</font>	}
<a name="L1816"><font color="white">01816</font>	
<a name="L1817"><font color="white">01817</font>	// The player wants to alternate-fire.
<a name="L1818"><font color="white">01818</font>	exec function AltFire( optional float F )
<a name="L1819"><font color="white">01819</font>	{
<a name="L1820"><font color="white">01820</font>		if ( Level.Pauser == PlayerReplicationInfo )
<a name="L1821"><font color="white">01821</font>		{
<a name="L1822"><font color="white">01822</font>			SetPause(false);
<a name="L1823"><font color="white">01823</font>			return;
<a name="L1824"><font color="white">01824</font>		}
<a name="L1825"><font color="white">01825</font>		if( Pawn.Weapon!=None )
<a name="L1826"><font color="white">01826</font>			Pawn.Weapon.AltFire(F);
<a name="L1827"><font color="white">01827</font>	}
<a name="L1828"><font color="white">01828</font>	
<a name="L1829"><font color="white">01829</font>	// The player wants to use something in the level.
<a name="L1830"><font color="white">01830</font>	exec function Use()
<a name="L1831"><font color="white">01831</font>	{
<a name="L1832"><font color="white">01832</font>		local Actor A;
<a name="L1833"><font color="white">01833</font>	
<a name="L1834"><font color="white">01834</font>		if ( Level.Pauser == PlayerReplicationInfo )
<a name="L1835"><font color="white">01835</font>		{
<a name="L1836"><font color="white">01836</font>			SetPause(false);
<a name="L1837"><font color="white">01837</font>			return;
<a name="L1838"><font color="white">01838</font>		}
<a name="L1839"><font color="white">01839</font>	
<a name="L1840"><font color="white">01840</font>		// Send the 'DoUse' event to each actor player is touching.
<a name="L1841"><font color="white">01841</font>		ForEach Pawn.TouchingActors(class'Actor', A)
<a name="L1842"><font color="white">01842</font>		{
<a name="L1843"><font color="white">01843</font>			A.UsedBy(Pawn);
<a name="L1844"><font color="white">01844</font>		}
<a name="L1845"><font color="white">01845</font>	}
<a name="L1846"><font color="white">01846</font>	
<a name="L1847"><font color="white">01847</font>	exec function Suicide()
<a name="L1848"><font color="white">01848</font>	{
<a name="L1849"><font color="white">01849</font>		Pawn.KilledBy( Pawn );
<a name="L1850"><font color="white">01850</font>	}
<a name="L1851"><font color="white">01851</font>	
<a name="L1852"><font color="white">01852</font>	function Name( coerce string S )
<a name="L1853"><font color="white">01853</font>	{
<a name="L1854"><font color="white">01854</font>		S = Left(S,15);
<a name="L1855"><font color="white">01855</font>	
<a name="L1856"><font color="white">01856</font>	    ChangeName(S);
<a name="L1857"><font color="white">01857</font>		UpdateURL(&quot;Name&quot;, S, true);
<a name="L1858"><font color="white">01858</font>		SaveConfig();
<a name="L1859"><font color="white">01859</font>	}
<a name="L1860"><font color="white">01860</font>	
<a name="L1861"><font color="white">01861</font>	function ChangeName( coerce string S )
<a name="L1862"><font color="white">01862</font>	{
<a name="L1863"><font color="white">01863</font>		if ( Len(S) &gt; 28 )
<a name="L1864"><font color="white">01864</font>			S = left(S,28);
<a name="L1865"><font color="white">01865</font>		ReplaceText(S, &quot; &quot;, &quot;_&quot;);
<a name="L1866"><font color="white">01866</font>		Level.Game.ChangeName( self, S, false );
<a name="L1867"><font color="white">01867</font>	}
<a name="L1868"><font color="white">01868</font>	
<a name="L1869"><font color="white">01869</font>	exec function SwitchTeam()
<a name="L1870"><font color="white">01870</font>	{
<a name="L1871"><font color="white">01871</font>		if ( (PlayerReplicationInfo.Team == None) || (PlayerReplicationInfo.Team.TeamIndex == 1) )
<a name="L1872"><font color="white">01872</font>			ChangeTeam(0);
<a name="L1873"><font color="white">01873</font>		else
<a name="L1874"><font color="white">01874</font>			ChangeTeam(1);
<a name="L1875"><font color="white">01875</font>	}
<a name="L1876"><font color="white">01876</font>	
<a name="L1877"><font color="white">01877</font>	function ChangeTeam( int N )
<a name="L1878"><font color="white">01878</font>	{
<a name="L1879"><font color="white">01879</font>		local TeamInfo OldTeam;
<a name="L1880"><font color="white">01880</font>	
<a name="L1881"><font color="white">01881</font>		OldTeam = PlayerReplicationInfo.Team;
<a name="L1882"><font color="white">01882</font>		Level.Game.ChangeTeam(self, N);
<a name="L1883"><font color="white">01883</font>		if ( Level.Game.bTeamGame &amp;&amp; (PlayerReplicationInfo.Team != OldTeam) )
<a name="L1884"><font color="white">01884</font>			Pawn.Died( self, class'DamageType', Pawn.Location );
<a name="L1885"><font color="white">01885</font>	}
<a name="L1886"><font color="white">01886</font>	
<a name="L1887"><font color="white">01887</font>	
<a name="L1888"><font color="white">01888</font>	exec function SwitchLevel( string URL )
<a name="L1889"><font color="white">01889</font>	{
<a name="L1890"><font color="white">01890</font>		if( Level.NetMode==NM_Standalone || Level.netMode==NM_ListenServer )
<a name="L1891"><font color="white">01891</font>			Level.ServerTravel( URL, false );
<a name="L1892"><font color="white">01892</font>	}
<a name="L1893"><font color="white">01893</font>	
<a name="L1894"><font color="white">01894</font>	exec function ClearProgressMessages()
<a name="L1895"><font color="white">01895</font>	{
<a name="L1896"><font color="white">01896</font>		local int i;
<a name="L1897"><font color="white">01897</font>	
<a name="L1898"><font color="white">01898</font>		for (i=0; i&lt;ArrayCount(ProgressMessage); i++)
<a name="L1899"><font color="white">01899</font>		{
<a name="L1900"><font color="white">01900</font>			ProgressMessage[i] = &quot;&quot;;
<a name="L1901"><font color="white">01901</font>			ProgressColor[i] = class'Canvas'.Static.MakeColor(255,255,255);
<a name="L1902"><font color="white">01902</font>		}
<a name="L1903"><font color="white">01903</font>	}
<a name="L1904"><font color="white">01904</font>	
<a name="L1905"><font color="white">01905</font>	exec event SetProgressMessage( int Index, string S, color C )
<a name="L1906"><font color="white">01906</font>	{
<a name="L1907"><font color="white">01907</font>		if ( Index &lt; ArrayCount(ProgressMessage) )
<a name="L1908"><font color="white">01908</font>		{
<a name="L1909"><font color="white">01909</font>			ProgressMessage[Index] = S;
<a name="L1910"><font color="white">01910</font>			ProgressColor[Index] = C;
<a name="L1911"><font color="white">01911</font>		}
<a name="L1912"><font color="white">01912</font>	}
<a name="L1913"><font color="white">01913</font>	
<a name="L1914"><font color="white">01914</font>	exec event SetProgressTime( float T )
<a name="L1915"><font color="white">01915</font>	{
<a name="L1916"><font color="white">01916</font>		ProgressTimeOut = T + Level.TimeSeconds;
<a name="L1917"><font color="white">01917</font>	}
<a name="L1918"><font color="white">01918</font>	
<a name="L1919"><font color="white">01919</font>	function Restart()
<a name="L1920"><font color="white">01920</font>	{
<a name="L1921"><font color="white">01921</font>		ServerTimeStamp = 0;
<a name="L1922"><font color="white">01922</font>		TimeMargin = 0;
<a name="L1923"><font color="white">01923</font>		Enemy = None;
<a name="L1924"><font color="white">01924</font>		EnterStartState();
<a name="L1925"><font color="white">01925</font>		SetViewTarget(Pawn);
<a name="L1926"><font color="white">01926</font>		bBehindView = Pawn.PointOfView();
<a name="L1927"><font color="white">01927</font>		ClientRestart();
<a name="L1928"><font color="white">01928</font>	}
<a name="L1929"><font color="white">01929</font>	
<a name="L1930"><font color="white">01930</font>	function EnterStartState()
<a name="L1931"><font color="white">01931</font>	{
<a name="L1932"><font color="white">01932</font>		local name NewState;
<a name="L1933"><font color="white">01933</font>	
<a name="L1934"><font color="white">01934</font>		if ( Pawn.PhysicsVolume.bWaterVolume )
<a name="L1935"><font color="white">01935</font>		{
<a name="L1936"><font color="white">01936</font>			if ( Pawn.HeadVolume.bWaterVolume )
<a name="L1937"><font color="white">01937</font>				Pawn.BreathTime = Pawn.UnderWaterTime;
<a name="L1938"><font color="white">01938</font>			NewState = Pawn.WaterMovementState;
<a name="L1939"><font color="white">01939</font>		}
<a name="L1940"><font color="white">01940</font>		else
<a name="L1941"><font color="white">01941</font>			NewState = Pawn.LandMovementState;
<a name="L1942"><font color="white">01942</font>	
<a name="L1943"><font color="white">01943</font>		if ( IsInState(NewState) )
<a name="L1944"><font color="white">01944</font>			BeginState();
<a name="L1945"><font color="white">01945</font>		else
<a name="L1946"><font color="white">01946</font>			GotoState(NewState);
<a name="L1947"><font color="white">01947</font>	}
<a name="L1948"><font color="white">01948</font>	
<a name="L1949"><font color="white">01949</font>	function ClientRestart()
<a name="L1950"><font color="white">01950</font>	{
<a name="L1951"><font color="white">01951</font>	/*
<a name="L1952"><font color="white">01952</font>		if ( Pawn == None )
<a name="L1953"><font color="white">01953</font>		{
<a name="L1954"><font color="white">01954</font>			GotoState('WaitingForPawn');
<a name="L1955"><font color="white">01955</font>			return;
<a name="L1956"><font color="white">01956</font>		}
<a name="L1957"><font color="white">01957</font>		Pawn.ClientRestart();
<a name="L1958"><font color="white">01958</font>		SetViewTarget(Pawn);
<a name="L1959"><font color="white">01959</font>		bBehindView = Pawn.PointOfView();
<a name="L1960"><font color="white">01960</font>		EnterStartState();
<a name="L1961"><font color="white">01961</font>	*/
<a name="L1962"><font color="white">01962</font>	}
<a name="L1963"><font color="white">01963</font>	
<a name="L1964"><font color="white">01964</font>	exec function BehindView( Bool B )
<a name="L1965"><font color="white">01965</font>	{
<a name="L1966"><font color="white">01966</font>		bBehindView = B;
<a name="L1967"><font color="white">01967</font>		ClientSetBehindView(bBehindView);
<a name="L1968"><font color="white">01968</font>	}
<a name="L1969"><font color="white">01969</font>	
<a name="L1970"><font color="white">01970</font>	function UpdateBob(float F)
<a name="L1971"><font color="white">01971</font>	{
<a name="L1972"><font color="white">01972</font>		Bob = FClamp(F,0,0.032);
<a name="L1973"><font color="white">01973</font>	}
<a name="L1974"><font color="white">01974</font>	
<a name="L1975"><font color="white">01975</font>	
<a name="L1976"><font color="white">01976</font>	//=============================================================================
<a name="L1977"><font color="white">01977</font>	// functions.
<a name="L1978"><font color="white">01978</font>	
<a name="L1979"><font color="white">01979</font>	// Just changed to pendingWeapon
<a name="L1980"><font color="white">01980</font>	function ChangedWeapon()
<a name="L1981"><font color="white">01981</font>	{
<a name="L1982"><font color="white">01982</font>		if ( Pawn.PendingWeapon != None )
<a name="L1983"><font color="white">01983</font>			Pawn.PendingWeapon.SetHand(Handedness);
<a name="L1984"><font color="white">01984</font>	}
<a name="L1985"><font color="white">01985</font>	
<a name="L1986"><font color="white">01986</font>	event TravelPostAccept()
<a name="L1987"><font color="white">01987</font>	{
<a name="L1988"><font color="white">01988</font>		if ( Pawn.Health &lt;= 0 )
<a name="L1989"><font color="white">01989</font>			Pawn.Health = Pawn.Default.Health;
<a name="L1990"><font color="white">01990</font>	}
<a name="L1991"><font color="white">01991</font>	
<a name="L1992"><font color="white">01992</font>	event PlayerTick( float DeltaTime )
<a name="L1993"><font color="white">01993</font>	{
<a name="L1994"><font color="white">01994</font>		if ( bUpdatePosition )
<a name="L1995"><font color="white">01995</font>			ClientUpdatePosition();
<a name="L1996"><font color="white">01996</font>	
<a name="L1997"><font color="white">01997</font>		PlayerMove(DeltaTime);
<a name="L1998"><font color="white">01998</font>	}
<a name="L1999"><font color="white">01999</font>	
<a name="L2000"><font color="white">02000</font>	function PlayerMove(float DeltaTime);
<a name="L2001"><font color="white">02001</font>	
<a name="L2002"><font color="white">02002</font>	
<a name="L2003"><font color="white">02003</font>	//
<a name="L2004"><font color="white">02004</font>	/* AdjustAim()
<a name="L2005"><font color="white">02005</font>	Calls this version for player aiming help.
<a name="L2006"><font color="white">02006</font>	Aimerror not used in this version.
<a name="L2007"><font color="white">02007</font>	Only adjusts aiming at pawns
<a name="L2008"><font color="white">02008</font>	*/
<a name="L2009"><font color="white">02009</font>	function rotator AdjustAim(Ammunition FiredAmmunition, vector projStart, int aimerror);
<a name="L2010"><font color="white">02010</font>	/*
<a name="L2011"><font color="white">02011</font>	{
<a name="L2012"><font color="white">02012</font>		local vector FireDir, AimSpot, HitNormal, HitLocation, OldAim, AimOffset;
<a name="L2013"><font color="white">02013</font>		local actor BestTarget;
<a name="L2014"><font color="white">02014</font>		local float bestAim, bestDist, projspeed;
<a name="L2015"><font color="white">02015</font>		local actor HitActor;
<a name="L2016"><font color="white">02016</font>		local bool bNoZAdjust, bLeading;
<a name="L2017"><font color="white">02017</font>		local rotator AimRot;
<a name="L2018"><font color="white">02018</font>	
<a name="L2019"><font color="white">02019</font>		FireDir = vector(Rotation);
<a name="L2020"><font color="white">02020</font>		if ( FiredAmmunition.bInstantHit )
<a name="L2021"><font color="white">02021</font>			HitActor = Trace(HitLocation, HitNormal, projStart + 10000 * FireDir, projStart, true);
<a name="L2022"><font color="white">02022</font>		else
<a name="L2023"><font color="white">02023</font>			HitActor = Trace(HitLocation, HitNormal, projStart + 4000 * FireDir, projStart, true);
<a name="L2024"><font color="white">02024</font>		if ( (HitActor != None) &amp;&amp; HitActor.bProjTarget )
<a name="L2025"><font color="white">02025</font>		{
<a name="L2026"><font color="white">02026</font>			FiredAmmunition.WarnTarget(Target,Pawn,FireDir);
<a name="L2027"><font color="white">02027</font>			BestTarget = HitActor;
<a name="L2028"><font color="white">02028</font>			bNoZAdjust = true;
<a name="L2029"><font color="white">02029</font>			OldAim = HitLocation;
<a name="L2030"><font color="white">02030</font>			BestDist = VSize(BestTarget.Location - Pawn.Location);
<a name="L2031"><font color="white">02031</font>		}
<a name="L2032"><font color="white">02032</font>		else
<a name="L2033"><font color="white">02033</font>		{
<a name="L2034"><font color="white">02034</font>			// adjust aim based on FOV
<a name="L2035"><font color="white">02035</font>			bestAim = 0.95;
<a name="L2036"><font color="white">02036</font>			if ( AimingHelp == 1 )
<a name="L2037"><font color="white">02037</font>			{
<a name="L2038"><font color="white">02038</font>				bestAim = 0.93;
<a name="L2039"><font color="white">02039</font>				if ( FiredAmmunition.bInstantHit )
<a name="L2040"><font color="white">02040</font>					bestAim = 0.97;
<a name="L2041"><font color="white">02041</font>				if ( FOVAngle &lt; DefaultFOV - 8 )
<a name="L2042"><font color="white">02042</font>					bestAim = 0.99;
<a name="L2043"><font color="white">02043</font>			}
<a name="L2044"><font color="white">02044</font>			else
<a name="L2045"><font color="white">02045</font>			{
<a name="L2046"><font color="white">02046</font>				if ( FiredAmmunition.bInstantHit )
<a name="L2047"><font color="white">02047</font>					bestAim = 0.98;
<a name="L2048"><font color="white">02048</font>				if ( FOVAngle != DefaultFOV )
<a name="L2049"><font color="white">02049</font>					bestAim = 0.995;
<a name="L2050"><font color="white">02050</font>			}
<a name="L2051"><font color="white">02051</font>			BestTarget = PickTarget(bestAim, bestDist, FireDir, projStart);
<a name="L2052"><font color="white">02052</font>			if ( BestTarget == None )
<a name="L2053"><font color="white">02053</font>				return Rotation;
<a name="L2054"><font color="white">02054</font>			FiredAmmunition.WarnTarget(Target,Pawn,FireDir);
<a name="L2055"><font color="white">02055</font>			OldAim = projStart + FireDir * bestDist;
<a name="L2056"><font color="white">02056</font>		}
<a name="L2057"><font color="white">02057</font>		if ( AimingHelp == 0 )
<a name="L2058"><font color="white">02058</font>			return Rotation;
<a name="L2059"><font color="white">02059</font>	
<a name="L2060"><font color="white">02060</font>		// aim at target - help with leading also
<a name="L2061"><font color="white">02061</font>		if ( !FiredAmmunition.bInstantHit )
<a name="L2062"><font color="white">02062</font>		{
<a name="L2063"><font color="white">02063</font>			projspeed = FiredAmmunition.ProjectileClass.default.speed;
<a name="L2064"><font color="white">02064</font>			BestDist = vsize(BestTarget.Location + BestTarget.Velocity * FMin(2, 0.02 + BestDist/projSpeed) - projStart);
<a name="L2065"><font color="white">02065</font>			bLeading = true;
<a name="L2066"><font color="white">02066</font>			FireDir = BestTarget.Location + BestTarget.Velocity * FMin(2, 0.02 + BestDist/projSpeed) - projStart;
<a name="L2067"><font color="white">02067</font>			AimSpot = projStart + bestDist * Normal(FireDir);
<a name="L2068"><font color="white">02068</font>			// if splash damage weapon, try aiming at feet - trace down to find floor
<a name="L2069"><font color="white">02069</font>		}
<a name="L2070"><font color="white">02070</font>		else
<a name="L2071"><font color="white">02071</font>		{
<a name="L2072"><font color="white">02072</font>			FireDir = BestTarget.Location - projStart;
<a name="L2073"><font color="white">02073</font>			AimSpot = projStart + bestDist * Normal(FireDir);
<a name="L2074"><font color="white">02074</font>		}
<a name="L2075"><font color="white">02075</font>		AimOffset = AimSpot - OldAim;
<a name="L2076"><font color="white">02076</font>	
<a name="L2077"><font color="white">02077</font>		// adjust Z of shooter if necessary
<a name="L2078"><font color="white">02078</font>		if ( bNoZAdjust || (bLeading &amp;&amp; (Abs(AimOffset.Z) &lt; BestTarget.CollisionHeight)) )
<a name="L2079"><font color="white">02079</font>			AimSpot.Z = OldAim.Z;
<a name="L2080"><font color="white">02080</font>		else if ( AimOffset.Z &lt; 0 )
<a name="L2081"><font color="white">02081</font>			AimSpot.Z = BestTarget.Location.Z + 0.4 * BestTarget.CollisionHeight;
<a name="L2082"><font color="white">02082</font>		else
<a name="L2083"><font color="white">02083</font>			AimSpot.Z = BestTarget.Location.Z - 0.7 * BestTarget.CollisionHeight;
<a name="L2084"><font color="white">02084</font>	
<a name="L2085"><font color="white">02085</font>		if ( !bLeading )
<a name="L2086"><font color="white">02086</font>		{
<a name="L2087"><font color="white">02087</font>			// if not leading, add slight random error ( significant at long distances )
<a name="L2088"><font color="white">02088</font>			if ( !bNoZAdjust )
<a name="L2089"><font color="white">02089</font>			{
<a name="L2090"><font color="white">02090</font>				AimRot = rotator(AimSpot - projStart);
<a name="L2091"><font color="white">02091</font>				if ( FOVAngle &lt; DefaultFOV - 8 )
<a name="L2092"><font color="white">02092</font>					AimRot.Yaw = AimRot.Yaw + 200 - Rand(400);
<a name="L2093"><font color="white">02093</font>				else
<a name="L2094"><font color="white">02094</font>					AimRot.Yaw = AimRot.Yaw + 375 - Rand(750);
<a name="L2095"><font color="white">02095</font>				return AimRot;
<a name="L2096"><font color="white">02096</font>			}
<a name="L2097"><font color="white">02097</font>		}
<a name="L2098"><font color="white">02098</font>		else if ( !FastTrace(projStart + 0.9 * bestDist * Normal(FireDir), projStart) )
<a name="L2099"><font color="white">02099</font>		{
<a name="L2100"><font color="white">02100</font>			FireDir = BestTarget.Location - projStart;
<a name="L2101"><font color="white">02101</font>			AimSpot = projStart + bestDist * Normal(FireDir);
<a name="L2102"><font color="white">02102</font>		}
<a name="L2103"><font color="white">02103</font>	
<a name="L2104"><font color="white">02104</font>		return rotator(AimSpot - projStart);
<a name="L2105"><font color="white">02105</font>	}
<a name="L2106"><font color="white">02106</font>	*/
<a name="L2107"><font color="white">02107</font>	
<a name="L2108"><font color="white">02108</font>	native(498) static final function rotator AdjustAimForDisplay(Ammunition FiredAmmunition, vector projStart);
<a name="L2109"><font color="white">02109</font>	
<a name="L2110"><font color="white">02110</font>	function bool NotifyLanded(vector HitNormal)
<a name="L2111"><font color="white">02111</font>	{
<a name="L2112"><font color="white">02112</font>		if ( bUpdating )
<a name="L2113"><font color="white">02113</font>			return true;
<a name="L2114"><font color="white">02114</font>		LandBob = FMin(50, 0.055 * Pawn.Velocity.Z);
<a name="L2115"><font color="white">02115</font>		return false;
<a name="L2116"><font color="white">02116</font>	}
<a name="L2117"><font color="white">02117</font>	
<a name="L2118"><font color="white">02118</font>	function eAttitude AttitudeTo(Pawn Other)
<a name="L2119"><font color="white">02119</font>	{
<a name="L2120"><font color="white">02120</font>		if ( Other.Controller == None )
<a name="L2121"><font color="white">02121</font>			return ATTITUDE_Ignore;
<a name="L2122"><font color="white">02122</font>		if ( Other.IsPlayerPawn() )
<a name="L2123"><font color="white">02123</font>			return AttitudeToPlayer;
<a name="L2124"><font color="white">02124</font>		return Other.Controller.AttitudeToPlayer;
<a name="L2125"><font color="white">02125</font>	}
<a name="L2126"><font color="white">02126</font>	
<a name="L2127"><font color="white">02127</font>	//=============================================================================
<a name="L2128"><font color="white">02128</font>	// Player Control
<a name="L2129"><font color="white">02129</font>	
<a name="L2130"><font color="white">02130</font>	// Player view.
<a name="L2131"><font color="white">02131</font>	// Compute the rendering viewpoint for the player.
<a name="L2132"><font color="white">02132</font>	//
<a name="L2133"><font color="white">02133</font>	
<a name="L2134"><font color="white">02134</font>	function AdjustView(float DeltaTime )
<a name="L2135"><font color="white">02135</font>	{
<a name="L2136"><font color="white">02136</font>		// teleporters affect your FOV, so adjust it back down
<a name="L2137"><font color="white">02137</font>		if ( FOVAngle != DesiredFOV )
<a name="L2138"><font color="white">02138</font>		{
<a name="L2139"><font color="white">02139</font>			if ( FOVAngle &gt; DesiredFOV )
<a name="L2140"><font color="white">02140</font>				FOVAngle = FOVAngle - FMax(7, 0.9 * DeltaTime * (FOVAngle - DesiredFOV));
<a name="L2141"><font color="white">02141</font>			else
<a name="L2142"><font color="white">02142</font>				FOVAngle = FOVAngle - FMin(-7, 0.9 * DeltaTime * (FOVAngle - DesiredFOV));
<a name="L2143"><font color="white">02143</font>			if ( Abs(FOVAngle - DesiredFOV) &lt;= 10 )
<a name="L2144"><font color="white">02144</font>				FOVAngle = DesiredFOV;
<a name="L2145"><font color="white">02145</font>		}
<a name="L2146"><font color="white">02146</font>	
<a name="L2147"><font color="white">02147</font>		// adjust FOV for weapon zooming
<a name="L2148"><font color="white">02148</font>		if ( bZooming )
<a name="L2149"><font color="white">02149</font>		{
<a name="L2150"><font color="white">02150</font>			ZoomLevel += DeltaTime * 1.0;
<a name="L2151"><font color="white">02151</font>			if (ZoomLevel &gt; 0.9)
<a name="L2152"><font color="white">02152</font>				ZoomLevel = 0.9;
<a name="L2153"><font color="white">02153</font>			DesiredFOV = FClamp(90.0 - (ZoomLevel * 88.0), 1, 170);
<a name="L2154"><font color="white">02154</font>		}
<a name="L2155"><font color="white">02155</font>	}
<a name="L2156"><font color="white">02156</font>	
<a name="L2157"><font color="white">02157</font>	function CalcBehindView(out vector CameraLocation, out rotator CameraRotation, float Dist)
<a name="L2158"><font color="white">02158</font>	{
<a name="L2159"><font color="white">02159</font>		local vector View,HitLocation,HitNormal;
<a name="L2160"><font color="white">02160</font>		local float ViewDist;
<a name="L2161"><font color="white">02161</font>	
<a name="L2162"><font color="white">02162</font>		CameraRotation = Rotation;
<a name="L2163"><font color="white">02163</font>		View = vect(1,0,0) &gt;&gt; CameraRotation;
<a name="L2164"><font color="white">02164</font>		if( Trace( HitLocation, HitNormal, CameraLocation - (Dist + 30) * vector(CameraRotation), CameraLocation ) != None )
<a name="L2165"><font color="white">02165</font>			ViewDist = FMin( (CameraLocation - HitLocation) Dot View, Dist );
<a name="L2166"><font color="white">02166</font>		else
<a name="L2167"><font color="white">02167</font>			ViewDist = Dist;
<a name="L2168"><font color="white">02168</font>		CameraLocation -= (ViewDist - 30) * View;
<a name="L2169"><font color="white">02169</font>	}
<a name="L2170"><font color="white">02170</font>	
<a name="L2171"><font color="white">02171</font>	/*function CalcFirstPersonView( out vector CameraLocation, out rotator CameraRotation )
<a name="L2172"><font color="white">02172</font>	{
<a name="L2173"><font color="white">02173</font>		// First-person view.
<a name="L2174"><font color="white">02174</font>		CameraRotation = Rotation;
<a name="L2175"><font color="white">02175</font>		CameraLocation = CameraLocation + Pawn.EyePosition() + WalkBob + ShakeOffset;
<a name="L2176"><font color="white">02176</font>	}*/
<a name="L2177"><font color="white">02177</font>	native(497) static final function CalcFirstPersonView( out vector CameraLocation, out rotator CameraRotation );
<a name="L2178"><font color="white">02178</font>	
<a name="L2179"><font color="white">02179</font>	event PlayerCalcView(out actor ViewActor, out vector CameraLocation, out rotator CameraRotation )
<a name="L2180"><font color="white">02180</font>	{
<a name="L2181"><font color="white">02181</font>		local Pawn PTarget;
<a name="L2182"><font color="white">02182</font>	
<a name="L2183"><font color="white">02183</font>		if ( (ViewTarget == None) || ViewTarget.bDeleteMe )
<a name="L2184"><font color="white">02184</font>		{
<a name="L2185"><font color="white">02185</font>			if ( (Pawn != None) &amp;&amp; !Pawn.bDeleteMe )
<a name="L2186"><font color="white">02186</font>				SetViewTarget(Pawn);
<a name="L2187"><font color="white">02187</font>			else
<a name="L2188"><font color="white">02188</font>				SetViewTarget(self);
<a name="L2189"><font color="white">02189</font>		}
<a name="L2190"><font color="white">02190</font>	
<a name="L2191"><font color="white">02191</font>		ViewActor = ViewTarget;
<a name="L2192"><font color="white">02192</font>		CameraLocation = ViewTarget.Location;
<a name="L2193"><font color="white">02193</font>	
<a name="L2194"><font color="white">02194</font>		if ( ViewTarget == Pawn )
<a name="L2195"><font color="white">02195</font>		{
<a name="L2196"><font color="white">02196</font>			if( bBehindView ) //up and behind
<a name="L2197"><font color="white">02197</font>				CalcBehindView(CameraLocation, CameraRotation, CameraDist * Pawn.Default.CollisionRadius);
<a name="L2198"><font color="white">02198</font>			else
<a name="L2199"><font color="white">02199</font>				CalcFirstPersonView( CameraLocation, CameraRotation );
<a name="L2200"><font color="white">02200</font>			return;
<a name="L2201"><font color="white">02201</font>		}
<a name="L2202"><font color="white">02202</font>		if ( ViewTarget == self )
<a name="L2203"><font color="white">02203</font>		{
<a name="L2204"><font color="white">02204</font>			CameraRotation = Rotation;
<a name="L2205"><font color="white">02205</font>			return;
<a name="L2206"><font color="white">02206</font>		}
<a name="L2207"><font color="white">02207</font>		CameraRotation = ViewTarget.Rotation;
<a name="L2208"><font color="white">02208</font>		PTarget = Pawn(ViewTarget);
<a name="L2209"><font color="white">02209</font>		if ( PTarget != None )
<a name="L2210"><font color="white">02210</font>		{
<a name="L2211"><font color="white">02211</font>			if ( Level.NetMode == NM_Client )
<a name="L2212"><font color="white">02212</font>			{
<a name="L2213"><font color="white">02213</font>				if ( PTarget.IsPlayerPawn() )
<a name="L2214"><font color="white">02214</font>				{
<a name="L2215"><font color="white">02215</font>					PTarget.SetViewRotation(TargetViewRotation);
<a name="L2216"><font color="white">02216</font>					CameraRotation = TargetViewRotation;
<a name="L2217"><font color="white">02217</font>				}
<a name="L2218"><font color="white">02218</font>				PTarget.EyeHeight = TargetEyeHeight;
<a name="L2219"><font color="white">02219</font>				if ( PTarget.Weapon != None )
<a name="L2220"><font color="white">02220</font>					PTarget.Weapon.PlayerViewOffset = TargetWeaponViewOffset;
<a name="L2221"><font color="white">02221</font>			}
<a name="L2222"><font color="white">02222</font>			else if ( PTarget.IsPlayerPawn() )
<a name="L2223"><font color="white">02223</font>				CameraRotation = PTarget.GetViewRotation();
<a name="L2224"><font color="white">02224</font>			if ( !bBehindView )
<a name="L2225"><font color="white">02225</font>				CameraLocation += PTarget.EyePosition();
<a name="L2226"><font color="white">02226</font>		}
<a name="L2227"><font color="white">02227</font>		if ( bBehindView )
<a name="L2228"><font color="white">02228</font>		{
<a name="L2229"><font color="white">02229</font>			CameraLocation = CameraLocation + (ViewTarget.Default.CollisionHeight - ViewTarget.CollisionHeight) * vect(0,0,1);
<a name="L2230"><font color="white">02230</font>			CalcBehindView(CameraLocation, CameraRotation, CameraDist * ViewTarget.Default.CollisionRadius);
<a name="L2231"><font color="white">02231</font>		}
<a name="L2232"><font color="white">02232</font>	}
<a name="L2233"><font color="white">02233</font>	
<a name="L2234"><font color="white">02234</font>	/*function CheckShake(out float MaxOffset, out float Offset, out float Rate, out float Time)
<a name="L2235"><font color="white">02235</font>	{
<a name="L2236"><font color="white">02236</font>		if ( abs(Offset) &lt; abs(MaxOffset) )
<a name="L2237"><font color="white">02237</font>			return;
<a name="L2238"><font color="white">02238</font>	
<a name="L2239"><font color="white">02239</font>		Offset = MaxOffset;
<a name="L2240"><font color="white">02240</font>		if ( Time &gt; 1 )
<a name="L2241"><font color="white">02241</font>		{
<a name="L2242"><font color="white">02242</font>			if ( Time * abs(MaxOffset/Rate) &lt;= 1 )
<a name="L2243"><font color="white">02243</font>				MaxOffset = MaxOffset * (1/Time - 1);
<a name="L2244"><font color="white">02244</font>			else
<a name="L2245"><font color="white">02245</font>				MaxOffset *= -1;
<a name="L2246"><font color="white">02246</font>			Time -= 1;
<a name="L2247"><font color="white">02247</font>			Rate *= -1;
<a name="L2248"><font color="white">02248</font>		}
<a name="L2249"><font color="white">02249</font>		else
<a name="L2250"><font color="white">02250</font>		{
<a name="L2251"><font color="white">02251</font>			MaxOffset = 0;
<a name="L2252"><font color="white">02252</font>			Offset = 0;
<a name="L2253"><font color="white">02253</font>			Rate = 0;
<a name="L2254"><font color="white">02254</font>		}
<a name="L2255"><font color="white">02255</font>	}
<a name="L2256"><font color="white">02256</font>	
<a name="L2257"><font color="white">02257</font>	function ViewShake(float DeltaTime)
<a name="L2258"><font color="white">02258</font>	{
<a name="L2259"><font color="white">02259</font>		local Rotator ViewRotation;
<a name="L2260"><font color="white">02260</font>		local float FRoll;
<a name="L2261"><font color="white">02261</font>	
<a name="L2262"><font color="white">02262</font>		if ( ShakeOffsetRate != vect(0,0,0) )
<a name="L2263"><font color="white">02263</font>		{
<a name="L2264"><font color="white">02264</font>			// modify shake offset
<a name="L2265"><font color="white">02265</font>			ShakeOffset.X += DeltaTime * ShakeOffsetRate.X;
<a name="L2266"><font color="white">02266</font>			CheckShake(MaxShakeOffset.X, ShakeOffset.X, ShakeOffsetRate.X, ShakeOffsetTime.X);
<a name="L2267"><font color="white">02267</font>	
<a name="L2268"><font color="white">02268</font>			ShakeOffset.Y += DeltaTime * ShakeOffsetRate.Y;
<a name="L2269"><font color="white">02269</font>			CheckShake(MaxShakeOffset.Y, ShakeOffset.Y, ShakeOffsetRate.Y, ShakeOffsetTime.Y);
<a name="L2270"><font color="white">02270</font>	
<a name="L2271"><font color="white">02271</font>			ShakeOffset.Z += DeltaTime * ShakeOffsetRate.Z;
<a name="L2272"><font color="white">02272</font>			CheckShake(MaxShakeOffset.Z, ShakeOffset.Z, ShakeOffsetRate.Z, ShakeOffsetTime.Z);
<a name="L2273"><font color="white">02273</font>		}
<a name="L2274"><font color="white">02274</font>	
<a name="L2275"><font color="white">02275</font>		ViewRotation = Rotation;
<a name="L2276"><font color="white">02276</font>	
<a name="L2277"><font color="white">02277</font>		if ( ShakeRollRate != 0 )
<a name="L2278"><font color="white">02278</font>		{
<a name="L2279"><font color="white">02279</font>			ViewRotation.Roll = ((ViewRotation.Roll &amp; 65535) + ShakeRollRate * DeltaTime) &amp; 65535;
<a name="L2280"><font color="white">02280</font>			if ( ViewRotation.Roll &gt; 32768 )
<a name="L2281"><font color="white">02281</font>				ViewRotation.Roll -= 65536;
<a name="L2282"><font color="white">02282</font>			FRoll = ViewRotation.Roll;
<a name="L2283"><font color="white">02283</font>			CheckShake(MaxShakeRoll, FRoll, ShakeRollRate, ShakeRollTime);
<a name="L2284"><font color="white">02284</font>			ViewRotation.Roll = FRoll;
<a name="L2285"><font color="white">02285</font>		}
<a name="L2286"><font color="white">02286</font>		else if ( bZeroRoll )
<a name="L2287"><font color="white">02287</font>			ViewRotation.Roll = 0;
<a name="L2288"><font color="white">02288</font>		SetRotation(ViewRotation);
<a name="L2289"><font color="white">02289</font>	}*/
<a name="L2290"><font color="white">02290</font>	native(496) static final function ViewShake(float DeltaTime);
<a name="L2291"><font color="white">02291</font>	
<a name="L2292"><font color="white">02292</font>	function bool TurnTowardNearestEnemy();
<a name="L2293"><font color="white">02293</font>	
<a name="L2294"><font color="white">02294</font>	function TurnAround()
<a name="L2295"><font color="white">02295</font>	{
<a name="L2296"><font color="white">02296</font>		if ( !bSetTurnRot )
<a name="L2297"><font color="white">02297</font>		{
<a name="L2298"><font color="white">02298</font>			TurnRot180 = Rotation;
<a name="L2299"><font color="white">02299</font>			TurnRot180.Yaw += 32768;
<a name="L2300"><font color="white">02300</font>			bSetTurnRot = true;
<a name="L2301"><font color="white">02301</font>		}
<a name="L2302"><font color="white">02302</font>	
<a name="L2303"><font color="white">02303</font>		DesiredRotation = TurnRot180;
<a name="L2304"><font color="white">02304</font>		bRotateToDesired = ( DesiredRotation.Yaw != Rotation.Yaw );
<a name="L2305"><font color="white">02305</font>	}
<a name="L2306"><font color="white">02306</font>	
<a name="L2307"><font color="white">02307</font>	function UpdateRotation(float DeltaTime, float maxPitch)
<a name="L2308"><font color="white">02308</font>	{
<a name="L2309"><font color="white">02309</font>		local rotator newRotation, ViewRotation;
<a name="L2310"><font color="white">02310</font>	
<a name="L2311"><font color="white">02311</font>		if ( bInterpolating || ((Pawn != None) &amp;&amp; Pawn.bInterpolating) )
<a name="L2312"><font color="white">02312</font>		{
<a name="L2313"><font color="white">02313</font>			ViewShake(deltaTime);
<a name="L2314"><font color="white">02314</font>			return;
<a name="L2315"><font color="white">02315</font>		}
<a name="L2316"><font color="white">02316</font>		ViewRotation = Rotation;
<a name="L2317"><font color="white">02317</font>		DesiredRotation = ViewRotation; //save old rotation
<a name="L2318"><font color="white">02318</font>		if ( bTurnToNearest != 0 )
<a name="L2319"><font color="white">02319</font>			TurnTowardNearestEnemy();
<a name="L2320"><font color="white">02320</font>		else if ( bTurn180 != 0 )
<a name="L2321"><font color="white">02321</font>			TurnAround();
<a name="L2322"><font color="white">02322</font>		else
<a name="L2323"><font color="white">02323</font>		{
<a name="L2324"><font color="white">02324</font>			TurnTarget = None;
<a name="L2325"><font color="white">02325</font>			bRotateToDesired = false;
<a name="L2326"><font color="white">02326</font>			bSetTurnRot = false;
<a name="L2327"><font color="white">02327</font>			ViewRotation.Yaw += 32.0 * DeltaTime * aTurn;
<a name="L2328"><font color="white">02328</font>			ViewRotation.Pitch += 32.0 * DeltaTime * aLookUp;
<a name="L2329"><font color="white">02329</font>		}
<a name="L2330"><font color="white">02330</font>		ViewRotation.Pitch = ViewRotation.Pitch &amp; 65535;
<a name="L2331"><font color="white">02331</font>		If ((ViewRotation.Pitch &gt; 18000) &amp;&amp; (ViewRotation.Pitch &lt; 49152))
<a name="L2332"><font color="white">02332</font>		{
<a name="L2333"><font color="white">02333</font>			If (aLookUp &gt; 0)
<a name="L2334"><font color="white">02334</font>				ViewRotation.Pitch = 18000;
<a name="L2335"><font color="white">02335</font>			else
<a name="L2336"><font color="white">02336</font>				ViewRotation.Pitch = 49152;
<a name="L2337"><font color="white">02337</font>		}
<a name="L2338"><font color="white">02338</font>	
<a name="L2339"><font color="white">02339</font>		SetRotation(ViewRotation);
<a name="L2340"><font color="white">02340</font>		ViewShake(deltaTime);
<a name="L2341"><font color="white">02341</font>		ViewFlash(deltaTime);
<a name="L2342"><font color="white">02342</font>	
<a name="L2343"><font color="white">02343</font>		NewRotation = ViewRotation;
<a name="L2344"><font color="white">02344</font>		NewRotation.Roll = Rotation.Roll;
<a name="L2345"><font color="white">02345</font>	
<a name="L2346"><font color="white">02346</font>		if ( !bRotateToDesired &amp;&amp; (Pawn != None) &amp;&amp; (!bFreeCamera || !bBehindView) )
<a name="L2347"><font color="white">02347</font>			Pawn.FaceRotation(NewRotation, deltatime);
<a name="L2348"><font color="white">02348</font>	}
<a name="L2349"><font color="white">02349</font>	
<a name="L2350"><font color="white">02350</font>	// Player movement.
<a name="L2351"><font color="white">02351</font>	// Player Standing, walking, running, falling.
<a name="L2352"><font color="white">02352</font>	state PlayerWalking
<a name="L2353"><font color="white">02353</font>	{
<a name="L2354"><font color="white">02354</font>	ignores SeePlayer, Bump;
<a name="L2355"><font color="white">02355</font>	
<a name="L2356"><font color="white">02356</font>		function bool NotifyPhysicsVolumeChange( PhysicsVolume NewVolume )
<a name="L2357"><font color="white">02357</font>		{
<a name="L2358"><font color="white">02358</font>			if ( NewVolume.bWaterVolume )
<a name="L2359"><font color="white">02359</font>				GotoState(Pawn.WaterMovementState);
<a name="L2360"><font color="white">02360</font>			return false;
<a name="L2361"><font color="white">02361</font>		}
<a name="L2362"><font color="white">02362</font>	
<a name="L2363"><font color="white">02363</font>		function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L2364"><font color="white">02364</font>		{
<a name="L2365"><font color="white">02365</font>			local vector OldAccel;
<a name="L2366"><font color="white">02366</font>			local bool OldCrouch;
<a name="L2367"><font color="white">02367</font>	
<a name="L2368"><font color="white">02368</font>			OldAccel = Pawn.Acceleration;
<a name="L2369"><font color="white">02369</font>			Pawn.Acceleration = NewAccel;
<a name="L2370"><font color="white">02370</font>			if ( bPressedJump )
<a name="L2371"><font color="white">02371</font>				Pawn.DoJump(bUpdating);
<a name="L2372"><font color="white">02372</font>			if ( Pawn.Physics != PHYS_Falling )
<a name="L2373"><font color="white">02373</font>			{
<a name="L2374"><font color="white">02374</font>				OldCrouch = Pawn.bWantsToCrouch;
<a name="L2375"><font color="white">02375</font>				if (bDuck == 0)
<a name="L2376"><font color="white">02376</font>					Pawn.ShouldCrouch(false);
<a name="L2377"><font color="white">02377</font>				else if ( Pawn.bCanCrouch )
<a name="L2378"><font color="white">02378</font>					Pawn.ShouldCrouch(true);
<a name="L2379"><font color="white">02379</font>			}
<a name="L2380"><font color="white">02380</font>		}
<a name="L2381"><font color="white">02381</font>	
<a name="L2382"><font color="white">02382</font>		function PlayerMove( float DeltaTime )
<a name="L2383"><font color="white">02383</font>		{
<a name="L2384"><font color="white">02384</font>			local vector X,Y,Z, NewAccel;
<a name="L2385"><font color="white">02385</font>			local eDoubleClickDir DoubleClickMove;
<a name="L2386"><font color="white">02386</font>			local rotator OldRotation, ViewRotation;
<a name="L2387"><font color="white">02387</font>			local float Speed2D;
<a name="L2388"><font color="white">02388</font>			local bool	bSaveJump;
<a name="L2389"><font color="white">02389</font>	
<a name="L2390"><font color="white">02390</font>			GetAxes(Pawn.Rotation,X,Y,Z);
<a name="L2391"><font color="white">02391</font>	
<a name="L2392"><font color="white">02392</font>			// Update acceleration.
<a name="L2393"><font color="white">02393</font>			NewAccel = aForward*X + aStrafe*Y;
<a name="L2394"><font color="white">02394</font>			NewAccel.Z = 0;
<a name="L2395"><font color="white">02395</font>			if ( VSize(NewAccel) &lt; 1.0 )
<a name="L2396"><font color="white">02396</font>				NewAccel = vect(0,0,0);
<a name="L2397"><font color="white">02397</font>			DoubleClickMove = PlayerInput.CheckForDoubleClickMove(DeltaTime);
<a name="L2398"><font color="white">02398</font>	
<a name="L2399"><font color="white">02399</font>			GroundPitch = 0;
<a name="L2400"><font color="white">02400</font>			ViewRotation = Rotation;
<a name="L2401"><font color="white">02401</font>			if ( Pawn.Physics == PHYS_Walking )
<a name="L2402"><font color="white">02402</font>			{
<a name="L2403"><font color="white">02403</font>				// tell pawn about any direction changes to give it a chance to play appropriate animation
<a name="L2404"><font color="white">02404</font>				//if walking, look up/down stairs - unless player is rotating view
<a name="L2405"><font color="white">02405</font>				GroundPitch = FindStairRotation(deltaTime);
<a name="L2406"><font color="white">02406</font>				if ( (bLook == 0)
<a name="L2407"><font color="white">02407</font>					&amp;&amp; (((Pawn.Acceleration != Vect(0,0,0)) &amp;&amp; bAlwaysLevel &amp;&amp; bSnapToLevel) || !bKeyboardLook) )
<a name="L2408"><font color="white">02408</font>				{
<a name="L2409"><font color="white">02409</font>					if ( bLookUpStairs || bSnapToLevel )
<a name="L2410"><font color="white">02410</font>					{
<a name="L2411"><font color="white">02411</font>						ViewRotation.Pitch = GroundPitch;
<a name="L2412"><font color="white">02412</font>					}
<a name="L2413"><font color="white">02413</font>					else if ( bCenterView )
<a name="L2414"><font color="white">02414</font>					{
<a name="L2415"><font color="white">02415</font>						ViewRotation.Pitch = ViewRotation.Pitch &amp; 65535;
<a name="L2416"><font color="white">02416</font>						if (ViewRotation.Pitch &gt; 32768)
<a name="L2417"><font color="white">02417</font>							ViewRotation.Pitch -= 65536;
<a name="L2418"><font color="white">02418</font>						ViewRotation.Pitch = ViewRotation.Pitch * (1 - 12 * FMin(0.0833, deltaTime));
<a name="L2419"><font color="white">02419</font>						if ( Abs(ViewRotation.Pitch) &lt; 1000 )
<a name="L2420"><font color="white">02420</font>							ViewRotation.Pitch = 0;
<a name="L2421"><font color="white">02421</font>					}
<a name="L2422"><font color="white">02422</font>				}
<a name="L2423"><font color="white">02423</font>	
<a name="L2424"><font color="white">02424</font>				Speed2D = Sqrt(Pawn.Velocity.X * Pawn.Velocity.X + Pawn.Velocity.Y * Pawn.Velocity.Y);
<a name="L2425"><font color="white">02425</font>				//add bobbing when walking
<a name="L2426"><font color="white">02426</font>				CheckBob(DeltaTime, Speed2D, Y);
<a name="L2427"><font color="white">02427</font>			}
<a name="L2428"><font color="white">02428</font>			else
<a name="L2429"><font color="white">02429</font>			{
<a name="L2430"><font color="white">02430</font>				if ( !bKeyboardLook &amp;&amp; (bLook == 0) &amp;&amp; bCenterView )
<a name="L2431"><font color="white">02431</font>				{
<a name="L2432"><font color="white">02432</font>					ViewRotation.Pitch = ViewRotation.Pitch &amp; 65535;
<a name="L2433"><font color="white">02433</font>					if (ViewRotation.Pitch &gt; 32768)
<a name="L2434"><font color="white">02434</font>						ViewRotation.Pitch -= 65536;
<a name="L2435"><font color="white">02435</font>					ViewRotation.Pitch = ViewRotation.Pitch * (1 - 12 * FMin(0.0833, deltaTime));
<a name="L2436"><font color="white">02436</font>					if ( Abs(ViewRotation.Pitch) &lt; 1000 )
<a name="L2437"><font color="white">02437</font>						ViewRotation.Pitch = 0;
<a name="L2438"><font color="white">02438</font>				}
<a name="L2439"><font color="white">02439</font>				BobTime = 0;
<a name="L2440"><font color="white">02440</font>				WalkBob = WalkBob * (1 - FMin(1, 8 * deltatime));
<a name="L2441"><font color="white">02441</font>			}
<a name="L2442"><font color="white">02442</font>	
<a name="L2443"><font color="white">02443</font>			// Update rotation.
<a name="L2444"><font color="white">02444</font>			SetRotation(ViewRotation);
<a name="L2445"><font color="white">02445</font>			OldRotation = Rotation;
<a name="L2446"><font color="white">02446</font>			UpdateRotation(DeltaTime, 1);
<a name="L2447"><font color="white">02447</font>	
<a name="L2448"><font color="white">02448</font>			if ( bPressedJump &amp;&amp; Pawn.CannotJumpNow() )
<a name="L2449"><font color="white">02449</font>			{
<a name="L2450"><font color="white">02450</font>				bSaveJump = true;
<a name="L2451"><font color="white">02451</font>				bPressedJump = false;
<a name="L2452"><font color="white">02452</font>			}
<a name="L2453"><font color="white">02453</font>			else
<a name="L2454"><font color="white">02454</font>				bSaveJump = false;
<a name="L2455"><font color="white">02455</font>	
<a name="L2456"><font color="white">02456</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2457"><font color="white">02457</font>				ReplicateMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2458"><font color="white">02458</font>			else
<a name="L2459"><font color="white">02459</font>				ProcessMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2460"><font color="white">02460</font>			bPressedJump = bSaveJump;
<a name="L2461"><font color="white">02461</font>		}
<a name="L2462"><font color="white">02462</font>	
<a name="L2463"><font color="white">02463</font>		function BeginState()
<a name="L2464"><font color="white">02464</font>		{
<a name="L2465"><font color="white">02465</font>			if ( Pawn.Mesh == None )
<a name="L2466"><font color="white">02466</font>				Pawn.SetMesh();
<a name="L2467"><font color="white">02467</font>			WalkBob = vect(0,0,0);
<a name="L2468"><font color="white">02468</font>			DoubleClickDir = DCLICK_None;
<a name="L2469"><font color="white">02469</font>			Pawn.ShouldCrouch(false);
<a name="L2470"><font color="white">02470</font>			bPressedJump = false;
<a name="L2471"><font color="white">02471</font>			if (Pawn.Physics != PHYS_Falling)
<a name="L2472"><font color="white">02472</font>				Pawn.SetPhysics(PHYS_Walking);
<a name="L2473"><font color="white">02473</font>			GroundPitch = 0;
<a name="L2474"><font color="white">02474</font>		}
<a name="L2475"><font color="white">02475</font>	
<a name="L2476"><font color="white">02476</font>		function EndState()
<a name="L2477"><font color="white">02477</font>		{
<a name="L2478"><font color="white">02478</font>			GroundPitch = 0;
<a name="L2479"><font color="white">02479</font>			WalkBob = vect(0,0,0);
<a name="L2480"><font color="white">02480</font>			if ( Pawn != None )
<a name="L2481"><font color="white">02481</font>				Pawn.ShouldCrouch(false);
<a name="L2482"><font color="white">02482</font>		}
<a name="L2483"><font color="white">02483</font>	}
<a name="L2484"><font color="white">02484</font>	
<a name="L2485"><font color="white">02485</font>	// player is climbing ladder
<a name="L2486"><font color="white">02486</font>	state PlayerClimbing
<a name="L2487"><font color="white">02487</font>	{
<a name="L2488"><font color="white">02488</font>	ignores SeePlayer, Bump;
<a name="L2489"><font color="white">02489</font>	
<a name="L2490"><font color="white">02490</font>		function bool NotifyPhysicsVolumeChange( PhysicsVolume NewVolume )
<a name="L2491"><font color="white">02491</font>		{
<a name="L2492"><font color="white">02492</font>			if ( NewVolume.bWaterVolume )
<a name="L2493"><font color="white">02493</font>				GotoState(Pawn.WaterMovementState);
<a name="L2494"><font color="white">02494</font>			else
<a name="L2495"><font color="white">02495</font>				GotoState(Pawn.LandMovementState);
<a name="L2496"><font color="white">02496</font>			return false;
<a name="L2497"><font color="white">02497</font>		}
<a name="L2498"><font color="white">02498</font>	
<a name="L2499"><font color="white">02499</font>		function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L2500"><font color="white">02500</font>		{
<a name="L2501"><font color="white">02501</font>			local vector OldAccel;
<a name="L2502"><font color="white">02502</font>	
<a name="L2503"><font color="white">02503</font>			OldAccel = Pawn.Acceleration;
<a name="L2504"><font color="white">02504</font>			Pawn.Acceleration = NewAccel;
<a name="L2505"><font color="white">02505</font>	
<a name="L2506"><font color="white">02506</font>			if ( bPressedJump )
<a name="L2507"><font color="white">02507</font>			{
<a name="L2508"><font color="white">02508</font>				Pawn.DoJump(bUpdating);
<a name="L2509"><font color="white">02509</font>				if ( Pawn.Physics == PHYS_Falling )
<a name="L2510"><font color="white">02510</font>					GotoState('PlayerWalking');
<a name="L2511"><font color="white">02511</font>			}
<a name="L2512"><font color="white">02512</font>		}
<a name="L2513"><font color="white">02513</font>	
<a name="L2514"><font color="white">02514</font>		function PlayerMove( float DeltaTime )
<a name="L2515"><font color="white">02515</font>		{
<a name="L2516"><font color="white">02516</font>			local vector X,Y,Z, NewAccel;
<a name="L2517"><font color="white">02517</font>			local eDoubleClickDir DoubleClickMove;
<a name="L2518"><font color="white">02518</font>			local rotator OldRotation, ViewRotation;
<a name="L2519"><font color="white">02519</font>			local float Speed2D;
<a name="L2520"><font color="white">02520</font>			local bool	bSaveJump;
<a name="L2521"><font color="white">02521</font>	
<a name="L2522"><font color="white">02522</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2523"><font color="white">02523</font>	
<a name="L2524"><font color="white">02524</font>			// Update acceleration.
<a name="L2525"><font color="white">02525</font>			//if ( Pawn.OnLadder != None )
<a name="L2526"><font color="white">02526</font>			//	NewAccel = aForward*Pawn.OnLadder.ClimbDir;
<a name="L2527"><font color="white">02527</font>			//else
<a name="L2528"><font color="white">02528</font>				NewAccel = aForward*X + aStrafe*Y;
<a name="L2529"><font color="white">02529</font>			if ( VSize(NewAccel) &lt; 1.0 )
<a name="L2530"><font color="white">02530</font>				NewAccel = vect(0,0,0);
<a name="L2531"><font color="white">02531</font>	
<a name="L2532"><font color="white">02532</font>			ViewRotation = Rotation;
<a name="L2533"><font color="white">02533</font>	
<a name="L2534"><font color="white">02534</font>			// Update rotation.
<a name="L2535"><font color="white">02535</font>			SetRotation(ViewRotation);
<a name="L2536"><font color="white">02536</font>			OldRotation = Rotation;
<a name="L2537"><font color="white">02537</font>			UpdateRotation(DeltaTime, 1);
<a name="L2538"><font color="white">02538</font>	
<a name="L2539"><font color="white">02539</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2540"><font color="white">02540</font>				ReplicateMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2541"><font color="white">02541</font>			else
<a name="L2542"><font color="white">02542</font>				ProcessMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2543"><font color="white">02543</font>			bPressedJump = bSaveJump;
<a name="L2544"><font color="white">02544</font>		}
<a name="L2545"><font color="white">02545</font>	
<a name="L2546"><font color="white">02546</font>		function BeginState()
<a name="L2547"><font color="white">02547</font>		{
<a name="L2548"><font color="white">02548</font>			Pawn.ShouldCrouch(false);
<a name="L2549"><font color="white">02549</font>			bPressedJump = false;
<a name="L2550"><font color="white">02550</font>		}
<a name="L2551"><font color="white">02551</font>	
<a name="L2552"><font color="white">02552</font>		function EndState()
<a name="L2553"><font color="white">02553</font>		{
<a name="L2554"><font color="white">02554</font>			if ( Pawn != None )
<a name="L2555"><font color="white">02555</font>				Pawn.ShouldCrouch(false);
<a name="L2556"><font color="white">02556</font>		}
<a name="L2557"><font color="white">02557</font>	}
<a name="L2558"><font color="white">02558</font>	
<a name="L2559"><font color="white">02559</font>	
<a name="L2560"><font color="white">02560</font>	// Player movement.
<a name="L2561"><font color="white">02561</font>	// Player walking on walls
<a name="L2562"><font color="white">02562</font>	state PlayerSpidering
<a name="L2563"><font color="white">02563</font>	{
<a name="L2564"><font color="white">02564</font>	ignores SeePlayer, Bump;
<a name="L2565"><font color="white">02565</font>	
<a name="L2566"><font color="white">02566</font>		event bool NotifyHitWall(vector HitNormal, actor HitActor)
<a name="L2567"><font color="white">02567</font>		{
<a name="L2568"><font color="white">02568</font>			// FIXME - pawn should have bool identifying if this was a voluntary jump
<a name="L2569"><font color="white">02569</font>			Pawn.SetPhysics(PHYS_Spider);
<a name="L2570"><font color="white">02570</font>			Pawn.SetBase(HitActor, HitNormal);
<a name="L2571"><font color="white">02571</font>			return true;
<a name="L2572"><font color="white">02572</font>		}
<a name="L2573"><font color="white">02573</font>	
<a name="L2574"><font color="white">02574</font>		// if spider mode, update rotation based on floor
<a name="L2575"><font color="white">02575</font>		function UpdateRotation(float DeltaTime, float maxPitch)
<a name="L2576"><font color="white">02576</font>		{
<a name="L2577"><font color="white">02577</font>			local rotator TempRot, ViewRotation;
<a name="L2578"><font color="white">02578</font>			local vector MyFloor, CrossDir, FwdDir, OldFwdDir, OldX, RealFloor;
<a name="L2579"><font color="white">02579</font>	
<a name="L2580"><font color="white">02580</font>			if ( bInterpolating || Pawn.bInterpolating )
<a name="L2581"><font color="white">02581</font>			{
<a name="L2582"><font color="white">02582</font>				ViewShake(deltaTime);
<a name="L2583"><font color="white">02583</font>				return;
<a name="L2584"><font color="white">02584</font>			}
<a name="L2585"><font color="white">02585</font>	
<a name="L2586"><font color="white">02586</font>			TurnTarget = None;
<a name="L2587"><font color="white">02587</font>			bRotateToDesired = false;
<a name="L2588"><font color="white">02588</font>			bSetTurnRot = false;
<a name="L2589"><font color="white">02589</font>	
<a name="L2590"><font color="white">02590</font>			if ( (Pawn.Base == None) || (Pawn.Floor == vect(0,0,0)) )
<a name="L2591"><font color="white">02591</font>				MyFloor = vect(0,0,1);
<a name="L2592"><font color="white">02592</font>			else
<a name="L2593"><font color="white">02593</font>				MyFloor = Pawn.Floor;
<a name="L2594"><font color="white">02594</font>	
<a name="L2595"><font color="white">02595</font>			if ( MyFloor != OldFloor )
<a name="L2596"><font color="white">02596</font>			{
<a name="L2597"><font color="white">02597</font>				// smoothly change floor
<a name="L2598"><font color="white">02598</font>				RealFloor = MyFloor;
<a name="L2599"><font color="white">02599</font>				MyFloor = Normal(6*DeltaTime * MyFloor + (1 - 6*DeltaTime) * OldFloor);
<a name="L2600"><font color="white">02600</font>				if ( (RealFloor Dot MyFloor) &gt; 0.999 )
<a name="L2601"><font color="white">02601</font>					MyFloor = RealFloor;
<a name="L2602"><font color="white">02602</font>	
<a name="L2603"><font color="white">02603</font>				// translate view direction
<a name="L2604"><font color="white">02604</font>				CrossDir = Normal(RealFloor Cross OldFloor);
<a name="L2605"><font color="white">02605</font>				FwdDir = CrossDir Cross MyFloor;
<a name="L2606"><font color="white">02606</font>				OldFwdDir = CrossDir Cross OldFloor;
<a name="L2607"><font color="white">02607</font>				ViewX = MyFloor * (OldFloor Dot ViewX)
<a name="L2608"><font color="white">02608</font>							+ CrossDir * (CrossDir Dot ViewX)
<a name="L2609"><font color="white">02609</font>							+ FwdDir * (OldFwdDir Dot ViewX);
<a name="L2610"><font color="white">02610</font>				ViewX = Normal(ViewX);
<a name="L2611"><font color="white">02611</font>	
<a name="L2612"><font color="white">02612</font>				ViewZ = MyFloor * (OldFloor Dot ViewZ)
<a name="L2613"><font color="white">02613</font>							+ CrossDir * (CrossDir Dot ViewZ)
<a name="L2614"><font color="white">02614</font>							+ FwdDir * (OldFwdDir Dot ViewZ);
<a name="L2615"><font color="white">02615</font>				ViewZ = Normal(ViewZ);
<a name="L2616"><font color="white">02616</font>				OldFloor = MyFloor;
<a name="L2617"><font color="white">02617</font>				ViewY = Normal(MyFloor Cross ViewX);
<a name="L2618"><font color="white">02618</font>			}
<a name="L2619"><font color="white">02619</font>	
<a name="L2620"><font color="white">02620</font>			if ( (aTurn != 0) || (aLookUp != 0) )
<a name="L2621"><font color="white">02621</font>			{
<a name="L2622"><font color="white">02622</font>				// adjust Yaw based on aTurn
<a name="L2623"><font color="white">02623</font>				if ( aTurn != 0 )
<a name="L2624"><font color="white">02624</font>					ViewX = Normal(ViewX + 2 * ViewY * Sin(0.0005*DeltaTime*aTurn));
<a name="L2625"><font color="white">02625</font>	
<a name="L2626"><font color="white">02626</font>				// adjust Pitch based on aLookUp
<a name="L2627"><font color="white">02627</font>				if ( aLookUp != 0 )
<a name="L2628"><font color="white">02628</font>				{
<a name="L2629"><font color="white">02629</font>					OldX = ViewX;
<a name="L2630"><font color="white">02630</font>					ViewX = Normal(ViewX + 2 * ViewZ * Sin(0.0005*DeltaTime*aLookUp));
<a name="L2631"><font color="white">02631</font>					ViewZ = Normal(ViewX Cross ViewY);
<a name="L2632"><font color="white">02632</font>	
<a name="L2633"><font color="white">02633</font>					// bound max pitch
<a name="L2634"><font color="white">02634</font>					if ( (ViewZ Dot MyFloor) &lt; 0.707   )
<a name="L2635"><font color="white">02635</font>					{
<a name="L2636"><font color="white">02636</font>						OldX = Normal(OldX - MyFloor * (MyFloor Dot OldX));
<a name="L2637"><font color="white">02637</font>						if ( (ViewX Dot MyFloor) &gt; 0)
<a name="L2638"><font color="white">02638</font>							ViewX = Normal(OldX + MyFloor);
<a name="L2639"><font color="white">02639</font>						else
<a name="L2640"><font color="white">02640</font>							ViewX = Normal(OldX - MyFloor);
<a name="L2641"><font color="white">02641</font>	
<a name="L2642"><font color="white">02642</font>						ViewZ = Normal(ViewX Cross ViewY);
<a name="L2643"><font color="white">02643</font>					}
<a name="L2644"><font color="white">02644</font>				}
<a name="L2645"><font color="white">02645</font>	
<a name="L2646"><font color="white">02646</font>				// calculate new Y axis
<a name="L2647"><font color="white">02647</font>				ViewY = Normal(MyFloor Cross ViewX);
<a name="L2648"><font color="white">02648</font>			}
<a name="L2649"><font color="white">02649</font>			ViewRotation =  OrthoRotation(ViewX,ViewY,ViewZ);
<a name="L2650"><font color="white">02650</font>			SetRotation(ViewRotation);
<a name="L2651"><font color="white">02651</font>			ViewShake(deltaTime);
<a name="L2652"><font color="white">02652</font>			ViewFlash(deltaTime);
<a name="L2653"><font color="white">02653</font>			Pawn.FaceRotation(ViewRotation, deltaTime );
<a name="L2654"><font color="white">02654</font>		}
<a name="L2655"><font color="white">02655</font>	
<a name="L2656"><font color="white">02656</font>		function bool NotifyLanded(vector HitNormal)
<a name="L2657"><font color="white">02657</font>		{
<a name="L2658"><font color="white">02658</font>			Pawn.SetPhysics(PHYS_Spider);
<a name="L2659"><font color="white">02659</font>			if ( bUpdating )
<a name="L2660"><font color="white">02660</font>				return true;
<a name="L2661"><font color="white">02661</font>			LandBob = FMin(50, 0.055 * Pawn.Velocity.Z);
<a name="L2662"><font color="white">02662</font>			return false;
<a name="L2663"><font color="white">02663</font>		}
<a name="L2664"><font color="white">02664</font>	
<a name="L2665"><font color="white">02665</font>		function bool NotifyPhysicsVolumeChange( PhysicsVolume NewVolume )
<a name="L2666"><font color="white">02666</font>		{
<a name="L2667"><font color="white">02667</font>			if ( NewVolume.bWaterVolume )
<a name="L2668"><font color="white">02668</font>				GotoState(Pawn.WaterMovementState);
<a name="L2669"><font color="white">02669</font>			return false;
<a name="L2670"><font color="white">02670</font>		}
<a name="L2671"><font color="white">02671</font>	
<a name="L2672"><font color="white">02672</font>		function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L2673"><font color="white">02673</font>		{
<a name="L2674"><font color="white">02674</font>			local vector OldAccel;
<a name="L2675"><font color="white">02675</font>	
<a name="L2676"><font color="white">02676</font>			OldAccel = Pawn.Acceleration;
<a name="L2677"><font color="white">02677</font>			Pawn.Acceleration = NewAccel;
<a name="L2678"><font color="white">02678</font>	
<a name="L2679"><font color="white">02679</font>			if ( bPressedJump )
<a name="L2680"><font color="white">02680</font>				Pawn.DoJump(bUpdating);
<a name="L2681"><font color="white">02681</font>		}
<a name="L2682"><font color="white">02682</font>	
<a name="L2683"><font color="white">02683</font>		function PlayerMove( float DeltaTime )
<a name="L2684"><font color="white">02684</font>		{
<a name="L2685"><font color="white">02685</font>			local vector NewAccel;
<a name="L2686"><font color="white">02686</font>			local eDoubleClickDir OldDoubleClick;
<a name="L2687"><font color="white">02687</font>			local eDoubleClickDir DoubleClickMove;
<a name="L2688"><font color="white">02688</font>			local rotator OldRotation, ViewRotation;
<a name="L2689"><font color="white">02689</font>			local float Speed2D;
<a name="L2690"><font color="white">02690</font>			local bool	bSaveJump;
<a name="L2691"><font color="white">02691</font>	
<a name="L2692"><font color="white">02692</font>			GroundPitch = 0;
<a name="L2693"><font color="white">02693</font>			ViewRotation = Rotation;
<a name="L2694"><font color="white">02694</font>	
<a name="L2695"><font color="white">02695</font>			if ( !bKeyboardLook &amp;&amp; (bLook == 0) &amp;&amp; bCenterView )
<a name="L2696"><font color="white">02696</font>			{
<a name="L2697"><font color="white">02697</font>				// FIXME - center view rotation based on current floor
<a name="L2698"><font color="white">02698</font>			}
<a name="L2699"><font color="white">02699</font>			BobTime = 0;
<a name="L2700"><font color="white">02700</font>			WalkBob = WalkBob * (1 - FMin(1, 8 * deltatime));
<a name="L2701"><font color="white">02701</font>	
<a name="L2702"><font color="white">02702</font>			// Update rotation.
<a name="L2703"><font color="white">02703</font>			SetRotation(ViewRotation);
<a name="L2704"><font color="white">02704</font>			OldRotation = Rotation;
<a name="L2705"><font color="white">02705</font>			UpdateRotation(DeltaTime, 1);
<a name="L2706"><font color="white">02706</font>	
<a name="L2707"><font color="white">02707</font>			// Update acceleration.
<a name="L2708"><font color="white">02708</font>			NewAccel = aForward*Normal(ViewX - OldFloor * (OldFloor Dot ViewX)) + aStrafe*ViewY;
<a name="L2709"><font color="white">02709</font>			if ( VSize(NewAccel) &lt; 1.0 )
<a name="L2710"><font color="white">02710</font>				NewAccel = vect(0,0,0);
<a name="L2711"><font color="white">02711</font>	
<a name="L2712"><font color="white">02712</font>			if ( bPressedJump &amp;&amp; Pawn.CannotJumpNow() )
<a name="L2713"><font color="white">02713</font>			{
<a name="L2714"><font color="white">02714</font>				bSaveJump = true;
<a name="L2715"><font color="white">02715</font>				bPressedJump = false;
<a name="L2716"><font color="white">02716</font>			}
<a name="L2717"><font color="white">02717</font>			else
<a name="L2718"><font color="white">02718</font>				bSaveJump = false;
<a name="L2719"><font color="white">02719</font>	
<a name="L2720"><font color="white">02720</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2721"><font color="white">02721</font>				ReplicateMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2722"><font color="white">02722</font>			else
<a name="L2723"><font color="white">02723</font>				ProcessMove(DeltaTime, NewAccel, DoubleClickMove, OldRotation - Rotation);
<a name="L2724"><font color="white">02724</font>			bPressedJump = bSaveJump;
<a name="L2725"><font color="white">02725</font>		}
<a name="L2726"><font color="white">02726</font>	
<a name="L2727"><font color="white">02727</font>		function BeginState()
<a name="L2728"><font color="white">02728</font>		{
<a name="L2729"><font color="white">02729</font>			local Rotator NewRot;
<a name="L2730"><font color="white">02730</font>	
<a name="L2731"><font color="white">02731</font>			if ( Pawn.Mesh == None )
<a name="L2732"><font color="white">02732</font>				Pawn.SetMesh();
<a name="L2733"><font color="white">02733</font>			OldFloor = vect(0,0,1);
<a name="L2734"><font color="white">02734</font>			GetAxes(Rotation,ViewX,ViewY,ViewZ);
<a name="L2735"><font color="white">02735</font>			WalkBob = vect(0,0,0);
<a name="L2736"><font color="white">02736</font>			DoubleClickDir = DCLICK_None;
<a name="L2737"><font color="white">02737</font>			Pawn.ShouldCrouch(false);
<a name="L2738"><font color="white">02738</font>			bPressedJump = false;
<a name="L2739"><font color="white">02739</font>			if (Pawn.Physics != PHYS_Falling)
<a name="L2740"><font color="white">02740</font>				Pawn.SetPhysics(PHYS_Spider);
<a name="L2741"><font color="white">02741</font>			GroundPitch = 0;
<a name="L2742"><font color="white">02742</font>			Pawn.bCrawler = true;
<a name="L2743"><font color="white">02743</font>			Pawn.SetCollisionSize(Pawn.Default.CollisionHeight,Pawn.Default.CollisionHeight);
<a name="L2744"><font color="white">02744</font>		}
<a name="L2745"><font color="white">02745</font>	
<a name="L2746"><font color="white">02746</font>		function EndState()
<a name="L2747"><font color="white">02747</font>		{
<a name="L2748"><font color="white">02748</font>			GroundPitch = 0;
<a name="L2749"><font color="white">02749</font>			WalkBob = vect(0,0,0);
<a name="L2750"><font color="white">02750</font>			if ( Pawn != None )
<a name="L2751"><font color="white">02751</font>			{
<a name="L2752"><font color="white">02752</font>				Pawn.SetCollisionSize(Pawn.Default.CollisionRadius,Pawn.Default.CollisionHeight);
<a name="L2753"><font color="white">02753</font>				Pawn.ShouldCrouch(false);
<a name="L2754"><font color="white">02754</font>				Pawn.bCrawler = Pawn.Default.bCrawler;
<a name="L2755"><font color="white">02755</font>			}
<a name="L2756"><font color="white">02756</font>		}
<a name="L2757"><font color="white">02757</font>	}
<a name="L2758"><font color="white">02758</font>	
<a name="L2759"><font color="white">02759</font>	// Player movement.
<a name="L2760"><font color="white">02760</font>	// Player Swimming
<a name="L2761"><font color="white">02761</font>	state PlayerSwimming
<a name="L2762"><font color="white">02762</font>	{
<a name="L2763"><font color="white">02763</font>	ignores SeePlayer, Bump;
<a name="L2764"><font color="white">02764</font>	
<a name="L2765"><font color="white">02765</font>		function bool WantsSmoothedView()
<a name="L2766"><font color="white">02766</font>		{
<a name="L2767"><font color="white">02767</font>			return ( !Pawn.bJustLanded );
<a name="L2768"><font color="white">02768</font>		}
<a name="L2769"><font color="white">02769</font>	
<a name="L2770"><font color="white">02770</font>		function bool NotifyLanded(vector HitNormal)
<a name="L2771"><font color="white">02771</font>		{
<a name="L2772"><font color="white">02772</font>			if ( Pawn.PhysicsVolume.bWaterVolume )
<a name="L2773"><font color="white">02773</font>				Pawn.SetPhysics(PHYS_Swimming);
<a name="L2774"><font color="white">02774</font>			else
<a name="L2775"><font color="white">02775</font>				GotoState(Pawn.LandMovementState);
<a name="L2776"><font color="white">02776</font>			return bUpdating;
<a name="L2777"><font color="white">02777</font>		}
<a name="L2778"><font color="white">02778</font>	
<a name="L2779"><font color="white">02779</font>		function bool NotifyPhysicsVolumeChange( PhysicsVolume NewVolume )
<a name="L2780"><font color="white">02780</font>		{
<a name="L2781"><font color="white">02781</font>			local actor HitActor;
<a name="L2782"><font color="white">02782</font>			local vector HitLocation, HitNormal, checkpoint;
<a name="L2783"><font color="white">02783</font>	
<a name="L2784"><font color="white">02784</font>			if ( !NewVolume.bWaterVolume )
<a name="L2785"><font color="white">02785</font>			{
<a name="L2786"><font color="white">02786</font>				Pawn.SetPhysics(PHYS_Falling);
<a name="L2787"><font color="white">02787</font>				if (Pawn.bUpAndOut &amp;&amp; Pawn.CheckWaterJump(HitNormal)) //check for waterjump
<a name="L2788"><font color="white">02788</font>				{
<a name="L2789"><font color="white">02789</font>					Pawn.velocity.Z = 330 + 2 * Pawn.CollisionRadius; //set here so physics uses this for remainder of tick
<a name="L2790"><font color="white">02790</font>					GotoState(Pawn.LandMovementState);
<a name="L2791"><font color="white">02791</font>				}
<a name="L2792"><font color="white">02792</font>				else if ( (Pawn.Velocity.Z &gt; 160) || !Pawn.TouchingWaterVolume() )
<a name="L2793"><font color="white">02793</font>					GotoState(Pawn.LandMovementState);
<a name="L2794"><font color="white">02794</font>				else //check if in deep water
<a name="L2795"><font color="white">02795</font>				{
<a name="L2796"><font color="white">02796</font>					checkpoint = Pawn.Location;
<a name="L2797"><font color="white">02797</font>					checkpoint.Z -= (Pawn.CollisionHeight + 6.0);
<a name="L2798"><font color="white">02798</font>					HitActor = Trace(HitLocation, HitNormal, checkpoint, Pawn.Location, false);
<a name="L2799"><font color="white">02799</font>					if (HitActor != None)
<a name="L2800"><font color="white">02800</font>						GotoState(Pawn.LandMovementState);
<a name="L2801"><font color="white">02801</font>					else
<a name="L2802"><font color="white">02802</font>					{
<a name="L2803"><font color="white">02803</font>						Enable('Timer');
<a name="L2804"><font color="white">02804</font>						SetTimer(0.7,false);
<a name="L2805"><font color="white">02805</font>					}
<a name="L2806"><font color="white">02806</font>				}
<a name="L2807"><font color="white">02807</font>			}
<a name="L2808"><font color="white">02808</font>			else
<a name="L2809"><font color="white">02809</font>			{
<a name="L2810"><font color="white">02810</font>				Disable('Timer');
<a name="L2811"><font color="white">02811</font>				Pawn.SetPhysics(PHYS_Swimming);
<a name="L2812"><font color="white">02812</font>			}
<a name="L2813"><font color="white">02813</font>			return false;
<a name="L2814"><font color="white">02814</font>		}
<a name="L2815"><font color="white">02815</font>	
<a name="L2816"><font color="white">02816</font>		function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L2817"><font color="white">02817</font>		{
<a name="L2818"><font color="white">02818</font>			local vector X,Y,Z, OldAccel;
<a name="L2819"><font color="white">02819</font>	
<a name="L2820"><font color="white">02820</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2821"><font color="white">02821</font>			OldAccel = Pawn.Acceleration;
<a name="L2822"><font color="white">02822</font>			Pawn.Acceleration = NewAccel;
<a name="L2823"><font color="white">02823</font>			Pawn.bUpAndOut = ((X Dot Pawn.Acceleration) &gt; 0) &amp;&amp; ((Pawn.Acceleration.Z &gt; 0) || (Rotation.Pitch &gt; 2048));
<a name="L2824"><font color="white">02824</font>			if ( !Pawn.PhysicsVolume.bWaterVolume ) //check for waterjump
<a name="L2825"><font color="white">02825</font>				NotifyPhysicsVolumeChange(Pawn.PhysicsVolume);
<a name="L2826"><font color="white">02826</font>		}
<a name="L2827"><font color="white">02827</font>	
<a name="L2828"><font color="white">02828</font>		function PlayerMove(float DeltaTime)
<a name="L2829"><font color="white">02829</font>		{
<a name="L2830"><font color="white">02830</font>			local rotator oldRotation;
<a name="L2831"><font color="white">02831</font>			local vector X,Y,Z, NewAccel;
<a name="L2832"><font color="white">02832</font>			local float Speed2D;
<a name="L2833"><font color="white">02833</font>	
<a name="L2834"><font color="white">02834</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2835"><font color="white">02835</font>	
<a name="L2836"><font color="white">02836</font>			NewAccel = aForward*X + aStrafe*Y + aUp*vect(0,0,1);
<a name="L2837"><font color="white">02837</font>			if ( VSize(NewAccel) &lt; 1.0 )
<a name="L2838"><font color="white">02838</font>				NewAccel = vect(0,0,0);
<a name="L2839"><font color="white">02839</font>	
<a name="L2840"><font color="white">02840</font>			//add bobbing when swimming
<a name="L2841"><font color="white">02841</font>			Speed2D = Sqrt(Pawn.Velocity.X * Pawn.Velocity.X + Pawn.Velocity.Y * Pawn.Velocity.Y);
<a name="L2842"><font color="white">02842</font>			WalkBob = Y * Bob *  0.5 * Speed2D * sin(4.0 * Level.TimeSeconds);
<a name="L2843"><font color="white">02843</font>			WalkBob.Z = Bob * 1.5 * Speed2D * sin(8.0 * Level.TimeSeconds);
<a name="L2844"><font color="white">02844</font>	
<a name="L2845"><font color="white">02845</font>			// Update rotation.
<a name="L2846"><font color="white">02846</font>			oldRotation = Rotation;
<a name="L2847"><font color="white">02847</font>			UpdateRotation(DeltaTime, 2);
<a name="L2848"><font color="white">02848</font>	
<a name="L2849"><font color="white">02849</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2850"><font color="white">02850</font>				ReplicateMove(DeltaTime, NewAccel, DCLICK_None, OldRotation - Rotation);
<a name="L2851"><font color="white">02851</font>			else
<a name="L2852"><font color="white">02852</font>				ProcessMove(DeltaTime, NewAccel, DCLICK_None, OldRotation - Rotation);
<a name="L2853"><font color="white">02853</font>			bPressedJump = false;
<a name="L2854"><font color="white">02854</font>		}
<a name="L2855"><font color="white">02855</font>	
<a name="L2856"><font color="white">02856</font>		function Timer()
<a name="L2857"><font color="white">02857</font>		{
<a name="L2858"><font color="white">02858</font>			if ( !Pawn.PhysicsVolume.bWaterVolume &amp;&amp; (Role == ROLE_Authority) )
<a name="L2859"><font color="white">02859</font>				GotoState(Pawn.LandMovementState);
<a name="L2860"><font color="white">02860</font>	
<a name="L2861"><font color="white">02861</font>			Disable('Timer');
<a name="L2862"><font color="white">02862</font>		}
<a name="L2863"><font color="white">02863</font>	
<a name="L2864"><font color="white">02864</font>		function BeginState()
<a name="L2865"><font color="white">02865</font>		{
<a name="L2866"><font color="white">02866</font>			Disable('Timer');
<a name="L2867"><font color="white">02867</font>			Pawn.SetPhysics(PHYS_Swimming);
<a name="L2868"><font color="white">02868</font>		}
<a name="L2869"><font color="white">02869</font>	}
<a name="L2870"><font color="white">02870</font>	
<a name="L2871"><font color="white">02871</font>	state PlayerFlying
<a name="L2872"><font color="white">02872</font>	{
<a name="L2873"><font color="white">02873</font>	ignores SeePlayer, Bump;
<a name="L2874"><font color="white">02874</font>	
<a name="L2875"><font color="white">02875</font>		function PlayerMove(float DeltaTime)
<a name="L2876"><font color="white">02876</font>		{
<a name="L2877"><font color="white">02877</font>			local rotator newRotation;
<a name="L2878"><font color="white">02878</font>			local vector X,Y,Z;
<a name="L2879"><font color="white">02879</font>	
<a name="L2880"><font color="white">02880</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2881"><font color="white">02881</font>	
<a name="L2882"><font color="white">02882</font>			Pawn.Acceleration = aForward*X + aStrafe*Y;
<a name="L2883"><font color="white">02883</font>			if ( VSize(Pawn.Acceleration) &lt; 1.0 )
<a name="L2884"><font color="white">02884</font>				Pawn.Acceleration = vect(0,0,0);
<a name="L2885"><font color="white">02885</font>			if ( bCheatFlying &amp;&amp; (Pawn.Acceleration == vect(0,0,0)) )
<a name="L2886"><font color="white">02886</font>				Pawn.Velocity = vect(0,0,0);
<a name="L2887"><font color="white">02887</font>			// Update rotation.
<a name="L2888"><font color="white">02888</font>			UpdateRotation(DeltaTime, 2);
<a name="L2889"><font color="white">02889</font>	
<a name="L2890"><font color="white">02890</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2891"><font color="white">02891</font>				ReplicateMove(DeltaTime, Pawn.Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2892"><font color="white">02892</font>			else
<a name="L2893"><font color="white">02893</font>				ProcessMove(DeltaTime, Pawn.Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2894"><font color="white">02894</font>		}
<a name="L2895"><font color="white">02895</font>	
<a name="L2896"><font color="white">02896</font>		function BeginState()
<a name="L2897"><font color="white">02897</font>		{
<a name="L2898"><font color="white">02898</font>			Pawn.SetPhysics(PHYS_Flying);
<a name="L2899"><font color="white">02899</font>		}
<a name="L2900"><font color="white">02900</font>	}
<a name="L2901"><font color="white">02901</font>	
<a name="L2902"><font color="white">02902</font>	state PlayerHelicoptering extends PlayerFlying
<a name="L2903"><font color="white">02903</font>	{
<a name="L2904"><font color="white">02904</font>		function PlayerMove(float DeltaTime)
<a name="L2905"><font color="white">02905</font>		{
<a name="L2906"><font color="white">02906</font>			local rotator newRotation;
<a name="L2907"><font color="white">02907</font>			local vector X,Y,Z;
<a name="L2908"><font color="white">02908</font>	
<a name="L2909"><font color="white">02909</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2910"><font color="white">02910</font>	
<a name="L2911"><font color="white">02911</font>			Pawn.Acceleration = aForward*X + aStrafe*Y + aUp*vect(0,0,1);
<a name="L2912"><font color="white">02912</font>			if ( VSize(Pawn.Acceleration) &lt; 1.0 )
<a name="L2913"><font color="white">02913</font>				Pawn.Acceleration = vect(0,0,0);
<a name="L2914"><font color="white">02914</font>			if ( bCheatFlying &amp;&amp; (Pawn.Acceleration == vect(0,0,0)) )
<a name="L2915"><font color="white">02915</font>				Pawn.Velocity = vect(0,0,0);
<a name="L2916"><font color="white">02916</font>			// Update rotation.
<a name="L2917"><font color="white">02917</font>			UpdateRotation(DeltaTime, 2);
<a name="L2918"><font color="white">02918</font>	
<a name="L2919"><font color="white">02919</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2920"><font color="white">02920</font>				ReplicateMove(DeltaTime, Pawn.Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2921"><font color="white">02921</font>			else
<a name="L2922"><font color="white">02922</font>				ProcessMove(DeltaTime, Pawn.Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2923"><font color="white">02923</font>		}
<a name="L2924"><font color="white">02924</font>	}
<a name="L2925"><font color="white">02925</font>	
<a name="L2926"><font color="white">02926</font>	state BaseSpectating
<a name="L2927"><font color="white">02927</font>	{
<a name="L2928"><font color="white">02928</font>		function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot)
<a name="L2929"><font color="white">02929</font>		{
<a name="L2930"><font color="white">02930</font>			Acceleration = NewAccel;
<a name="L2931"><font color="white">02931</font>			MoveSmooth(Acceleration * DeltaTime);
<a name="L2932"><font color="white">02932</font>		}
<a name="L2933"><font color="white">02933</font>	
<a name="L2934"><font color="white">02934</font>		function PlayerMove(float DeltaTime)
<a name="L2935"><font color="white">02935</font>		{
<a name="L2936"><font color="white">02936</font>			local rotator newRotation;
<a name="L2937"><font color="white">02937</font>			local vector X,Y,Z;
<a name="L2938"><font color="white">02938</font>	
<a name="L2939"><font color="white">02939</font>			GetAxes(Rotation,X,Y,Z);
<a name="L2940"><font color="white">02940</font>	
<a name="L2941"><font color="white">02941</font>			Acceleration = 0.02 * (aForward*X + aStrafe*Y + aUp*vect(0,0,1));
<a name="L2942"><font color="white">02942</font>	
<a name="L2943"><font color="white">02943</font>			UpdateRotation(DeltaTime, 1);
<a name="L2944"><font color="white">02944</font>	
<a name="L2945"><font color="white">02945</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L2946"><font color="white">02946</font>				ReplicateMove(DeltaTime, Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2947"><font color="white">02947</font>			else
<a name="L2948"><font color="white">02948</font>				ProcessMove(DeltaTime, Acceleration, DCLICK_None, rot(0,0,0));
<a name="L2949"><font color="white">02949</font>		}
<a name="L2950"><font color="white">02950</font>	}
<a name="L2951"><font color="white">02951</font>	
<a name="L2952"><font color="white">02952</font>	state Spectating extends BaseSpectating
<a name="L2953"><font color="white">02953</font>	{
<a name="L2954"><font color="white">02954</font>		ignores SwitchWeapon, RestartLevel, ClientRestart, Suicide,
<a name="L2955"><font color="white">02955</font>		 ThrowWeapon, NotifyPhysicsVolumeChange, NotifyHeadVolumeChange;
<a name="L2956"><font color="white">02956</font>	
<a name="L2957"><font color="white">02957</font>		exec function NextWeapon()
<a name="L2958"><font color="white">02958</font>		{
<a name="L2959"><font color="white">02959</font>			Fire();
<a name="L2960"><font color="white">02960</font>		}
<a name="L2961"><font color="white">02961</font>	
<a name="L2962"><font color="white">02962</font>		exec function PrevWeapon()
<a name="L2963"><font color="white">02963</font>		{
<a name="L2964"><font color="white">02964</font>			if ( ViewTarget == self )
<a name="L2965"><font color="white">02965</font>				bBehindView = false;
<a name="L2966"><font color="white">02966</font>			else
<a name="L2967"><font color="white">02967</font>				bBehindView = true; //bChaseCam;
<a name="L2968"><font color="white">02968</font>		}
<a name="L2969"><font color="white">02969</font>	
<a name="L2970"><font color="white">02970</font>		exec function Fire( optional float F )
<a name="L2971"><font color="white">02971</font>		{
<a name="L2972"><font color="white">02972</font>			local Controller C, Pick;
<a name="L2973"><font color="white">02973</font>			local bool bFound;
<a name="L2974"><font color="white">02974</font>	
<a name="L2975"><font color="white">02975</font>			if ( Role == ROLE_Authority )
<a name="L2976"><font color="white">02976</font>			{
<a name="L2977"><font color="white">02977</font>				// view next player
<a name="L2978"><font color="white">02978</font>				for ( C=Level.ControllerList; C!=None; C=C.NextController )
<a name="L2979"><font color="white">02979</font>					if ( (C.Pawn != None) &amp;&amp; Level.Game.CanSpectate(self,C.Pawn) )
<a name="L2980"><font color="white">02980</font>					{
<a name="L2981"><font color="white">02981</font>						if ( Pick == None )
<a name="L2982"><font color="white">02982</font>							Pick = C;
<a name="L2983"><font color="white">02983</font>						if ( bFound )
<a name="L2984"><font color="white">02984</font>						{
<a name="L2985"><font color="white">02985</font>							Pick = C;
<a name="L2986"><font color="white">02986</font>							break;
<a name="L2987"><font color="white">02987</font>						}
<a name="L2988"><font color="white">02988</font>						else
<a name="L2989"><font color="white">02989</font>							bFound = ( ViewTarget == C.Pawn );
<a name="L2990"><font color="white">02990</font>					}
<a name="L2991"><font color="white">02991</font>				SetViewTarget(Pick.Pawn);
<a name="L2992"><font color="white">02992</font>				if ( ViewTarget == self )
<a name="L2993"><font color="white">02993</font>					bBehindView = false;
<a name="L2994"><font color="white">02994</font>				else
<a name="L2995"><font color="white">02995</font>					bBehindView = true; //bChaseCam;
<a name="L2996"><font color="white">02996</font>			}
<a name="L2997"><font color="white">02997</font>		}
<a name="L2998"><font color="white">02998</font>	
<a name="L2999"><font color="white">02999</font>		// Return to spectator's own camera.
<a name="L3000"><font color="white">03000</font>		exec function AltFire( optional float F )
<a name="L3001"><font color="white">03001</font>		{
<a name="L3002"><font color="white">03002</font>			bBehindView = false;
<a name="L3003"><font color="white">03003</font>			SetViewtarget(self);
<a name="L3004"><font color="white">03004</font>			ClientMessage(OwnCamera, 'Event');
<a name="L3005"><font color="white">03005</font>		}
<a name="L3006"><font color="white">03006</font>	
<a name="L3007"><font color="white">03007</font>		function BeginState()
<a name="L3008"><font color="white">03008</font>		{
<a name="L3009"><font color="white">03009</font>			if ( Pawn != None )
<a name="L3010"><font color="white">03010</font>			{
<a name="L3011"><font color="white">03011</font>				SetLocation(Pawn.Location);
<a name="L3012"><font color="white">03012</font>				UnPossess();
<a name="L3013"><font color="white">03013</font>			}
<a name="L3014"><font color="white">03014</font>			bCollideWorld = true;
<a name="L3015"><font color="white">03015</font>		}
<a name="L3016"><font color="white">03016</font>	
<a name="L3017"><font color="white">03017</font>		function EndState()
<a name="L3018"><font color="white">03018</font>		{
<a name="L3019"><font color="white">03019</font>			PlayerReplicationInfo.bIsSpectator = false;
<a name="L3020"><font color="white">03020</font>			bCollideWorld = false;
<a name="L3021"><font color="white">03021</font>		}
<a name="L3022"><font color="white">03022</font>	}
<a name="L3023"><font color="white">03023</font>	
<a name="L3024"><font color="white">03024</font>	//_____________________________________________________________________________
<a name="L3025"><font color="white">03025</font>	auto state PlayerWaiting extends BaseSpectating
<a name="L3026"><font color="white">03026</font>	{
<a name="L3027"><font color="white">03027</font>	    ignores SeePlayer, NotifyBump, TakeDamage, PhysicsVolumeChange;
<a name="L3028"><font color="white">03028</font>	    function ProcessMove(float DeltaTime, vector NewAccel, eDoubleClickDir DoubleClickMove, rotator DeltaRot);
<a name="L3029"><font color="white">03029</font>	    function PlayerMove(float DeltaTime);
<a name="L3030"><font color="white">03030</font>	    exec function Jump( optional float F );
<a name="L3031"><font color="white">03031</font>	    exec function Suicide();
<a name="L3032"><font color="white">03032</font>	
<a name="L3033"><font color="white">03033</font>	    function ChangeTeam( int N )
<a name="L3034"><font color="white">03034</font>	    {
<a name="L3035"><font color="white">03035</font>	      Level.Game.ChangeTeam(self, N);
<a name="L3036"><font color="white">03036</font>	    }
<a name="L3037"><font color="white">03037</font>	
<a name="L3038"><font color="white">03038</font>	    function ServerReStartPlayer()
<a name="L3039"><font color="white">03039</font>	    {
<a name="L3040"><font color="white">03040</font>	      Log(&quot;PlayerWaiting ServerReStartPlayer&quot;@self);
<a name="L3041"><font color="white">03041</font>	      if ( Level.TimeSeconds &lt; WaitDelay )
<a name="L3042"><font color="white">03042</font>	      {
<a name="L3043"><font color="white">03043</font>	        Log(&quot;  Cancel ServerReStartPlayer because WaitDelay&quot;@WaitDelay@&quot;&gt;Level.TimeSeconds&quot;@Level.TimeSeconds);
<a name="L3044"><font color="white">03044</font>	        return;
<a name="L3045"><font color="white">03045</font>	      }
<a name="L3046"><font color="white">03046</font>	      if ( Level.NetMode == NM_Client )
<a name="L3047"><font color="white">03047</font>	      {
<a name="L3048"><font color="white">03048</font>	        Log(&quot;  Cancel ServerReStartPlayer because Client&quot;);
<a name="L3049"><font color="white">03049</font>	        return;
<a name="L3050"><font color="white">03050</font>	      }
<a name="L3051"><font color="white">03051</font>	      if ( Level.Game.bWaitingToStartMatch )
<a name="L3052"><font color="white">03052</font>	      {
<a name="L3053"><font color="white">03053</font>	        Log(&quot;  Set PRI&quot;@PlayerReplicationInfo@&quot;ReadyToPlay&quot;);
<a name="L3054"><font color="white">03054</font>	        PlayerReplicationInfo.bReadyToPlay = true;
<a name="L3055"><font color="white">03055</font>	      }
<a name="L3056"><font color="white">03056</font>	      else
<a name="L3057"><font color="white">03057</font>	      {
<a name="L3058"><font color="white">03058</font>	        Log(&quot;  Restart Player&quot;@self);
<a name="L3059"><font color="white">03059</font>	        Level.Game.RestartPlayer(self);
<a name="L3060"><font color="white">03060</font>	      }
<a name="L3061"><font color="white">03061</font>	    }
<a name="L3062"><font color="white">03062</font>	
<a name="L3063"><font color="white">03063</font>	    exec function Fire(optional float F)
<a name="L3064"><font color="white">03064</font>	    {
<a name="L3065"><font color="white">03065</font>	      Log(&quot;PlayerWaiting Fire&quot;@self);
<a name="L3066"><font color="white">03066</font>	      ServerReStartPlayer();
<a name="L3067"><font color="white">03067</font>	    }
<a name="L3068"><font color="white">03068</font>	
<a name="L3069"><font color="white">03069</font>	    exec function AltFire(optional float F);
<a name="L3070"><font color="white">03070</font>	
<a name="L3071"><font color="white">03071</font>	    function EndState()
<a name="L3072"><font color="white">03072</font>	    {
<a name="L3073"><font color="white">03073</font>	      if ( Pawn != None )
<a name="L3074"><font color="white">03074</font>	        Pawn.SetMesh();
<a name="L3075"><font color="white">03075</font>	      PlayerReplicationInfo.SetWaitingPlayer(false);
<a name="L3076"><font color="white">03076</font>	      bCollideWorld = false;
<a name="L3077"><font color="white">03077</font>	      Log(&quot;PlayerWaiting EndState&quot;@self);
<a name="L3078"><font color="white">03078</font>	    }
<a name="L3079"><font color="white">03079</font>	
<a name="L3080"><font color="white">03080</font>	    function BeginState()
<a name="L3081"><font color="white">03081</font>	    {
<a name="L3082"><font color="white">03082</font>	      if ( PlayerReplicationInfo != None )
<a name="L3083"><font color="white">03083</font>	        PlayerReplicationInfo.SetWaitingPlayer(true);
<a name="L3084"><font color="white">03084</font>	      bCollideWorld = true;
<a name="L3085"><font color="white">03085</font>	      myHUD.bShowScores = false;
<a name="L3086"><font color="white">03086</font>	      Log(&quot;PlayerWaiting BeginState&quot;@self);
<a name="L3087"><font color="white">03087</font>	    }
<a name="L3088"><font color="white">03088</font>	}
<a name="L3089"><font color="white">03089</font>	/*
<a name="L3090"><font color="white">03090</font>	auto state PlayerWaiting
<a name="L3091"><font color="white">03091</font>	{
<a name="L3092"><font color="white">03092</font>	    function EndState()
<a name="L3093"><font color="white">03093</font>	    {
<a name="L3094"><font color="white">03094</font>	      if ( Pawn != None )
<a name="L3095"><font color="white">03095</font>	        Pawn.SetMesh();
<a name="L3096"><font color="white">03096</font>	      PlayerReplicationInfo.SetWaitingPlayer(false);
<a name="L3097"><font color="white">03097</font>	      bCollideWorld = false;
<a name="L3098"><font color="white">03098</font>	      Log(&quot;PlayerWaiting EndState Player=&quot;$player);
<a name="L3099"><font color="white">03099</font>	    }
<a name="L3100"><font color="white">03100</font>	
<a name="L3101"><font color="white">03101</font>	    function BeginState()
<a name="L3102"><font color="white">03102</font>	    {
<a name="L3103"><font color="white">03103</font>	      Super.BeginState();
<a name="L3104"><font color="white">03104</font>	      Log(&quot;PlayerWaiting BeginState Player=&quot;$player);
<a name="L3105"><font color="white">03105</font>	    }
<a name="L3106"><font color="white">03106</font>	    exec function Fire(optional float F)
<a name="L3107"><font color="white">03107</font>	    {
<a name="L3108"><font color="white">03108</font>	      if (!Player.LocalInteractions[0].IsInState('UWindows'))
<a name="L3109"><font color="white">03109</font>	        ServerReStartPlayer();
<a name="L3110"><font color="white">03110</font>	    }
<a name="L3111"><font color="white">03111</font>	    exec function UnFire(optional float F);
<a name="L3112"><font color="white">03112</font>	}*/
<a name="L3113"><font color="white">03113</font>	
<a name="L3114"><font color="white">03114</font>	state WaitingForPawn extends BaseSpectating
<a name="L3115"><font color="white">03115</font>	{
<a name="L3116"><font color="white">03116</font>	ignores SeePlayer, HearNoise, KilledBy, SwitchWeapon;
<a name="L3117"><font color="white">03117</font>	
<a name="L3118"><font color="white">03118</font>		exec function Fire( optional float F )
<a name="L3119"><font color="white">03119</font>		{
<a name="L3120"><font color="white">03120</font>		}
<a name="L3121"><font color="white">03121</font>	
<a name="L3122"><font color="white">03122</font>		exec function AltFire( optional float F )
<a name="L3123"><font color="white">03123</font>		{
<a name="L3124"><font color="white">03124</font>		}
<a name="L3125"><font color="white">03125</font>	
<a name="L3126"><font color="white">03126</font>		function LongClientAdjustPosition
<a name="L3127"><font color="white">03127</font>		(
<a name="L3128"><font color="white">03128</font>			float TimeStamp,
<a name="L3129"><font color="white">03129</font>			name newState,
<a name="L3130"><font color="white">03130</font>			EPhysics newPhysics,
<a name="L3131"><font color="white">03131</font>			float NewLocX,
<a name="L3132"><font color="white">03132</font>			float NewLocY,
<a name="L3133"><font color="white">03133</font>			float NewLocZ,
<a name="L3134"><font color="white">03134</font>			float NewVelX,
<a name="L3135"><font color="white">03135</font>			float NewVelY,
<a name="L3136"><font color="white">03136</font>			float NewVelZ,
<a name="L3137"><font color="white">03137</font>			Actor NewBase,
<a name="L3138"><font color="white">03138</font>			float NewFloorX,
<a name="L3139"><font color="white">03139</font>			float NewFloorY,
<a name="L3140"><font color="white">03140</font>			float NewFloorZ
<a name="L3141"><font color="white">03141</font>		)
<a name="L3142"><font color="white">03142</font>		{
<a name="L3143"><font color="white">03143</font>		}
<a name="L3144"><font color="white">03144</font>	
<a name="L3145"><font color="white">03145</font>		function PlayerTick(float DeltaTime)
<a name="L3146"><font color="white">03146</font>		{
<a name="L3147"><font color="white">03147</font>	//    Log(self@&quot;WaitingForPawn PlayerTick&quot;);
<a name="L3148"><font color="white">03148</font>			Global.PlayerTick(DeltaTime);
<a name="L3149"><font color="white">03149</font>	
<a name="L3150"><font color="white">03150</font>	    if ( !bTimerLoop )
<a name="L3151"><font color="white">03151</font>	    {
<a name="L3152"><font color="white">03152</font>	      Log(&quot;   WaitingForPawn PlayerTick, Timer not activated ?&quot;);
<a name="L3153"><font color="white">03153</font>	      SetTimer(0.2, true);
<a name="L3154"><font color="white">03154</font>	    }
<a name="L3155"><font color="white">03155</font>	
<a name="L3156"><font color="white">03156</font>			if ( Pawn != None )
<a name="L3157"><font color="white">03157</font>			{
<a name="L3158"><font color="white">03158</font>	      Log(&quot;   WaitingForPawn PlayerTick, Found Pawn&quot;);
<a name="L3159"><font color="white">03159</font>				Pawn.Controller = self;
<a name="L3160"><font color="white">03160</font>				ClientRestart();
<a name="L3161"><font color="white">03161</font>			}
<a name="L3162"><font color="white">03162</font>		}
<a name="L3163"><font color="white">03163</font>	
<a name="L3164"><font color="white">03164</font>		function Timer()
<a name="L3165"><font color="white">03165</font>		{
<a name="L3166"><font color="white">03166</font>	    Log(self@&quot;WaitingForPawn Timer&quot;);
<a name="L3167"><font color="white">03167</font>			AskForPawn();
<a name="L3168"><font color="white">03168</font>			MyHud.bShowScores = true;
<a name="L3169"><font color="white">03169</font>		}
<a name="L3170"><font color="white">03170</font>	
<a name="L3171"><font color="white">03171</font>		function BeginState()
<a name="L3172"><font color="white">03172</font>		{
<a name="L3173"><font color="white">03173</font>	    Log(self@&quot;WaitingForPawn BeginState&quot;);
<a name="L3174"><font color="white">03174</font>			SetTimer(0.2, true);
<a name="L3175"><font color="white">03175</font>			MyHud.bShowScores = true;
<a name="L3176"><font color="white">03176</font>		}
<a name="L3177"><font color="white">03177</font>	
<a name="L3178"><font color="white">03178</font>		function EndState()
<a name="L3179"><font color="white">03179</font>		{
<a name="L3180"><font color="white">03180</font>	    Log(self@&quot;WaitingForPawn EndState&quot;);
<a name="L3181"><font color="white">03181</font>			SetTimer(0.0, false);
<a name="L3182"><font color="white">03182</font>			MyHud.bShowScores = false;
<a name="L3183"><font color="white">03183</font>		}
<a name="L3184"><font color="white">03184</font>	}
<a name="L3185"><font color="white">03185</font>	
<a name="L3186"><font color="white">03186</font>	state GameEnded
<a name="L3187"><font color="white">03187</font>	{
<a name="L3188"><font color="white">03188</font>	ignores SeePlayer, HearNoise, KilledBy, NotifyBump, HitWall, NotifyHeadVolumeChange, NotifyPhysicsVolumeChange, Falling, TakeDamage, Suicide;
<a name="L3189"><font color="white">03189</font>	
<a name="L3190"><font color="white">03190</font>		exec function ThrowWeapon()
<a name="L3191"><font color="white">03191</font>		{
<a name="L3192"><font color="white">03192</font>		}
<a name="L3193"><font color="white">03193</font>	
<a name="L3194"><font color="white">03194</font>		function ServerReStartGame()
<a name="L3195"><font color="white">03195</font>		{
<a name="L3196"><font color="white">03196</font>			Level.Game.RestartGame();
<a name="L3197"><font color="white">03197</font>		}
<a name="L3198"><font color="white">03198</font>	
<a name="L3199"><font color="white">03199</font>		exec function Fire( optional float F )
<a name="L3200"><font color="white">03200</font>		{
<a name="L3201"><font color="white">03201</font>			if ( Role &lt; ROLE_Authority)
<a name="L3202"><font color="white">03202</font>				return;
<a name="L3203"><font color="white">03203</font>			if ( !bFrozen )
<a name="L3204"><font color="white">03204</font>				ServerReStartGame();
<a name="L3205"><font color="white">03205</font>			else if ( TimerRate &lt;= 0 )
<a name="L3206"><font color="white">03206</font>				SetTimer(1.5, false);
<a name="L3207"><font color="white">03207</font>		}
<a name="L3208"><font color="white">03208</font>	
<a name="L3209"><font color="white">03209</font>		exec function AltFire( optional float F )
<a name="L3210"><font color="white">03210</font>		{
<a name="L3211"><font color="white">03211</font>			Fire(F);
<a name="L3212"><font color="white">03212</font>		}
<a name="L3213"><font color="white">03213</font>	
<a name="L3214"><font color="white">03214</font>		function PlayerMove(float DeltaTime)
<a name="L3215"><font color="white">03215</font>		{
<a name="L3216"><font color="white">03216</font>			local vector X,Y,Z;
<a name="L3217"><font color="white">03217</font>			local Rotator ViewRotation;
<a name="L3218"><font color="white">03218</font>	
<a name="L3219"><font color="white">03219</font>			GetAxes(Rotation,X,Y,Z);
<a name="L3220"><font color="white">03220</font>			// Update view rotation.
<a name="L3221"><font color="white">03221</font>	
<a name="L3222"><font color="white">03222</font>			if ( !bFixedCamera )
<a name="L3223"><font color="white">03223</font>			{
<a name="L3224"><font color="white">03224</font>				ViewRotation = Rotation;
<a name="L3225"><font color="white">03225</font>				ViewRotation.Yaw += 32.0 * DeltaTime * aTurn;
<a name="L3226"><font color="white">03226</font>				ViewRotation.Pitch += 32.0 * DeltaTime * aLookUp;
<a name="L3227"><font color="white">03227</font>				ViewRotation.Pitch = ViewRotation.Pitch &amp; 65535;
<a name="L3228"><font color="white">03228</font>				If ((ViewRotation.Pitch &gt; 18000) &amp;&amp; (ViewRotation.Pitch &lt; 49152))
<a name="L3229"><font color="white">03229</font>				{
<a name="L3230"><font color="white">03230</font>					If (aLookUp &gt; 0)
<a name="L3231"><font color="white">03231</font>						ViewRotation.Pitch = 18000;
<a name="L3232"><font color="white">03232</font>					else
<a name="L3233"><font color="white">03233</font>						ViewRotation.Pitch = 49152;
<a name="L3234"><font color="white">03234</font>				}
<a name="L3235"><font color="white">03235</font>				SetRotation(ViewRotation);
<a name="L3236"><font color="white">03236</font>			}
<a name="L3237"><font color="white">03237</font>			else if ( ViewTarget != None )
<a name="L3238"><font color="white">03238</font>				SetRotation(ViewTarget.Rotation);
<a name="L3239"><font color="white">03239</font>	
<a name="L3240"><font color="white">03240</font>			ViewShake(DeltaTime);
<a name="L3241"><font color="white">03241</font>			ViewFlash(DeltaTime);
<a name="L3242"><font color="white">03242</font>	
<a name="L3243"><font color="white">03243</font>			if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L3244"><font color="white">03244</font>				ReplicateMove(DeltaTime, vect(0,0,0), DCLICK_None, rot(0,0,0));
<a name="L3245"><font color="white">03245</font>			else
<a name="L3246"><font color="white">03246</font>				ProcessMove(DeltaTime, vect(0,0,0), DCLICK_None, rot(0,0,0));
<a name="L3247"><font color="white">03247</font>			bPressedJump = false;
<a name="L3248"><font color="white">03248</font>		}
<a name="L3249"><font color="white">03249</font>	
<a name="L3250"><font color="white">03250</font>		function ServerMove
<a name="L3251"><font color="white">03251</font>		(
<a name="L3252"><font color="white">03252</font>			float TimeStamp,
<a name="L3253"><font color="white">03253</font>			vector InAccel,
<a name="L3254"><font color="white">03254</font>			vector ClientLoc,
<a name="L3255"><font color="white">03255</font>			bool NewbRun,
<a name="L3256"><font color="white">03256</font>			bool NewbDuck,
<a name="L3257"><font color="white">03257</font>			bool NewbJumpStatus,
<a name="L3258"><font color="white">03258</font>			eDoubleClickDir DoubleClickMove,
<a name="L3259"><font color="white">03259</font>			byte ClientRoll,
<a name="L3260"><font color="white">03260</font>			int View,
<a name="L3261"><font color="white">03261</font>			optional byte OldTimeDelta,
<a name="L3262"><font color="white">03262</font>			optional int OldAccel
<a name="L3263"><font color="white">03263</font>		)
<a name="L3264"><font color="white">03264</font>		{
<a name="L3265"><font color="white">03265</font>			Global.ServerMove(TimeStamp, InAccel, ClientLoc, NewbRun, NewbDuck, NewbJumpStatus,
<a name="L3266"><font color="white">03266</font>								DoubleClickMove, ClientRoll, (32767 &amp; (Rotation.Pitch/2)) * 32768 + (32767 &amp; (Rotation.Yaw/2)) );
<a name="L3267"><font color="white">03267</font>	
<a name="L3268"><font color="white">03268</font>		}
<a name="L3269"><font color="white">03269</font>	
<a name="L3270"><font color="white">03270</font>		function FindGoodView()
<a name="L3271"><font color="white">03271</font>		{
<a name="L3272"><font color="white">03272</font>			local vector cameraLoc;
<a name="L3273"><font color="white">03273</font>			local rotator cameraRot, ViewRotation;
<a name="L3274"><font color="white">03274</font>			local int tries, besttry;
<a name="L3275"><font color="white">03275</font>			local float bestdist, newdist;
<a name="L3276"><font color="white">03276</font>			local int startYaw;
<a name="L3277"><font color="white">03277</font>			local actor ViewActor;
<a name="L3278"><font color="white">03278</font>	
<a name="L3279"><font color="white">03279</font>			ViewRotation = Rotation;
<a name="L3280"><font color="white">03280</font>			ViewRotation.Pitch = 56000;
<a name="L3281"><font color="white">03281</font>			tries = 0;
<a name="L3282"><font color="white">03282</font>			besttry = 0;
<a name="L3283"><font color="white">03283</font>			bestdist = 0.0;
<a name="L3284"><font color="white">03284</font>			startYaw = ViewRotation.Yaw;
<a name="L3285"><font color="white">03285</font>	
<a name="L3286"><font color="white">03286</font>			for (tries=0; tries&lt;16; tries++)
<a name="L3287"><font color="white">03287</font>			{
<a name="L3288"><font color="white">03288</font>				cameraLoc = ViewTarget.Location;
<a name="L3289"><font color="white">03289</font>				PlayerCalcView(ViewActor, cameraLoc, cameraRot);
<a name="L3290"><font color="white">03290</font>				newdist = VSize(cameraLoc - ViewTarget.Location);
<a name="L3291"><font color="white">03291</font>				if (newdist &gt; bestdist)
<a name="L3292"><font color="white">03292</font>				{
<a name="L3293"><font color="white">03293</font>					bestdist = newdist;
<a name="L3294"><font color="white">03294</font>					besttry = tries;
<a name="L3295"><font color="white">03295</font>				}
<a name="L3296"><font color="white">03296</font>				ViewRotation.Yaw += 4096;
<a name="L3297"><font color="white">03297</font>			}
<a name="L3298"><font color="white">03298</font>	
<a name="L3299"><font color="white">03299</font>			ViewRotation.Yaw = startYaw + besttry * 4096;
<a name="L3300"><font color="white">03300</font>			SetRotation(ViewRotation);
<a name="L3301"><font color="white">03301</font>		}
<a name="L3302"><font color="white">03302</font>	
<a name="L3303"><font color="white">03303</font>		function Timer()
<a name="L3304"><font color="white">03304</font>		{
<a name="L3305"><font color="white">03305</font>			bFrozen = false;
<a name="L3306"><font color="white">03306</font>		}
<a name="L3307"><font color="white">03307</font>	
<a name="L3308"><font color="white">03308</font>		function BeginState()
<a name="L3309"><font color="white">03309</font>		{
<a name="L3310"><font color="white">03310</font>			local Pawn P;
<a name="L3311"><font color="white">03311</font>	
<a name="L3312"><font color="white">03312</font>			EndZoom();
<a name="L3313"><font color="white">03313</font>			bFire = 0;
<a name="L3314"><font color="white">03314</font>			bAltFire = 0;
<a name="L3315"><font color="white">03315</font>			if ( Pawn != None )
<a name="L3316"><font color="white">03316</font>			{
<a name="L3317"><font color="white">03317</font>				Pawn.SimAnim.AnimRate = 0;
<a name="L3318"><font color="white">03318</font>				Pawn.bPhysicsAnimUpdate = false;
<a name="L3319"><font color="white">03319</font>				Pawn.StopAnimating();
<a name="L3320"><font color="white">03320</font>				Pawn.SetCollision(false,false,false);
<a name="L3321"><font color="white">03321</font>			}
<a name="L3322"><font color="white">03322</font>			myHUD.bShowScores = true;
<a name="L3323"><font color="white">03323</font>			bFrozen = true;
<a name="L3324"><font color="white">03324</font>			if ( !bFixedCamera )
<a name="L3325"><font color="white">03325</font>			{
<a name="L3326"><font color="white">03326</font>				FindGoodView();
<a name="L3327"><font color="white">03327</font>				bBehindView = true;
<a name="L3328"><font color="white">03328</font>			}
<a name="L3329"><font color="white">03329</font>			SetTimer(1.5, false);
<a name="L3330"><font color="white">03330</font>			SetPhysics(PHYS_None);
<a name="L3331"><font color="white">03331</font>			ForEach DynamicActors(class'Pawn', P)
<a name="L3332"><font color="white">03332</font>			{
<a name="L3333"><font color="white">03333</font>				P.Velocity = vect(0,0,0);
<a name="L3334"><font color="white">03334</font>				P.SetPhysics(PHYS_None);
<a name="L3335"><font color="white">03335</font>			}
<a name="L3336"><font color="white">03336</font>		}
<a name="L3337"><font color="white">03337</font>	}
<a name="L3338"><font color="white">03338</font>	
<a name="L3339"><font color="white">03339</font>	state Dead
<a name="L3340"><font color="white">03340</font>	{
<a name="L3341"><font color="white">03341</font>	ignores SeePlayer, HearNoise, KilledBy, SwitchWeapon;
<a name="L3342"><font color="white">03342</font>	
<a name="L3343"><font color="white">03343</font>		function ServerRestartPlayer()
<a name="L3344"><font color="white">03344</font>		{
<a name="L3345"><font color="white">03345</font>			if ( bFrozen )
<a name="L3346"><font color="white">03346</font>				return;
<a name="L3347"><font color="white">03347</font>			Super.ServerRestartPlayer();
<a name="L3348"><font color="white">03348</font>		}
<a name="L3349"><font color="white">03349</font>	
<a name="L3350"><font color="white">03350</font>		exec function Fire( optional float F )
<a name="L3351"><font color="white">03351</font>		{
<a name="L3352"><font color="white">03352</font>			if ( !bFrozen )
<a name="L3353"><font color="white">03353</font>				ServerReStartPlayer();
<a name="L3354"><font color="white">03354</font>		}
<a name="L3355"><font color="white">03355</font>	
<a name="L3356"><font color="white">03356</font>		exec function AltFire( optional float F )
<a name="L3357"><font color="white">03357</font>		{
<a name="L3358"><font color="white">03358</font>			Fire(F);
<a name="L3359"><font color="white">03359</font>		}
<a name="L3360"><font color="white">03360</font>	
<a name="L3361"><font color="white">03361</font>		function ServerMove
<a name="L3362"><font color="white">03362</font>		(
<a name="L3363"><font color="white">03363</font>			float TimeStamp,
<a name="L3364"><font color="white">03364</font>			vector Accel,
<a name="L3365"><font color="white">03365</font>			vector ClientLoc,
<a name="L3366"><font color="white">03366</font>			bool NewbRun,
<a name="L3367"><font color="white">03367</font>			bool NewbDuck,
<a name="L3368"><font color="white">03368</font>			bool NewbJumpStatus,
<a name="L3369"><font color="white">03369</font>			eDoubleClickDir DoubleClickMove,
<a name="L3370"><font color="white">03370</font>			byte ClientRoll,
<a name="L3371"><font color="white">03371</font>			int View,
<a name="L3372"><font color="white">03372</font>			optional byte OldTimeDelta,
<a name="L3373"><font color="white">03373</font>			optional int OldAccel
<a name="L3374"><font color="white">03374</font>		)
<a name="L3375"><font color="white">03375</font>		{
<a name="L3376"><font color="white">03376</font>			Global.ServerMove(
<a name="L3377"><font color="white">03377</font>						TimeStamp,
<a name="L3378"><font color="white">03378</font>						Accel,
<a name="L3379"><font color="white">03379</font>						ClientLoc,
<a name="L3380"><font color="white">03380</font>						false,
<a name="L3381"><font color="white">03381</font>						false,
<a name="L3382"><font color="white">03382</font>						false,
<a name="L3383"><font color="white">03383</font>						DoubleClickMove,
<a name="L3384"><font color="white">03384</font>						ClientRoll,
<a name="L3385"><font color="white">03385</font>						View);
<a name="L3386"><font color="white">03386</font>		}
<a name="L3387"><font color="white">03387</font>	
<a name="L3388"><font color="white">03388</font>		function PlayerMove(float DeltaTime)
<a name="L3389"><font color="white">03389</font>		{
<a name="L3390"><font color="white">03390</font>			local vector X,Y,Z;
<a name="L3391"><font color="white">03391</font>			local rotator ViewRotation;
<a name="L3392"><font color="white">03392</font>	
<a name="L3393"><font color="white">03393</font>	        if ( !bFrozen )
<a name="L3394"><font color="white">03394</font>			{
<a name="L3395"><font color="white">03395</font>				if ( bPressedJump )
<a name="L3396"><font color="white">03396</font>				{
<a name="L3397"><font color="white">03397</font>					Fire(0);
<a name="L3398"><font color="white">03398</font>					bPressedJump = false;
<a name="L3399"><font color="white">03399</font>				}
<a name="L3400"><font color="white">03400</font>				GetAxes(Rotation,X,Y,Z);
<a name="L3401"><font color="white">03401</font>				// Update view rotation.
<a name="L3402"><font color="white">03402</font>				ViewRotation = Rotation;
<a name="L3403"><font color="white">03403</font>				ViewRotation.Yaw += 32.0 * DeltaTime * aTurn;
<a name="L3404"><font color="white">03404</font>				ViewRotation.Pitch += 32.0 * DeltaTime * aLookUp;
<a name="L3405"><font color="white">03405</font>				ViewRotation.Pitch = ViewRotation.Pitch &amp; 65535;
<a name="L3406"><font color="white">03406</font>				If ((ViewRotation.Pitch &gt; 18000) &amp;&amp; (ViewRotation.Pitch &lt; 49152))
<a name="L3407"><font color="white">03407</font>				{
<a name="L3408"><font color="white">03408</font>					If (aLookUp &gt; 0)
<a name="L3409"><font color="white">03409</font>						ViewRotation.Pitch = 18000;
<a name="L3410"><font color="white">03410</font>					else
<a name="L3411"><font color="white">03411</font>						ViewRotation.Pitch = 49152;
<a name="L3412"><font color="white">03412</font>				}
<a name="L3413"><font color="white">03413</font>				SetRotation(ViewRotation);
<a name="L3414"><font color="white">03414</font>				if ( Role &lt; ROLE_Authority ) // then save this move and replicate it
<a name="L3415"><font color="white">03415</font>					ReplicateMove(DeltaTime, vect(0,0,0), DCLICK_None, rot(0,0,0));
<a name="L3416"><font color="white">03416</font>			}
<a name="L3417"><font color="white">03417</font>			ViewShake(DeltaTime);
<a name="L3418"><font color="white">03418</font>			ViewFlash(DeltaTime);
<a name="L3419"><font color="white">03419</font>		}
<a name="L3420"><font color="white">03420</font>	
<a name="L3421"><font color="white">03421</font>		function FindGoodView()
<a name="L3422"><font color="white">03422</font>		{
<a name="L3423"><font color="white">03423</font>			local vector cameraLoc;
<a name="L3424"><font color="white">03424</font>			local rotator cameraRot, ViewRotation;
<a name="L3425"><font color="white">03425</font>			local int tries, besttry;
<a name="L3426"><font color="white">03426</font>			local float bestdist, newdist;
<a name="L3427"><font color="white">03427</font>			local int startYaw;
<a name="L3428"><font color="white">03428</font>			local actor ViewActor;
<a name="L3429"><font color="white">03429</font>	
<a name="L3430"><font color="white">03430</font>			////log(&quot;Find good death scene view&quot;);
<a name="L3431"><font color="white">03431</font>			ViewRotation = Rotation;
<a name="L3432"><font color="white">03432</font>			ViewRotation.Pitch = 56000;
<a name="L3433"><font color="white">03433</font>			tries = 0;
<a name="L3434"><font color="white">03434</font>			besttry = 0;
<a name="L3435"><font color="white">03435</font>			bestdist = 0.0;
<a name="L3436"><font color="white">03436</font>			startYaw = ViewRotation.Yaw;
<a name="L3437"><font color="white">03437</font>	
<a name="L3438"><font color="white">03438</font>			for (tries=0; tries&lt;16; tries++)
<a name="L3439"><font color="white">03439</font>			{
<a name="L3440"><font color="white">03440</font>				cameraLoc = ViewTarget.Location;
<a name="L3441"><font color="white">03441</font>				PlayerCalcView(ViewActor, cameraLoc, cameraRot);
<a name="L3442"><font color="white">03442</font>				newdist = VSize(cameraLoc - ViewTarget.Location);
<a name="L3443"><font color="white">03443</font>				if (newdist &gt; bestdist)
<a name="L3444"><font color="white">03444</font>				{
<a name="L3445"><font color="white">03445</font>					bestdist = newdist;
<a name="L3446"><font color="white">03446</font>					besttry = tries;
<a name="L3447"><font color="white">03447</font>				}
<a name="L3448"><font color="white">03448</font>				ViewRotation.Yaw += 4096;
<a name="L3449"><font color="white">03449</font>			}
<a name="L3450"><font color="white">03450</font>	
<a name="L3451"><font color="white">03451</font>			ViewRotation.Yaw = startYaw + besttry * 4096;
<a name="L3452"><font color="white">03452</font>			SetRotation(ViewRotation);
<a name="L3453"><font color="white">03453</font>		}
<a name="L3454"><font color="white">03454</font>	
<a name="L3455"><font color="white">03455</font>		function Timer()
<a name="L3456"><font color="white">03456</font>		{
<a name="L3457"><font color="white">03457</font>			myHUD.bShowScores = true;
<a name="L3458"><font color="white">03458</font>			bPressedJump = false;
<a name="L3459"><font color="white">03459</font>	//		SetTimer2(5.0,false);
<a name="L3460"><font color="white">03460</font>			bFrozen = false;
<a name="L3461"><font color="white">03461</font>		}
<a name="L3462"><font color="white">03462</font>	
<a name="L3463"><font color="white">03463</font>		function Timer2()
<a name="L3464"><font color="white">03464</font>		{
<a name="L3465"><font color="white">03465</font>	    	bFrozen = false;
<a name="L3466"><font color="white">03466</font>		}
<a name="L3467"><font color="white">03467</font>	
<a name="L3468"><font color="white">03468</font>		function BeginState()
<a name="L3469"><font color="white">03469</font>		{
<a name="L3470"><font color="white">03470</font>			local SavedMove Next;
<a name="L3471"><font color="white">03471</font>	
<a name="L3472"><font color="white">03472</font>			Enemy = None;
<a name="L3473"><font color="white">03473</font>			bBehindView = true;
<a name="L3474"><font color="white">03474</font>			bFrozen = true;
<a name="L3475"><font color="white">03475</font>			bPressedJump = false;
<a name="L3476"><font color="white">03476</font>			FindGoodView();
<a name="L3477"><font color="white">03477</font>			SetTimer(1.0, false);
<a name="L3478"><font color="white">03478</font>	
<a name="L3479"><font color="white">03479</font>			// clean out saved moves
<a name="L3480"><font color="white">03480</font>			while ( SavedMoves != None )
<a name="L3481"><font color="white">03481</font>			{
<a name="L3482"><font color="white">03482</font>				Next = SavedMoves.NextMove;
<a name="L3483"><font color="white">03483</font>				SavedMoves.Destroy();
<a name="L3484"><font color="white">03484</font>				SavedMoves = Next;
<a name="L3485"><font color="white">03485</font>			}
<a name="L3486"><font color="white">03486</font>			if ( PendingMove != None )
<a name="L3487"><font color="white">03487</font>			{
<a name="L3488"><font color="white">03488</font>				PendingMove.Destroy();
<a name="L3489"><font color="white">03489</font>				PendingMove = None;
<a name="L3490"><font color="white">03490</font>			}
<a name="L3491"><font color="white">03491</font>		}
<a name="L3492"><font color="white">03492</font>	
<a name="L3493"><font color="white">03493</font>		function EndState()
<a name="L3494"><font color="white">03494</font>		{
<a name="L3495"><font color="white">03495</font>			local SavedMove Next;
<a name="L3496"><font color="white">03496</font>	
<a name="L3497"><font color="white">03497</font>			// clean out saved moves
<a name="L3498"><font color="white">03498</font>			while ( SavedMoves != None )
<a name="L3499"><font color="white">03499</font>			{
<a name="L3500"><font color="white">03500</font>				Next = SavedMoves.NextMove;
<a name="L3501"><font color="white">03501</font>				SavedMoves.Destroy();
<a name="L3502"><font color="white">03502</font>				SavedMoves = Next;
<a name="L3503"><font color="white">03503</font>			}
<a name="L3504"><font color="white">03504</font>			if ( PendingMove != None )
<a name="L3505"><font color="white">03505</font>			{
<a name="L3506"><font color="white">03506</font>				PendingMove.Destroy();
<a name="L3507"><font color="white">03507</font>				PendingMove = None;
<a name="L3508"><font color="white">03508</font>			}
<a name="L3509"><font color="white">03509</font>			Velocity = vect(0,0,0);
<a name="L3510"><font color="white">03510</font>			Acceleration = vect(0,0,0);
<a name="L3511"><font color="white">03511</font>			bBehindView = false;
<a name="L3512"><font color="white">03512</font>			myHUD.bShowScores = false;
<a name="L3513"><font color="white">03513</font>			bPressedJump = false;
<a name="L3514"><font color="white">03514</font>			//Log(self$&quot; exiting dying with remote role &quot;$RemoteRole$&quot; and role &quot;$Role);
<a name="L3515"><font color="white">03515</font>		}
<a name="L3516"><font color="white">03516</font>	}
<a name="L3517"><font color="white">03517</font>	
<a name="L3518"><font color="white">03518</font>	//------------------------------------------------------------------------------
<a name="L3519"><font color="white">03519</font>	// ngStats Accessors
<a name="L3520"><font color="white">03520</font>	function string GetNGSecret()
<a name="L3521"><font color="white">03521</font>	{
<a name="L3522"><font color="white">03522</font>		return ngWorldSecret;
<a name="L3523"><font color="white">03523</font>	}
<a name="L3524"><font color="white">03524</font>	
<a name="L3525"><font color="white">03525</font>	function SetNGSecret(string newSecret)
<a name="L3526"><font color="white">03526</font>	{
<a name="L3527"><font color="white">03527</font>		ngWorldSecret = newSecret;
<a name="L3528"><font color="white">03528</font>	}
<a name="L3529"><font color="white">03529</font>	
<a name="L3530"><font color="white">03530</font>	//------------------------------------------------------------------------------
<a name="L3531"><font color="white">03531</font>	// Control options
<a name="L3532"><font color="white">03532</font>	function ChangeStairLook( bool B )
<a name="L3533"><font color="white">03533</font>	{
<a name="L3534"><font color="white">03534</font>		bLookUpStairs = B;
<a name="L3535"><font color="white">03535</font>		if ( bLookUpStairs )
<a name="L3536"><font color="white">03536</font>			bAlwaysMouseLook = false;
<a name="L3537"><font color="white">03537</font>	}
<a name="L3538"><font color="white">03538</font>	
<a name="L3539"><font color="white">03539</font>	function ChangeAlwaysMouseLook(Bool B)
<a name="L3540"><font color="white">03540</font>	{
<a name="L3541"><font color="white">03541</font>		bAlwaysMouseLook = B;
<a name="L3542"><font color="white">03542</font>		if ( bAlwaysMouseLook )
<a name="L3543"><font color="white">03543</font>			bLookUpStairs = false;
<a name="L3544"><font color="white">03544</font>	}
<a name="L3545"><font color="white">03545</font>	
<a name="L3546"><font color="white">03546</font>	debugonly simulated function DumpContent(float TimeStamp, int tabulation)
<a name="L3547"><font color="white">03547</font>	{
<a name="L3548"><font color="white">03548</font>	    local int j;
<a name="L3549"><font color="white">03549</font>	    local string Tab;
<a name="L3550"><font color="white">03550</font>	
<a name="L3551"><font color="white">03551</font>	    for (j=0; j&lt;tabulation; j++) Tab = Tab$&quot; &quot;;
<a name="L3552"><font color="white">03552</font>	
<a name="L3553"><font color="white">03553</font>	    log(Tab$&quot;PlayerController's dump at &quot;$TimeStamp$&quot;:&quot;);
<a name="L3554"><font color="white">03554</font>	    //log(Tab$&quot;  bLookUpStairs:&quot;$bLookUpStairs$&quot; bSnapToLevel:&quot;$bSnapToLevel$&quot; bAlwaysMouseLook:&quot;$bAlwaysMouseLook$&quot; bKeyboardLook:&quot;$bKeyboardLook$&quot; bCenterView:&quot;$bCenterView);
<a name="L3555"><font color="white">03555</font>	    //log(Tab$&quot;  bBehindView:&quot;$bBehindView$&quot; bFrozen:&quot;$bFrozen$&quot; bPressedJump:&quot;$bPressedJump$&quot; bUpdatePosition:&quot;$bUpdatePosition$&quot; bIsTyping:&quot;$bIsTyping);
<a name="L3556"><font color="white">03556</font>	    //log(Tab$&quot;  bFixedCamera:&quot;$bFixedCamera$&quot; bJumpStatus:&quot;$bJumpStatus$&quot; bUpdating:&quot;$bUpdating$&quot; bNeverSwitchOnPickup:&quot;$bNeverSwitchOnPickup);
<a name="L3557"><font color="white">03557</font>	    //log(Tab$&quot;  bZooming:&quot;$bZooming$&quot; bOnlySpectator:&quot;$bOnlySpectator$&quot; bAlwaysLevel:&quot;$bAlwaysLevel$&quot; bSetTurnRot:&quot;$bSetTurnRot);
<a name="L3558"><font color="white">03558</font>	    //log(Tab$&quot;  bCheatFlying:&quot;$bCheatFlying$&quot; bFreeCamera:&quot;$bFreeCamera$&quot; bZeroRoll:&quot;$bZeroRoll);
<a name="L3559"><font color="white">03559</font>	    //log(Tab$&quot;  AimingHelp:&quot;$AimingHelp$&quot; WaitDelay:&quot;$WaitDelay);
<a name="L3560"><font color="white">03560</font>	    //log(Tab$&quot;  aBaseX:&quot;$aBaseX$&quot; aBaseY:&quot;$aBaseY$&quot; aBaseZ:&quot;$aBaseZ$&quot; aMouseX:&quot;$aMouseX$&quot; aMouseY:&quot;$aMouseY$&quot; aForward:&quot;$aForward$&quot; aTurn:&quot;$aTurn$&quot; aStrafe:&quot;$aStrafe$&quot; aUp:&quot;$aUp$&quot; aLookUp:&quot;$aLookUp);
<a name="L3561"><font color="white">03561</font>	    //log(Tab$&quot;  bStrafe:&quot;$bStrafe$&quot; bSnapLevel:&quot;$bSnapLevel$&quot; bLook:&quot;$bLook$&quot; bFreeLook:&quot;$bFreeLook$&quot; bTurn180:&quot;$bTurn180$&quot; bTurnToNearest:&quot;$bTurnToNearest);
<a name="L3562"><font color="white">03562</font>	    //log(Tab$&quot;  DoubleClickDir:&quot;$DoubleClickDir);
<a name="L3563"><font color="white">03563</font>	    //log(Tab$&quot;  ShowFlags:&quot;$ShowFlags$&quot; Misc1:&quot;$Misc1$&quot; Misc2:&quot;$Misc2$&quot; RendMap:&quot;$RendMap$&quot; OrthoZoom:&quot;$OrthoZoom$&quot; ViewTarget:&quot;$ViewTarget$&quot; CameraDist:&quot;$CameraDist);
<a name="L3564"><font color="white">03564</font>	    //log(Tab$&quot;  DesiredFOV:&quot;$DesiredFOV$&quot; DefaultFOV:&quot;$DefaultFOV$&quot; ZoomLevel:&quot;$ZoomLevel);
<a name="L3565"><font color="white">03565</font>	    //log(Tab$&quot;  FlashScale:&quot;$FlashScale$&quot; FlashFog:&quot;$FlashFog);
<a name="L3566"><font color="white">03566</font>	    //log(Tab$&quot;  DesiredFlashScale:&quot;$DesiredFlashScale$&quot; ConstantGlowScale:&quot;$ConstantGlowScale);
<a name="L3567"><font color="white">03567</font>	    //log(Tab$&quot;  InstantFlash:&quot;$InstantFlash$&quot; DesiredFlashFog:&quot;$DesiredFlashFog$&quot; ConstantGlowFog:&quot;$ConstantGlowFog$&quot; InstantFog:&quot;$InstantFog);
<a name="L3568"><font color="white">03568</font>	    //log(Tab$&quot;  FilterColor:&quot;$FilterColor.B$&quot;,&quot;$FilterColor.G$&quot;,&quot;$FilterColor.R$&quot;,&quot;$FilterColor.A$&quot; FilterColorWanted:&quot;$FilterColorWanted.B$&quot;,&quot;$FilterColorWanted.G$&quot;,&quot;$FilterColorWanted.R$&quot;,&quot;$FilterColorWanted.A$&quot; FilterColorSpeed:&quot;$FilterColorSpeed$&quot; FilterInternalInc:&quot;$FilterInternalInc);
<a name="L3569"><font color="white">03569</font>	    //log(Tab$&quot;  TargetViewRotation:&quot;$TargetViewRotation$&quot; TargetEyeHeight:&quot;$TargetEyeHeight$&quot; TargetWeaponViewOffset:&quot;$TargetWeaponViewOffset);
<a name="L3570"><font color="white">03570</font>	    //log(Tab$&quot;  myHUD:&quot;$myHUD$&quot; LastPlaySound:&quot;$LastPlaySound$&quot; AnnouncerVolume:&quot;$AnnouncerVolume);
<a name="L3571"><font color="white">03571</font>	    //log(Tab$&quot;  SavedMoves:&quot;$SavedMoves$&quot; FreeMoves:&quot;$FreeMoves$&quot; PendingMove:&quot;$PendingMove);
<a name="L3572"><font color="white">03572</font>	    //log(Tab$&quot;  CurrentTimeStamp:&quot;$CurrentTimeStamp$&quot; LastUpdateTime:&quot;$LastUpdateTime$&quot; ServerTimeStamp:&quot;$ServerTimeStamp$&quot; TimeMargin:&quot;$TimeMargin$&quot; ClientUpdateTime:&quot;$ClientUpdateTime$&quot; MaxTimeMargin:&quot;$MaxTimeMargin);
<a name="L3573"><font color="white">03573</font>	        log(Tab$&quot;  LastUpdateTime:&quot;$LastUpdateTime$&quot; ServerTimeStamp:&quot;$ServerTimeStamp$&quot; TimeMargin:&quot;$TimeMargin$&quot; ClientUpdateTime:&quot;$ClientUpdateTime);
<a name="L3574"><font color="white">03574</font>	    //log(Tab$&quot;  OldClientWeapon:&quot;$OldClientWeapon$&quot; WeaponUpdate:&quot;$WeaponUpdate);
<a name="L3575"><font color="white">03575</font>	    //log(Tab$&quot;  ProgressMessage[0]:&quot;$ProgressMessage[0]$&quot; ProgressMessage[1]:&quot;$ProgressMessage[1]$&quot; ProgressMessage[2]:&quot;$ProgressMessage[2]$&quot; ProgressMessage[3]:&quot;$ProgressMessage[3]);
<a name="L3576"><font color="white">03576</font>	    // discarded log(Tab$&quot;  ProgressColor[0]:&quot;$ProgressColor[0]$&quot; ProgressColor[1]:&quot;$ProgressColor[1]$&quot; ProgressColor[2]:&quot;$ProgressColor[2]$&quot; ProgressColor[3]:&quot;$ProgressColor[3]);
<a name="L3577"><font color="white">03577</font>	    //log(Tab$&quot;  ProgressTimeOut:&quot;$ProgressTimeOut$&quot; QuickSaveString:&quot;$QuickSaveString$&quot; NoPauseMessage:&quot;$NoPauseMessage$&quot; ViewingFrom:&quot;$ViewingFrom$&quot; OwnCamera:&quot;$OwnCamera);
<a name="L3578"><font color="white">03578</font>	    //log(Tab$&quot;  QuickSaveString:&quot;$QuickSaveString$&quot; NoPauseMessage:&quot;$NoPauseMessage$&quot; ViewingFrom:&quot;$ViewingFrom$&quot; OwnCamera:&quot;$OwnCamera);
<a name="L3579"><font color="white">03579</font>	    //log(Tab$&quot;  ngWorldSecret:&quot;$ngWorldSecret$&quot; ngSecretSet:&quot;$ngSecretSet$&quot; ReceivedSecretChecksum:&quot;$ReceivedSecretChecksum$&quot; LocalMessageClass:&quot;$LocalMessageClass);
<a name="L3580"><font color="white">03580</font>	    log(Tab$&quot;  Bob:&quot;$Bob$&quot; LandBob:&quot;$LandBob$&quot; AppliedBob:&quot;$AppliedBob$&quot; bobtime:&quot;$bobtime$&quot; WalkBob:&quot;$WalkBob);
<a name="L3581"><font color="white">03581</font>	    //log(Tab$&quot;  MaxShakeRoll:&quot;$MaxShakeRoll$&quot; MaxShakeOffset:&quot;$MaxShakeOffset$&quot; ShakeRollRate:&quot;$ShakeRollRate$&quot; ShakeOffsetRate:&quot;$ShakeOffsetRate);
<a name="L3582"><font color="white">03582</font>	    //log(Tab$&quot;  ShakeOffset:&quot;$ShakeOffset$&quot; ShakeRollTime:&quot;$ShakeRollTime$&quot; ShakeOffsetTime:&quot;$ShakeOffsetTime);
<a name="L3583"><font color="white">03583</font>	    //log(Tab$&quot;  TurnTarget:&quot;$TurnTarget$&quot; EnemyTurnSpeed:&quot;$EnemyTurnSpeed$&quot; GroundPitch:&quot;$GroundPitch$&quot; TurnRot180:&quot;$TurnRot180);
<a name="L3584"><font color="white">03584</font>	    //log(Tab$&quot;  OldFloor:&quot;$OldFloor);
<a name="L3585"><font color="white">03585</font>	    //log(Tab$&quot;  CheatManager:&quot;$CheatManager$&quot; CheatClass:&quot;$CheatClass$&quot; PlayerInput:&quot;$PlayerInput$&quot; InputClass:&quot;$InputClass);
<a name="L3586"><font color="white">03586</font>	    //log(Tab$&quot;  DemoViewPitch:&quot;$DemoViewPitch$&quot; DemoViewYaw:&quot;$DemoViewYaw);
<a name="L3587"><font color="white">03587</font>	    //log(Tab$&quot;  GameReplicationInfo:&quot;$GameReplicationInfo);
<a name="L3588"><font color="white">03588</font>	    //log(Tab$&quot;  GameReplicationInfo:&quot;);
<a name="L3589"><font color="white">03589</font>	    //GameReplicationInfo.DumpContent(TimeStamp, tabulation)
<a name="L3590"><font color="white">03590</font>	
<a name="L3591"><font color="white">03591</font>	    Super.DumpContent(TimeStamp, tabulation);
<a name="L3592"><font color="white">03592</font>	}
<a name="L3593"><font color="white">03593</font>	
<a name="L3594"><font color="white">03594</font>	
<a name="L3595"><font color="white">03595</font>	debugonly simulated function DumpChosenContent(float TimeStamp)
<a name="L3596"><font color="white">03596</font>	{
<a name="L3597"><font color="white">03597</font>	    log(&quot;At &quot;$TimeStamp$&quot;:&quot;);
<a name="L3598"><font color="white">03598</font>	    if (pawn!=none)
<a name="L3599"><font color="white">03599</font>	    {
<a name="L3600"><font color="white">03600</font>	        if (pawn.velocity.z&gt;0.0)
<a name="L3601"><font color="white">03601</font>	        {
<a name="L3602"><font color="white">03602</font>	            log(&quot;GroundSpeed:&quot;$pawn.GroundSpeed$&quot;  jumping:&quot;$pawn.velocity.z);
<a name="L3603"><font color="white">03603</font>	        }
<a name="L3604"><font color="white">03604</font>	        else
<a name="L3605"><font color="white">03605</font>	        {
<a name="L3606"><font color="white">03606</font>	            log(&quot;GroundSpeed:&quot;$pawn.GroundSpeed);
<a name="L3607"><font color="white">03607</font>	        }
<a name="L3608"><font color="white">03608</font>	    }
<a name="L3609"><font color="white">03609</font>	}
<a name="L3610"><font color="white">03610</font>	
<a name="L3611"><font color="white">03611</font>	//    AimingHelp=0.0
<a name="L3612"><font color="white">03612</font>	
<a name="L3613"><font color="white">03613</font>	defaultproperties
<a name="L3614"><font color="white">03614</font>	{
<a name="L3615"><font color="white">03615</font>	     bAlwaysMouseLook=True
<a name="L3616"><font color="white">03616</font>	     bKeyboardLook=True
<a name="L3617"><font color="white">03617</font>	     bZeroRoll=True
<a name="L3618"><font color="white">03618</font>	     bAutoPickup=True
<a name="L3619"><font color="white">03619</font>	     ConfigType=CT_StrafeLookNotSameAxis
<a name="L3620"><font color="white">03620</font>	     OrthoZoom=40000.000000
<a name="L3621"><font color="white">03621</font>	     CameraDist=9.000000
<a name="L3622"><font color="white">03622</font>	     DesiredFOV=85.000000
<a name="L3623"><font color="white">03623</font>	     DefaultFOV=85.000000
<a name="L3624"><font color="white">03624</font>	     FlashScale=(X=1.000000,Y=1.000000,Z=1.000000)
<a name="L3625"><font color="white">03625</font>	     FilterColor=(B=128,G=128,R=128)
<a name="L3626"><font color="white">03626</font>	     FilterColorWanted=(B=128,G=128,R=128)
<a name="L3627"><font color="white">03627</font>	     FilterColorSpeed=1.000000
<a name="L3628"><font color="white">03628</font>	     AnnouncerVolume=4
<a name="L3629"><font color="white">03629</font>	     MaxTimeMargin=1.000000
<a name="L3630"><font color="white">03630</font>	     QuickSaveString=&quot;Quick Saving&quot;
<a name="L3631"><font color="white">03631</font>	     NoPauseMessage=&quot;Game is not pauseable&quot;
<a name="L3632"><font color="white">03632</font>	     ViewingFrom=&quot;Now viewing from&quot;
<a name="L3633"><font color="white">03633</font>	     OwnCamera=&quot;Now viewing from own camera&quot;
<a name="L3634"><font color="white">03634</font>	     LocalMessageClass=Class'Engine.LocalMessage'
<a name="L3635"><font color="white">03635</font>	     Bob=0.016000
<a name="L3636"><font color="white">03636</font>	     EnemyTurnSpeed=45000
<a name="L3637"><font color="white">03637</font>	     CheatClass=Class'Engine.CheatManager'
<a name="L3638"><font color="white">03638</font>	     InputClass=Class'Engine.PlayerInput'
<a name="L3639"><font color="white">03639</font>	     FovAngle=85.000000
<a name="L3640"><font color="white">03640</font>	     Handedness=1.000000
<a name="L3641"><font color="white">03641</font>	     bIsPlayer=True
<a name="L3642"><font color="white">03642</font>	     bCanOpenDoors=True
<a name="L3643"><font color="white">03643</font>	     bCanDoSpecial=True
<a name="L3644"><font color="white">03644</font>	     bTravel=True
<a name="L3645"><font color="white">03645</font>	     NetPriority=3.000000
<a name="L3646"><font color="white">03646</font>	}
</code></pre></font></td></tr></table></center>
<hr/><center><FONT SIZE="-1">
End Source Code</FONT>
</center><hr/>
</BODY>
</HTML>
